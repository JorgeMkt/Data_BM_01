"0","gdp_reg_df <- wbstats::wb_data("
"0","  indicator='NY.GDP.PCAP.KD',"
"0","  start_date=2016,"
"0","  end_date=2019"
"0","    ) %>%"
"0","  mutate(log_gdp_pcap=log(NY.GDP.PCAP.KD)) %>%"
"0","  left_join(select(comparison_df,iso3c,date, region,SPI.INDEX,SCI,ODIN_score,SPI_v0)) #merge on SPI Index data"
"0","  "
"0","  "
"0","#regress Log GDP SPI"
"0","m_spi <- lm_robust(SPI.INDEX ~ log_gdp_pcap + factor(date), data = gdp_reg_df, se_type = ""HC2"") "
"0",""
"0","m_spi_lm <- lm(SPI.INDEX ~ log_gdp_pcap + factor(date), data = filter(gdp_reg_df,!(is.na(SPI.INDEX) | is.na(log_gdp_pcap)))) "
"0","gdp_reg_df_resids <- broom::augment(m_spi_lm, data=filter(gdp_reg_df,!(is.na(SPI.INDEX) | is.na(log_gdp_pcap)) ))"
"0",""
"0",""
"0","#regress Log GDP SCI"
"0","m_sci <- lm_robust(SCI ~ log_gdp_pcap + factor(date), data = gdp_reg_df, se_type = ""HC2"") "
"0",""
"0",""
"0","#regress Log GDP ODIN"
"0","m_odin <- lm_robust(ODIN_score ~ log_gdp_pcap + factor(date), data = gdp_reg_df, se_type = ""HC2"") "
"0",""
"0",""
"0","#regress Log GDP SPI_v0"
"0","m_spi_v0 <- lm_robust(SPI_v0 ~ log_gdp_pcap + factor(date), data = gdp_reg_df, se_type = ""HC2"") "
"0",""
"0","m_spi_tidy <- broom::tidy(m_spi)"
"0","m_spi_glance <- broom::glance(m_spi)"
"0",""
"0","spi_coef <- as.numeric(m_spi_tidy[2,2])"
"0","spi_r2 <- as.numeric(m_spi_glance[1,1])"
"0",""
