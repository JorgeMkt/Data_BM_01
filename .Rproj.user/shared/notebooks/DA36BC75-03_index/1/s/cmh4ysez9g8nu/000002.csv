"0",""
"0","#HCI"
"0","ge_df <- wbstats::wb_data(country=""countries_only"", "
"0","              indicator=c('GE.EST','NY.GDP.PCAP.KD', 'GE.PER.RNK'),"
"0","              start_date=2016,"
"0","              end_date=2019,"
"0","              return_wide = T) %>%"
"0","  left_join(select(spi_index_df,iso3c,date, region,starts_with('SPI.INDEX'))) #merge on SPI Index data"
"0",""
"0","#get the correlation for 2019"
"0","ge_df_2019 <- ge_df %>%"
"0","  filter(date==2019) "
"0",""
"0",""
"0","corr_ge <- cor(ge_df_2019$GE.EST,ge_df_2019$SPI.INDEX, use='pairwise.complete.obs')"
"0",""
"0",""
"0",""
"0","ge_spi <- lm_robust(GE.EST ~ SPI.INDEX + log(NY.GDP.PCAP.KD) + factor(date) + factor(region) , data = ge_df, se_type = ""HC2"") "
"0",""
"0","ge_spi_tidy <- broom::tidy(ge_spi)"
"0","ge_spi_glance <- broom::glance(ge_spi)"
"0",""
"0","#get effect of SPI"
"0","spi_eff <- ge_spi_tidy %>%"
"0","  filter(term=='SPI.INDEX')"
"0","spi_eff <- spi_eff$estimate"
