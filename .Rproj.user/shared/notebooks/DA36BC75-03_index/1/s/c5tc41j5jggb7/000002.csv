"0",""
"0","#get top 10 and bottom 10 over performers compared to gdp and hci"
"0",""
"0","## GDP"
"0","#regress SPI on gdp"
"0",""
"0","indicator <- 'SPI.INDEX'"
"0",""
"0","form <- paste(indicator, "" ~ log(value)"", sep="""")"
"0",""
"0","m_spi <- lm(form , data = gdp_df_2019) "
"0",""
"0","gdp_overperformers_df <- gdp_df_2019 %>%"
"0","  modelr::add_residuals(m_spi) %>%"
"0","  arrange(-resid) %>%"
"0","  head(15)"
"0",""
"0","gdp_underperformers_df <- gdp_df_2019 %>%"
"0","  modelr::add_residuals(m_spi) %>%"
"0","  arrange(resid) %>%"
"0","  head(15)"
"0",""
"0",""
"0","gdp_overperformers_plot <-  gdp_overperformers_df %>%"
"0","  bind_rows(gdp_underperformers_df) %>%"
"0","  arrange(resid) %>%"
"0","  mutate(country=factor(country, levels=country),"
"0","         group=if_else(resid>=0, 'above','below')) %>%"
"0","  ggplot(aes(x=country, y=resid, color=group)) +"
"0","  geom_segment( aes(x=country ,xend=country, y=0, yend=resid), color=""black"") +"
"0","  geom_point(size=3) +"
"0","  scale_color_manual(name=""GDP per Capita"","
"0","                     labels = c(""Over-performers"", ""Under-performers""),"
"0","                     values = c('above'=""#1A9850"", 'below'=""#D73027"")) +"
"0","  coord_flip() +"
"0","  theme_bw() +"
"0","  theme("
"0","    panel.grid.minor.y = element_blank(),"
"0","    panel.grid.major.y = element_blank(),"
"0","    legend.position = 'bottom'"
"0","  ) +"
"0","  xlab("""") +"
"0","  ylab(""SPI (deviation)"") +"
"0","  ggtitle(""GDP per capita"")"
"0",""
"0",""
"0",""
"0","### HCI"
"0",""
"0",""
"0","#regress SPI on hci"
"0","m_spi_hci <- lm(form , data = hci_df_2018) "
"2","Error in lm.fit(x, y, offset = offset, singular.ok = singular.ok, ...) : 
  0 (non-NA) cases
"
