"0",""
"0","density_df <- comparison_df %>%"
"0","  select(iso3c, date, SPI.INDEX, SPI_v0, ODIN_score, SCI) %>%"
"0","  pivot_longer("
"0","    cols = c('SPI.INDEX', 'SPI_v0', 'ODIN_score', 'SCI'),"
"0","    names_to='index',"
"0","    values_to='index_values'"
"0","  ) %>%"
"0","  mutate("
"0","    index_name=case_when("
"0","      index=='SPI.INDEX' ~ ""SPI Index"","
"0","      index=='SPI_v0' ~ ""SPI Index Version 0"","
"0","      index=='ODIN_score' ~ ""Open Data Watch"","
"0","      index=='SCI' ~ ""SCI"","
"0","      "
"0","    )"
"0","  )"
"0",""
"0","#show the density of our SPI index"
"0","ggplot(spi_index_df, aes(x = SPI.INDEX)) + "
"0","  facet_wrap(~date) +"
"0","  geom_histogram( "
"0","                          aes(y=..density.., fill=..count..)) +"
"0","  stat_function(fun = dnorm, "
"0","                color='red',"
"0","                args = list(mean = mean(spi_index_df$SPI.INDEX, na.rm=T), sd = sd(spi_index_df$SPI.INDEX, na.rm=T))) +"
"0","    theme_bw() +"
"0","  labs("
"0","    title='Distribution of SPI Index across Countries',"
"0","    color='Index Name'"
"0","  ) +"
"0","  xlab('SPI Index value') +"
"0","  theme(legend.position = 'bottom')"
