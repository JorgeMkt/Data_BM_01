"0",""
"0","#read in csv file."
"0","D5.2.5.HOUS <- read_csv(file = paste(raw_dir, ""5.2_DISM"",""D5.2.5.HOUS.csv"", sep=""/"" )) %>%"
"0","  mutate(SPI.D5.2.5.HOUS=case_when("
"0","    HOUS==""COICOP"" ~ 1, "
"0","    TRUE ~ 0 "
"0","  ),"
"0","  RAW.D5.2.5.HOUS=HOUS)  %>%"
"0","  select(iso3c, country, date, RAW.D5.2.5.HOUS, SPI.D5.2.5.HOUS  ) %>%"
"0","  arrange(date, country)"
"0",""
"0","#####"
"0","# IMF Data"
"0","#####"
"0",""
"0","#use alternative data source provided by the IMF"
"0",""
"0","#read in data on COICOP from IMF"
"0","D5.2.5.HOUS.IMF <-   read_excel(path=paste(raw_dir, ""5.2_DISM"",""2020.11.04_Compiled Data for World Bank.xlsx"", sep=""/"" ),"
"0","                               sheet = ""3. Household Consump Class"","
"0","                               skip=0"
"0","                               ) %>%"
"0","  as_tibble(.name_repair='universal') %>%  "
"0","  rename("
"0","    IMF_code=Code,"
"0","    IMF_country=Country,"
"0","  ) %>%"
"0","  mutate(SPI.D5.2.5.HOUS.IMF=case_when("
"0","    Status==""CIOCOP"" ~ 1, "
"0","    TRUE ~ 0 "
"0","  ),"
"0","  RAW.D5.2.5.HOUS.IMF=Status) %>%"
"0","  mutate(IMF_code=as.numeric(IMF_code)) %>%"
"0","  left_join(imf_codes) %>%"
"0","  select(iso3c, RAW.D5.2.5.HOUS.IMF,SPI.D5.2.5.HOUS.IMF ) %>%"
"0","  mutate(date=2019)"
"0","  "
"0","  "
"0","D5.2.5.HOUS <-  D5.2.5.HOUS %>%"
"0","  full_join(D5.2.5.HOUS.IMF) %>%"
"0","  mutate(SPI.D5.2.5.HOUS=if_else(is.na(SPI.D5.2.5.HOUS),SPI.D5.2.5.HOUS.IMF,SPI.D5.2.5.HOUS)) %>% #fill in with IMF data if missing.  This applies mostly to high income countries"
"0","  select(-country,-SPI.D5.2.5.HOUS.IMF) %>%"
"0","  arrange(date, iso3c) "
