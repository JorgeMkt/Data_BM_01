"0",""
"0","#read data"
"0","ilo_df_raw <- read_csv(paste(raw_dir, '4.2_SOAD','ILOSTAT_sources.csv', sep=""/""))"
"0",""
"0","#cleaning of aspire data"
"0","ilo_df <- ilo_df_raw %>%"
"0","  filter(!grepl('legislation',Source)) %>% # filter out labor legislation, which is included but not reflective of needs."
"0","  group_by(iso3c, date) %>%"
"0","  summarise(ILO.Source.type=last(Source.type)) %>%"
"0","  left_join(country_metadata) "
"0",""
"0",""
"0","#apply carryforward to fill in missing values"
"0","ilo_df <- ilo_df %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  arrange(iso3c, date) %>%"
"0","  group_by(iso3c) %>%"
"0","  mutate(ILO.Source.type.filled=if_else(!is.na(ILO.Source.type),1, as.numeric(NA))) %>%"
"0","  fill(ILO.Source.type.filled, .direction='down') %>%"
"0","  mutate(SPI.D4.2.4.LBR=if_else(is.na(ILO.Source.type.filled),0, ILO.Source.type.filled),"
"0","         RAW.D4.2.4.LBR=ILO.Source.type) %>%"
"0","  select(c('iso3c', 'country', 'date', 'RAW.D4.2.4.LBR', 'SPI.D4.2.4.LBR')  )"
"0",""
"0","#add to spi databases"
"0","spi_df <- spi_df %>%"
"0","  left_join(ilo_df)  "
"0",""
"0",""
"0","ilo_map <- ilo_df %>%"
"0","  filter(SPI.D4.2.4.LBR==1)"
"0",""
"0","spi_mapper('ilo_map', 'SPI.D4.2.4.LBR', 'Labor Administrative Data Available According to ILO' )"
