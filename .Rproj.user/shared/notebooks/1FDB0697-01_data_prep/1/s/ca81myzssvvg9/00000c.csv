"0",""
"0","#pull from unsd api"
"0","D5.5_DIFI <- un_pull('SG_STT_NSDSFND', '2004', '2019') %>%"
"0","  select(iso3c, date,value) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  mutate(RAW.5.5.DIFI=if_else((is.na(value) | value==""NaN""),as.numeric(NA), as.numeric(value)),"
"0","         SPI.5.5.DIFI=if_else((is.na(value) | value==""NaN""),as.numeric(NA), as.numeric(value))) %>%"
"0","  select(-value)"
"0",""
"0","# #read in csv file."
"0","# D5.5_DIFI <- read_csv(file = paste(raw_dir, ""5.5_DIFI"",""D5.5_DIFI.csv"", sep=""/"" )) %>%"
"0","#   as_tibble(.name_repair = 'universal') %>%"
"0","#   transmute("
"0","#     country=Country,"
"0","#     date=Year,"
"0","#     SPI.5.5.DIFI=Data.Value"
"0","#   ) %>%"
"0","#     mutate(country=case_when("
"0","#     country==""Bahamas"" ~ ""Bahamas, The"",                  "
"0","#     country==""Bolivia (Plurinational State of)""   ~  ""Bolivia""   ,                  "
"0","#     country==""Côte d'Ivoire""  ~  ""Cote d'Ivoire""                ,"
"0","#     country==""Democratic Republic of the Congo""  ~ ""Congo, Dem. Rep.""  ,           "
"0","#     country==""Congo""  ~ ""Congo, Rep.""        ,           "
"0","#     country==""Curacao""  ~  ""Curacao""       ,                "
"0","#     country==""Czechia""   ~  ""Czech Republic""     ,        "
"0","#     country==""Egypt""  ~ ""Egypt, Arab Rep.""        ,      "
"0","#     country==""Micronesia (Federated States of)""  ~ ""Micronesia, Fed. Sts.""  ,       "
"0","#     country==""United Kingdom""   ~  ""United Kingdom""    ,         "
"0","#     country==""Gambia""    ~  ""Gambia, The""     ,           "
"0","#     country==""Iran (Islamic Republic of)""  ~ ""Iran, Islamic Rep."" ,           "
"0","#     country==""Kyrgyzstan""   ~  ""Kyrgyz Republic""   ,          "
"0","#     country==""Republic of Korea""   ~ ""Korea, Rep.""   ,               "
"0","#     country==""Lao People's Democratic Republic""    ~  ""Lao PDR"" ,                    "
"0","#     country==""Saint Kitts and Nevis	""   ~ ""St. Kitts and Nevis"","
"0","#     country==""Saint Lucia""   ~ ""St. Lucia"","
"0","#     country==""Republic of Moldova""   ~  ""Moldova""   ,                  "
"0","#     country==""Democratic People's Republic of Korea""  ~  ""Korea, Dem. People’s Rep."" ,  "
"0","#     country==""Slovakia""   ~  ""Slovak Republic""             ,"
"0","#     country==""United Republic of Tanzania""   ~  ""Tanzania"" ,                    "
"0","#     country==""United States of America""  ~ ""United States""  ,                "
"0","#     country==""Saint Vincent and the Grenadines"" ~ ""St. Vincent and the Grenadines"" ,"
"0","#     country==""Venezuela (Bolivarian Republic of)""  ~  ""Venezuela, RB""   ,              "
"0","#     country==""British Virgin Islands""  ~  ""British Virgin Islands"" ,       "
"0","#     country==""Viet Nam""  ~ ""Vietnam""        ,              "
"0","#     country==""Yemen""  ~ ""Yemen, Rep."","
"0","#     country==""United Kingdom of Great Britain and Northern Ireland"" ~ ""United Kingdom"","
"0","#     TRUE ~ country"
"0","#   )) %>%"
"0","#   mutate(RAW.5.5.DIFI=if_else(SPI.5.5.DIFI=='no data',as.character(NA), SPI.5.5.DIFI),"
"0","#          SPI.5.5.DIFI=if_else(SPI.5.5.DIFI=='no data',as.numeric(NA), as.numeric(SPI.5.5.DIFI))) %>%"
"0","#   right_join(spi_df_empty)"
"0",""
"0","#add to spi databases"
"0","spi_df <- spi_df %>%"
"0","  left_join(D5.5_DIFI)"
"0",""
"0",""
"0",""
"0",""
"0",""
"0","D5.5_DIFI_map <- D5.5_DIFI %>%"
"0","  filter(!is.na(RAW.5.5.DIFI))"
"0",""
"0","spi_mapper('D5.5_DIFI_map', 'SPI.5.5.DIFI', 'Statistical plan fully funded. Source: Paris21')"
"0",""
