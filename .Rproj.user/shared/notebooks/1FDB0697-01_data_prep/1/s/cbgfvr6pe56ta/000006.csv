"0",""
"0","Request_metadata <- GET(url = ""https://api.worldbank.org/v2/sources/2/country/all/metadata?per_page=30000&format=json"")"
"0","Response_metadata <- content(Request_metadata, as = ""text"", encoding = ""UTF-8"")"
"0",""
"0","# Parse the JSON content and convert it to a data frame."
"0","JSON_metadata <- jsonlite::fromJSON(Response_metadata, flatten = TRUE) %>%"
"0","  data.frame()"
"0",""
"0","#do some conversion to produce a dataframe"
"0","crvs_df <- JSON_metadata$source.concept %>%"
"0","  data.frame() "
"0",""
"0","#do some more cleaning and conversion"
"0","crvs_df <- crvs_df$variable %>%"
"0","  data.frame()   %>%"
"0","  rename(iso3c=id) %>%"
"0","  unnest(metatype) %>%"
"0","  pivot_wider("
"0","    id_cols=iso3c,"
"0","    names_from=id,"
"0","    values_from=value"
"0","  ) "
"0",""
"0","# Manipulate and clean final data"
"0","crvs_df <- crvs_df %>%"
"0","  filter(!is.na(IncomeGroup))  #keep just countries (drop aggregations)"
"0","  "
"0","crvs_df$crvs<-as.numeric(grepl(""Yes"", crvs_df$Vitalregistrationcomplete)) #create 0,1 variable for vital registration"
"0",""
