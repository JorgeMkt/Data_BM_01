"0",""
"0",""
"0","#get list of survey ids"
"0","internal_series <- study_df_internal$idno"
"0",""
"0",""
"0",""
"0",""
"0",""
"0","#use purr to loop over list of surveys and return some extra info"
"0","series_info_fn <- function(series) {"
"0","      "
"0","    info <- fromJSON(paste('http://microdatalib.worldbank.org/index.php/api/catalog/',series, sep=""""))    "
"0","    series_info <- as.character(info$dataset$metadata$study_desc$series_statement$series_name)"
"0","    geog_coverage <- as.character(info$dataset$metadata$study_desc$study_info$geog_coverage)"
"0","    tibble::tibble(series_info, geog_coverage)"
"0","}"
"0",""
"0",""
"0","#now produce a dataframe with the more info on survey"
"0","study_df_internal <- study_df_internal %>%"
"0","  mutate(series_info_dat=map(internal_series, possibly(series_info_fn, "
"0","                                           otherwise = 'Something Wrong'"
"0","                                           )"
"0","                     )"
"0","  ) %>%"
"0","  unnest(series_info_dat)"
"2","Error: Problem with `mutate()` input `series_info_dat`.
[31mx[39m Terminated by user
[34mi[39m Input `series_info_dat` is `map(internal_series, possibly(series_info_fn, otherwise = ""Something Wrong""))`.
"
