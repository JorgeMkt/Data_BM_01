"0",""
"0","#read in csv file."
"0","D5.2.7.CGOV <- read_csv(file = paste(raw_dir, ""5.2_DISM"",""D5.2.7.CGOV.csv"", sep=""/"" )) %>%"
"0","  mutate(SPI.D5.2.7.CGOV=case_when("
"0","    CGOV==""AC"" ~ 1, "
"0","    CGOV==""CA"" ~ 0.5,"
"0","    TRUE ~ 0 "
"0","  ),"
"0","  RAW.D5.2.7.CGOV=CGOV)  %>%"
"0","  select(iso3c, country, date, RAW.D5.2.7.CGOV, SPI.D5.2.7.CGOV  ) %>%"
"0","  arrange(date, country)"
"0",""
"0","#####"
"0","# IMF Data"
"0","#####"
"0",""
"0","#use alternative data source provided by the IMF"
"0",""
"0","#read in data from IMF"
"0","D5.2.7.CGOV.IMF <-   read_excel(path=paste(raw_dir, ""5.2_DISM"",""2020.11.04_Compiled Data for World Bank.xlsx"", sep=""/"" ),"
"0","                               sheet = ""5. Cntrl Gct Acct Status"","
"0","                               skip=6"
"0","                               ) %>%"
"0","  as_tibble(.name_repair='universal') %>%  "
"0","  rename("
"0","    IMF_code=Code,"
"0","    IMF_country=Country,"
"0","  ) %>%"
"0","  mutate(SPI.D5.2.7.CGOV.IMF=case_when("
"0","    General.Government..consolidated.==""AC"" ~ 1, "
"0","    General.Government..consolidated.==""CA"" ~ 0.5,"
"0","    TRUE ~ 0 "
"0","  ),"
"0","  RAW.D5.2.7.CGOV.IMF=General.Government..consolidated.) %>%"
"0","  mutate(IMF_code=as.numeric(IMF_code)) %>%"
"0","  left_join(imf_codes) %>%"
"0","  select(iso3c, RAW.D5.2.7.CGOV.IMF,SPI.D5.2.7.CGOV.IMF ) %>%"
"0","  mutate(date=2019)"
"0","  "
"0","  "
"0","D5.2.7.CGOV <-  D5.2.7.CGOV %>%"
"0","  full_join(D5.2.7.CGOV.IMF) %>%"
"0","  mutate(SPI.D5.2.7.CGOV=if_else(is.na(SPI.D5.2.7.CGOV),SPI.D5.2.7.CGOV.IMF,SPI.D5.2.7.CGOV)) %>% #fill in with IMF data if missing.  This applies mostly to high income countries"
"0","  select(-country,-SPI.D5.2.7.CGOV.IMF) %>%"
"0","  arrange(date, iso3c)"
"0",""
