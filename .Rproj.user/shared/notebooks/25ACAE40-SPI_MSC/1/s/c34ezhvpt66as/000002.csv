"0",""
"0","#read in csv file."
"0","D5.2.9.MONY <- read_csv(file = paste(raw_dir, ""5.2_DISM"",""D5.2.9.MONY.csv"", sep=""/"" )) %>%"
"0","  mutate(SPI.D5.2.9.MONY=case_when("
"0","    MONY==""MFSM 2000"" | MONY==""MFSMCG 2016""~ 1, "
"0","    TRUE ~ 0 "
"0","  ),"
"0","  RAW.D5.2.9.MONY=MONY)  %>%"
"0","  select(iso3c, country, date, RAW.D5.2.9.MONY, SPI.D5.2.9.MONY  ) %>%"
"0","  arrange(date, country)"
"0",""
"0","#####"
"0","# IMF Data"
"0","#####"
"0",""
"0","#use alternative data source provided by the IMF"
"0",""
"0","#read in data from IMF"
"0","D5.2.9.MONY.IMF <-   read_excel(path=paste(raw_dir, ""5.2_DISM"",""2020.11.04_Compiled Data for World Bank.xlsx"", sep=""/"" ),"
"0","                               sheet =""7. MFS Compilation status"","
"0","                               skip=0"
"0","                               ) %>%"
"0","  as_tibble(.name_repair='universal') %>%  "
"0","  rename("
"0","    IMF_code=Code,"
"0","    IMF_country=Country,"
"0","  ) %>%"
"0","  mutate(SPI.D5.2.9.MONY.IMF=case_when("
"0","    grepl('MFSM 2000',Monetary.and.Financial.Statistics..MFS..Reporting.Status) ~ 1, "
"0","    TRUE ~ 0 "
"0","  ),"
"0","  RAW.D5.2.9.MONY.IMF=Monetary.and.Financial.Statistics..MFS..Reporting.Status) %>%"
"0","  mutate(IMF_code=as.numeric(IMF_code)) %>%"
"0","  left_join(imf_codes) %>%"
"0","  select(iso3c, RAW.D5.2.9.MONY.IMF,SPI.D5.2.9.MONY.IMF ) %>%"
"0","  mutate(date=2019)"
"0","  "
"0","  "
"0","D5.2.9.MONY <-  D5.2.9.MONY %>%"
"0","  full_join(D5.2.9.MONY.IMF) %>%"
"0","  mutate(SPI.D5.2.9.MONY=if_else(is.na(SPI.D5.2.9.MONY),SPI.D5.2.9.MONY.IMF,SPI.D5.2.9.MONY)) %>% #fill in with IMF data if missing.  This applies mostly to high income countries"
"0","  select(-country,-SPI.D5.2.9.MONY.IMF) %>%"
"0","  arrange(date, iso3c)"
"0",""
"0",""
