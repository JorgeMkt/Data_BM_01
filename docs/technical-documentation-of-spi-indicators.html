<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Technical Documentation of SPI Indicators | Technical Documentation on Data Sources and Methods for Statistical Performance Indicators</title>
  <meta name="description" content="Chapter 2 Technical Documentation of SPI Indicators | Technical Documentation on Data Sources and Methods for Statistical Performance Indicators" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Technical Documentation of SPI Indicators | Technical Documentation on Data Sources and Methods for Statistical Performance Indicators" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Technical Documentation of SPI Indicators | Technical Documentation on Data Sources and Methods for Statistical Performance Indicators" />
  
  
  

<meta name="author" content="Brian Stacy" />


<meta name="date" content="2021-01-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#overview-of-the-new-spi"><i class="fa fa-check"></i><b>1.2</b> Overview of the New SPI</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#pillars-of-the-new-spi"><i class="fa fa-check"></i><b>1.3</b> Pillars of the new SPI</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#data-use"><i class="fa fa-check"></i><b>1.3.1</b> Data use</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#data-services"><i class="fa fa-check"></i><b>1.3.2</b> Data services</a></li>
<li class="chapter" data-level="1.3.3" data-path="index.html"><a href="index.html#data-products"><i class="fa fa-check"></i><b>1.3.3</b> Data products</a></li>
<li class="chapter" data-level="1.3.4" data-path="index.html"><a href="index.html#data-sources"><i class="fa fa-check"></i><b>1.3.4</b> Data sources</a></li>
<li class="chapter" data-level="1.3.5" data-path="index.html"><a href="index.html#data-infrastructure"><i class="fa fa-check"></i><b>1.3.5</b> Data infrastructure</a></li>
<li class="chapter" data-level="1.3.6" data-path="index.html"><a href="index.html#description-of-pillars"><i class="fa fa-check"></i><b>1.3.6</b> Description of Pillars</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#spi-data"><i class="fa fa-check"></i><b>1.4</b> SPI Data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html"><i class="fa fa-check"></i><b>2</b> Technical Documentation of SPI Indicators</a>
<ul>
<li class="chapter" data-level="2.1" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#data-use-1"><i class="fa fa-check"></i><b>2.1</b> Data Use</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-1.1-data-use-by-national-legislature"><i class="fa fa-check"></i><b>2.1.1</b> Indicator 1.1: Data use by national legislature</a></li>
<li class="chapter" data-level="2.1.2" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-1.2-data-use-by-national-executive-branch"><i class="fa fa-check"></i><b>2.1.2</b> Indicator 1.2: Data use by national executive branch</a></li>
<li class="chapter" data-level="2.1.3" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-1.3-data-use-by-civil-society"><i class="fa fa-check"></i><b>2.1.3</b> Indicator 1.3: Data use by civil society</a></li>
<li class="chapter" data-level="2.1.4" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-1.4-data-use-by-academia"><i class="fa fa-check"></i><b>2.1.4</b> Indicator 1.4: Data use by academia</a></li>
<li class="chapter" data-level="2.1.5" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-1.5-data-use-by-international-organizations"><i class="fa fa-check"></i><b>2.1.5</b> Indicator 1.5: Data use by international organizations</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#data-services-1"><i class="fa fa-check"></i><b>2.2</b> Data Services</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-2.1-data-releases"><i class="fa fa-check"></i><b>2.2.1</b> Indicator 2.1: Data Releases</a></li>
<li class="chapter" data-level="2.2.2" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-2.2-online-access"><i class="fa fa-check"></i><b>2.2.2</b> Indicator 2.2: Online access</a></li>
<li class="chapter" data-level="2.2.3" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-2.3-advisory-analytical-services"><i class="fa fa-check"></i><b>2.2.3</b> Indicator 2.3: Advisory/ Analytical Services</a></li>
<li class="chapter" data-level="2.2.4" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-2.4-data-services"><i class="fa fa-check"></i><b>2.2.4</b> Indicator 2.4: Data services</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#data-products-1"><i class="fa fa-check"></i><b>2.3</b> Data Products</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#methodology"><i class="fa fa-check"></i><b>2.3.1</b> Methodology</a></li>
<li class="chapter" data-level="2.3.2" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicators-3.1---3.17"><i class="fa fa-check"></i><b>2.3.2</b> Indicators 3.1 - 3.17</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#data-sources-1"><i class="fa fa-check"></i><b>2.4</b> Data Sources</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-4.1-censuses-and-surveys"><i class="fa fa-check"></i><b>2.4.1</b> Indicator 4.1: censuses and surveys</a></li>
<li class="chapter" data-level="2.4.2" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-4.2-administrative-data"><i class="fa fa-check"></i><b>2.4.2</b> Indicator 4.2: administrative data</a></li>
<li class="chapter" data-level="2.4.3" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-4.3-geospatial-data"><i class="fa fa-check"></i><b>2.4.3</b> Indicator 4.3: geospatial data</a></li>
<li class="chapter" data-level="2.4.4" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-4.4-privatecitizen-generated-data"><i class="fa fa-check"></i><b>2.4.4</b> Indicator 4.4: private/citizen generated data</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#data-infrastructure-1"><i class="fa fa-check"></i><b>2.5</b> Data Infrastructure</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-5.1-legislation-and-governance"><i class="fa fa-check"></i><b>2.5.1</b> Indicator 5.1: legislation and governance</a></li>
<li class="chapter" data-level="2.5.2" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-5.2-standards"><i class="fa fa-check"></i><b>2.5.2</b> Indicator 5.2: standards</a></li>
<li class="chapter" data-level="2.5.3" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-5.3-skills"><i class="fa fa-check"></i><b>2.5.3</b> Indicator 5.3: skills</a></li>
<li class="chapter" data-level="2.5.4" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-5.4-partnerships"><i class="fa fa-check"></i><b>2.5.4</b> Indicator 5.4: partnerships</a></li>
<li class="chapter" data-level="2.5.5" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#indicator-5.5-finance"><i class="fa fa-check"></i><b>2.5.5</b> Indicator 5.5: finance</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="technical-documentation-of-spi-indicators.html"><a href="technical-documentation-of-spi-indicators.html#final-dataset"><i class="fa fa-check"></i><b>2.6</b> Final Dataset</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><i class="fa fa-check"></i><b>3</b> Measuring the Statistical Performance of Countries: An Overview of the Statistical Performance Indicators and Index</a>
<ul>
<li class="chapter" data-level="3.1" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#spi-index-methodology"><i class="fa fa-check"></i><b>3.1</b> SPI Index Methodology</a></li>
<li class="chapter" data-level="3.2" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#handling-missing-data"><i class="fa fa-check"></i><b>3.2</b> Handling Missing Data</a></li>
<li class="chapter" data-level="3.3" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#process-for-disputing-the-data"><i class="fa fa-check"></i><b>3.3</b> Process for Disputing the Data</a></li>
<li class="chapter" data-level="3.4" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#process-for-updating-indicators"><i class="fa fa-check"></i><b>3.4</b> Process for Updating Indicators</a></li>
<li class="chapter" data-level="3.5" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#spi-overall-scores"><i class="fa fa-check"></i><b>3.5</b> SPI Overall Scores</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#spi-overall-score-by-region-and-income-group"><i class="fa fa-check"></i><b>3.5.1</b> SPI Overall Score by Region and Income Group</a></li>
<li class="chapter" data-level="3.5.2" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#spi-scores-by-dimension"><i class="fa fa-check"></i><b>3.5.2</b> SPI Scores by Dimension</a></li>
<li class="chapter" data-level="3.5.3" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#spi-scores-by-pillar-and-indicator"><i class="fa fa-check"></i><b>3.5.3</b> SPI Scores by Pillar and Indicator</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#analysis"><i class="fa fa-check"></i><b>3.6</b> Analysis</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#unique-values"><i class="fa fa-check"></i><b>3.6.1</b> Unique Values</a></li>
<li class="chapter" data-level="3.6.2" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#relationship-to-gdp-per-capita-and-the-human-capital-index"><i class="fa fa-check"></i><b>3.6.2</b> Relationship to GDP Per Capita and the Human Capital Index</a></li>
<li class="chapter" data-level="3.6.3" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#relationship-to-government-effectiveness"><i class="fa fa-check"></i><b>3.6.3</b> Relationship to Government Effectiveness</a></li>
<li class="chapter" data-level="3.6.4" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#country-changes-in-the-index"><i class="fa fa-check"></i><b>3.6.4</b> Country Changes in the Index</a></li>
<li class="chapter" data-level="3.6.5" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#density-plots"><i class="fa fa-check"></i><b>3.6.5</b> Density Plots</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#conclusion"><i class="fa fa-check"></i><b>3.7</b> Conclusion</a></li>
<li class="chapter" data-level="3.8" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#country-spi-overall-scores"><i class="fa fa-check"></i><b>3.8</b> Country SPI overall scores</a></li>
<li class="chapter" data-level="3.9" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#country-spi-overall-scores-over-time"><i class="fa fa-check"></i><b>3.9</b> Country SPI overall scores over time</a></li>
<li class="chapter" data-level="3.10" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#comparison-to-other-measures-of-statistical-performance"><i class="fa fa-check"></i><b>3.10</b> Comparison to other measures of statistical performance</a></li>
<li class="chapter" data-level="3.11" data-path="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html"><a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html#indicator-metadata"><i class="fa fa-check"></i><b>3.11</b> Indicator Metadata</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Technical Documentation on Data Sources and Methods for Statistical Performance Indicators</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="technical-documentation-of-spi-indicators" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Technical Documentation of SPI Indicators</h1>
<div id="data-use-1" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Data Use</h2>
<p>Cleaning for Data Use Indicators. Data Use (5 Indicators):<br />
- 1.1_DUNL - Indicator 1.1: Data use by national legislature<br />
- 1.2_DUNE - Indicator 1.2: Data use by national executive branch<br />
- 1.3_DUCS - Indicator 1.3: Data use by civil society<br />
- 1.4_DUAC - Indicator 1.4: Data use by academia<br />
- 1.5_DUIO - Indicator 1.5: Data use by international organizations</p>
<div id="indicator-1.1-data-use-by-national-legislature" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Indicator 1.1: Data use by national legislature</h3>
<p>Not included because of lack of established methodology. In principle it may be possible to utilize websites of national legislatures but this will require further work and assessment.</p>
</div>
<div id="indicator-1.2-data-use-by-national-executive-branch" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Indicator 1.2: Data use by national executive branch</h3>
<p>Not included because of lack of established methodology. There are some usable data sources with fairly good coverage (as used by PARIS21) but gaps in data have prevented fuller assessment of suitable methods.</p>
</div>
<div id="indicator-1.3-data-use-by-civil-society" class="section level3" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Indicator 1.3: Data use by civil society</h3>
<p>Not included because of lack of established methodology. There are some usable data sources with good coverage, for example from social media but more data is required to help assess and allow for likely biases between and within countries.</p>
</div>
<div id="indicator-1.4-data-use-by-academia" class="section level3" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> Indicator 1.4: Data use by academia</h3>
<p>Not included because of lack of established methodology. We have not been able to find usable data sources with global coverage on which a new methodology could be developed.</p>
<!-- The idea for this indicator is that countries should be producing statistical products that are utilized, in this case by academia.  As a measure of this, we use the IHSN database on censuses and surveys conducted by counties and calculate a ranking of countries based on the total number of downloads of the censuses and surveys produced by that country on a per capita basis.  In other words, we calculate the total number of downloads of censuses and surveys for a country, divided by the population of that country, to produce a ranking.  Countries with low scores on this metric, may either be producing censuses and surveys that are not in high demand or are not producing or adding a sufficient number of censuses and surveys to IHSN to register highly on this measure. -->
<!-- The source for this indicator is the IHSN. -->
<!-- > The mission of the IHSN is to improve the availability, accessibility, and quality of survey data within developing countries, and to encourage the analysis and use of this data by national and international development decision makers, the research community, and other stakeholders. -->
<!-- >To support this mission, the key objectives of the IHSN are: -->
<!-- >Improved coordination of internationally sponsored survey programs, with emphasis on timing, sequencing, frequency, and cost-effectiveness  -->
<!-- Availability of coordinated and practical technical and methodological guidelines for all stages of the survey life cycle  -->
<!-- Availability of a central survey data catalog which would inform data users of the availability of survey and census data from multiple sources  -->
<!-- Availability of standards, tools, and guidelines that would allow data producers to document, disseminate, and preserve microdata according to international standards and best practices  -->
<!-- Improved collaboration between data producers and users  -->
<!-- IHSN has a database of more than 7,483 surveys as of August 5, 2020. -->
</div>
<div id="indicator-1.5-data-use-by-international-organizations" class="section level3" number="2.1.5">
<h3><span class="header-section-number">2.1.5</span> Indicator 1.5: Data use by international organizations</h3>
<p>The following indicator will measure how useful data sources produced in national statistics systems are for international organizations. We gather five measures of how useful or reliable country produced measures are for international organizations. The first on comparability of poverty estimates for the World Bank reporting on international poverty. A second on statistics on child mortality for the UN Inter-agency Group for Child Mortality Estimation. A third on accuracy of debt reporting as classified by the World Bank. A fourth on whether data sources are available to the JMP for estimating safely managed drinking water. A fifth on whether a suitable data source is available to the ILO for producing estimates of labor force participation. Each of these will be described in greater detail below.</p>
<p>We recognize that these data sources provide only partial coverage but consider that they do at least provide some indication of the performance of the national statistical system. With more complete data sources it would be possible to assess this further.</p>
<div id="poverty-comparability" class="section level4" number="2.1.5.1">
<h4><span class="header-section-number">2.1.5.1</span> Poverty Comparability</h4>
<p>The first measure examines whether comparable poverty estimates are produced by countries over time. The World Bank’s Povcalnet has introduced a comparability indicator for whether the country produces comparable poverty estimates over time. <a href="https://blogs.worldbank.org/opendata/apples-apples-povcalnet-introduces-new-comparability-indicator" class="uri">https://blogs.worldbank.org/opendata/apples-apples-povcalnet-introduces-new-comparability-indicator</a>. This metadata has been compiled by the Country Poverty Economists in the World Bank’s Poverty and Equity Global Practice. From the Povcalnet team:</p>
<blockquote>
<blockquote>
<p>As countries frequently improve household surveys and measurement methodologies, strict comparability of poverty estimates over time is often limited. Strictly comparable poverty estimates within a country require a consistent production process, including the sampling frame, questionnaires, the methodological construction of the welfare aggregates and poverty lines, a consistent deflation of prices in time and space, among many other considerations. Thus, the assessment of comparability is country-dependent and relies on the knowledge of the Country Poverty Economist and Regional Poverty Teams of the Poverty Global Practice, as well as close dialogue with national data producers with intimate knowledge of the survey design and methodology. Within a country, we assume comparability of poverty estimates over time unless there is a known change to survey methodology, measurement or data structure. More details on the comparability metadata database can be found in Atamanov et al. (2019) (section 4). The database can be downloaded in csv.</p>
</blockquote>
</blockquote>
<p>The data will be pulled from the WDI and combined with metadata from the Povcalnet</p>
<p>Scoring is as follows:
Quality (1 points total):
1 Point. Comparable data lasting at least two years within past 5 years
0.5 Point. Comparable data lasting at least two years within past 10 years<br />
0 Points. No comparable data within past 10 years</p>
<p>Note: Because poverty surveys are reported with a lag, we start measuring whether comparable poverty data is available two years prior. So for 2019, the window starts from 2017 to give countries time to prepare poverty estimates based on surveys.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="technical-documentation-of-spi-indicators.html#cb2-1" aria-hidden="true"></a><span class="kw">library</span>(povcalnetR) </span>
<span id="cb2-2"><a href="technical-documentation-of-spi-indicators.html#cb2-2" aria-hidden="true"></a></span>
<span id="cb2-3"><a href="technical-documentation-of-spi-indicators.html#cb2-3" aria-hidden="true"></a><span class="co">#the code below is based on public released code by povcalnet team:</span></span>
<span id="cb2-4"><a href="technical-documentation-of-spi-indicators.html#cb2-4" aria-hidden="true"></a><span class="co">#https://github.com/worldbank/Global_Poverty_Blogs/blob/master/bg_povcalnet_comparability/R/comparability_breaks.R</span></span>
<span id="cb2-5"><a href="technical-documentation-of-spi-indicators.html#cb2-5" aria-hidden="true"></a></span>
<span id="cb2-6"><a href="technical-documentation-of-spi-indicators.html#cb2-6" aria-hidden="true"></a><span class="co"># some contants</span></span>
<span id="cb2-7"><a href="technical-documentation-of-spi-indicators.html#cb2-7" aria-hidden="true"></a>year_range &lt;-<span class="st"> </span><span class="dv">1990</span><span class="op">:</span><span class="dv">2020</span></span>
<span id="cb2-8"><a href="technical-documentation-of-spi-indicators.html#cb2-8" aria-hidden="true"></a>metadata_path &lt;-<span class="st"> &quot;https://development-data-hub-s3-public.s3.amazonaws.com/ddhfiles/506801/povcalnet_comparability.csv&quot;</span></span>
<span id="cb2-9"><a href="technical-documentation-of-spi-indicators.html#cb2-9" aria-hidden="true"></a></span>
<span id="cb2-10"><a href="technical-documentation-of-spi-indicators.html#cb2-10" aria-hidden="true"></a><span class="co"># Load data ---------------------------------------------------------------</span></span>
<span id="cb2-11"><a href="technical-documentation-of-spi-indicators.html#cb2-11" aria-hidden="true"></a></span>
<span id="cb2-12"><a href="technical-documentation-of-spi-indicators.html#cb2-12" aria-hidden="true"></a>metadata &lt;-<span class="st"> </span><span class="kw">read_csv</span>(metadata_path)</span>
<span id="cb2-13"><a href="technical-documentation-of-spi-indicators.html#cb2-13" aria-hidden="true"></a>cov_lkup &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb2-14"><a href="technical-documentation-of-spi-indicators.html#cb2-14" aria-hidden="true"></a><span class="kw">names</span>(cov_lkup) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;N&quot;</span>, <span class="st">&quot;U&quot;</span>, <span class="st">&quot;R&quot;</span>, <span class="st">&quot;A&quot;</span>)</span>
<span id="cb2-15"><a href="technical-documentation-of-spi-indicators.html#cb2-15" aria-hidden="true"></a></span>
<span id="cb2-16"><a href="technical-documentation-of-spi-indicators.html#cb2-16" aria-hidden="true"></a>dat_lkup &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)</span>
<span id="cb2-17"><a href="technical-documentation-of-spi-indicators.html#cb2-17" aria-hidden="true"></a><span class="kw">names</span>(dat_lkup) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;income&quot;</span>,<span class="st">&quot;consumption&quot;</span>)</span>
<span id="cb2-18"><a href="technical-documentation-of-spi-indicators.html#cb2-18" aria-hidden="true"></a></span>
<span id="cb2-19"><a href="technical-documentation-of-spi-indicators.html#cb2-19" aria-hidden="true"></a></span>
<span id="cb2-20"><a href="technical-documentation-of-spi-indicators.html#cb2-20" aria-hidden="true"></a>pcn &lt;-<span class="st"> </span><span class="kw">povcalnet</span>()</span>
<span id="cb2-21"><a href="technical-documentation-of-spi-indicators.html#cb2-21" aria-hidden="true"></a>pcn<span class="op">$</span>coveragetype &lt;-<span class="st"> </span>cov_lkup[pcn<span class="op">$</span>coveragetype]</span>
<span id="cb2-22"><a href="technical-documentation-of-spi-indicators.html#cb2-22" aria-hidden="true"></a>pcn<span class="op">$</span>datatype &lt;-<span class="st"> </span>dat_lkup[pcn<span class="op">$</span>datatype]</span>
<span id="cb2-23"><a href="technical-documentation-of-spi-indicators.html#cb2-23" aria-hidden="true"></a></span>
<span id="cb2-24"><a href="technical-documentation-of-spi-indicators.html#cb2-24" aria-hidden="true"></a>df &lt;-<span class="st"> </span>pcn <span class="op">%&gt;%</span></span>
<span id="cb2-25"><a href="technical-documentation-of-spi-indicators.html#cb2-25" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">countrycode=</span><span class="kw">as.character</span>(countrycode)) <span class="op">%&gt;%</span></span>
<span id="cb2-26"><a href="technical-documentation-of-spi-indicators.html#cb2-26" aria-hidden="true"></a><span class="st">  </span><span class="kw">inner_join</span>(metadata, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;countrycode&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;coveragetype&quot;</span>, <span class="st">&quot;datatype&quot;</span>))</span>
<span id="cb2-27"><a href="technical-documentation-of-spi-indicators.html#cb2-27" aria-hidden="true"></a></span>
<span id="cb2-28"><a href="technical-documentation-of-spi-indicators.html#cb2-28" aria-hidden="true"></a></span>
<span id="cb2-29"><a href="technical-documentation-of-spi-indicators.html#cb2-29" aria-hidden="true"></a><span class="co">#Now loop from 2016 and 2019, keeping just data inside last 5 years.</span></span>
<span id="cb2-30"><a href="technical-documentation-of-spi-indicators.html#cb2-30" aria-hidden="true"></a><span class="cf">for</span> (reference_year <span class="cf">in</span> <span class="dv">2004</span><span class="op">:</span><span class="dv">2019</span>) {</span>
<span id="cb2-31"><a href="technical-documentation-of-spi-indicators.html#cb2-31" aria-hidden="true"></a>  </span>
<span id="cb2-32"><a href="technical-documentation-of-spi-indicators.html#cb2-32" aria-hidden="true"></a>    <span class="co">#extend the window for more recent years.  For instance, 2019 surveys are reported with a lag, so give them two year grace period</span></span>
<span id="cb2-33"><a href="technical-documentation-of-spi-indicators.html#cb2-33" aria-hidden="true"></a>  <span class="cf">if</span> (reference_year<span class="op">==</span><span class="dv">2019</span>) {</span>
<span id="cb2-34"><a href="technical-documentation-of-spi-indicators.html#cb2-34" aria-hidden="true"></a>    rec_window=<span class="dv">7</span></span>
<span id="cb2-35"><a href="technical-documentation-of-spi-indicators.html#cb2-35" aria-hidden="true"></a>  } <span class="cf">else</span> <span class="cf">if</span> (reference_year<span class="op">==</span><span class="dv">2018</span>) {</span>
<span id="cb2-36"><a href="technical-documentation-of-spi-indicators.html#cb2-36" aria-hidden="true"></a>    rec_window=<span class="dv">6</span></span>
<span id="cb2-37"><a href="technical-documentation-of-spi-indicators.html#cb2-37" aria-hidden="true"></a>  } <span class="cf">else</span> {</span>
<span id="cb2-38"><a href="technical-documentation-of-spi-indicators.html#cb2-38" aria-hidden="true"></a>    rec_window=<span class="dv">5</span></span>
<span id="cb2-39"><a href="technical-documentation-of-spi-indicators.html#cb2-39" aria-hidden="true"></a>  }</span>
<span id="cb2-40"><a href="technical-documentation-of-spi-indicators.html#cb2-40" aria-hidden="true"></a> </span>
<span id="cb2-41"><a href="technical-documentation-of-spi-indicators.html#cb2-41" aria-hidden="true"></a>  </span>
<span id="cb2-42"><a href="technical-documentation-of-spi-indicators.html#cb2-42" aria-hidden="true"></a>  temp_<span class="dv">5</span>&lt;-df <span class="op">%&gt;%</span></span>
<span id="cb2-43"><a href="technical-documentation-of-spi-indicators.html#cb2-43" aria-hidden="true"></a><span class="st">        </span><span class="kw">filter</span>(coveragetype <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#keep just nationally representative samples</span></span>
<span id="cb2-44"><a href="technical-documentation-of-spi-indicators.html#cb2-44" aria-hidden="true"></a></span>
<span id="cb2-45"><a href="technical-documentation-of-spi-indicators.html#cb2-45" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">frequency=</span>((reference_year<span class="op">-</span><span class="kw">as.numeric</span>(year))<span class="op">&lt;=</span>rec_window) <span class="op">&amp;</span><span class="st"> </span>(reference_year<span class="op">&gt;=</span><span class="kw">as.numeric</span>(year))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-46"><a href="technical-documentation-of-spi-indicators.html#cb2-46" aria-hidden="true"></a><span class="st">        </span><span class="kw">filter</span>(frequency<span class="op">==</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb2-47"><a href="technical-documentation-of-spi-indicators.html#cb2-47" aria-hidden="true"></a><span class="st">        </span><span class="kw">group_by</span>(countrycode, comparability) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#for each country and comparability type, get number of comparable estimates</span></span>
<span id="cb2-48"><a href="technical-documentation-of-spi-indicators.html#cb2-48" aria-hidden="true"></a><span class="st">        </span><span class="kw">summarise</span>(<span class="dt">SPI.D1.5.POV_5=</span><span class="kw">n</span>())  <span class="op">%&gt;%</span></span>
<span id="cb2-49"><a href="technical-documentation-of-spi-indicators.html#cb2-49" aria-hidden="true"></a><span class="st">        </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb2-50"><a href="technical-documentation-of-spi-indicators.html#cb2-50" aria-hidden="true"></a><span class="st">        </span><span class="kw">group_by</span>(countrycode) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#now get a total by country with the max number of comparable estimates</span></span>
<span id="cb2-51"><a href="technical-documentation-of-spi-indicators.html#cb2-51" aria-hidden="true"></a><span class="st">        </span><span class="kw">summarise</span>(<span class="dt">SPI.D1.5.POV_5=</span><span class="kw">max</span>(SPI.D1.<span class="fl">5.</span>POV_<span class="dv">5</span>, <span class="dt">na.rm=</span>T)) <span class="op">%&gt;%</span></span>
<span id="cb2-52"><a href="technical-documentation-of-spi-indicators.html#cb2-52" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">SPI.D1.5.POV_5=</span><span class="kw">if_else</span>(SPI.D1.<span class="fl">5.</span>POV_<span class="dv">5</span><span class="op">&gt;=</span><span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#only give point if there is at least two observations that are comparable</span></span>
<span id="cb2-53"><a href="technical-documentation-of-spi-indicators.html#cb2-53" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">date=</span>reference_year,</span>
<span id="cb2-54"><a href="technical-documentation-of-spi-indicators.html#cb2-54" aria-hidden="true"></a>                 <span class="dt">iso3c=</span>countrycode) <span class="op">%&gt;%</span></span>
<span id="cb2-55"><a href="technical-documentation-of-spi-indicators.html#cb2-55" aria-hidden="true"></a><span class="st">        </span><span class="kw">left_join</span>(country_metadata) <span class="op">%&gt;%</span></span>
<span id="cb2-56"><a href="technical-documentation-of-spi-indicators.html#cb2-56" aria-hidden="true"></a><span class="st">        </span><span class="kw">select</span>( country,iso3c, date, <span class="kw">starts_with</span>(<span class="st">&#39;SPI.D1.5.POV&#39;</span>)) </span>
<span id="cb2-57"><a href="technical-documentation-of-spi-indicators.html#cb2-57" aria-hidden="true"></a></span>
<span id="cb2-58"><a href="technical-documentation-of-spi-indicators.html#cb2-58" aria-hidden="true"></a>  temp_<span class="dv">10</span>&lt;-df <span class="op">%&gt;%</span></span>
<span id="cb2-59"><a href="technical-documentation-of-spi-indicators.html#cb2-59" aria-hidden="true"></a><span class="st">        </span><span class="kw">filter</span>(coveragetype <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#keep just nationally representative samples</span></span>
<span id="cb2-60"><a href="technical-documentation-of-spi-indicators.html#cb2-60" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">frequency=</span>((reference_year<span class="op">-</span><span class="kw">as.numeric</span>(year))<span class="op">&lt;=</span><span class="dv">12</span>) <span class="op">&amp;</span><span class="st"> </span>(reference_year<span class="op">&gt;=</span><span class="kw">as.numeric</span>(year))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-61"><a href="technical-documentation-of-spi-indicators.html#cb2-61" aria-hidden="true"></a><span class="st">        </span><span class="kw">filter</span>(frequency<span class="op">==</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb2-62"><a href="technical-documentation-of-spi-indicators.html#cb2-62" aria-hidden="true"></a><span class="st">        </span><span class="kw">group_by</span>(countrycode, comparability) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#for each country and comparability type, get number of comparable estimates</span></span>
<span id="cb2-63"><a href="technical-documentation-of-spi-indicators.html#cb2-63" aria-hidden="true"></a><span class="st">        </span><span class="kw">summarise</span>(<span class="dt">SPI.D1.5.POV_10=</span><span class="kw">n</span>())  <span class="op">%&gt;%</span></span>
<span id="cb2-64"><a href="technical-documentation-of-spi-indicators.html#cb2-64" aria-hidden="true"></a><span class="st">        </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb2-65"><a href="technical-documentation-of-spi-indicators.html#cb2-65" aria-hidden="true"></a><span class="st">        </span><span class="kw">group_by</span>(countrycode) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#now get a total by country with the max number of comparable estimates</span></span>
<span id="cb2-66"><a href="technical-documentation-of-spi-indicators.html#cb2-66" aria-hidden="true"></a><span class="st">        </span><span class="kw">summarise</span>(<span class="dt">SPI.D1.5.POV_10=</span><span class="kw">max</span>(SPI.D1.<span class="fl">5.</span>POV_<span class="dv">10</span>, <span class="dt">na.rm=</span>T)) <span class="op">%&gt;%</span></span>
<span id="cb2-67"><a href="technical-documentation-of-spi-indicators.html#cb2-67" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">SPI.D1.5.POV_10=</span><span class="kw">if_else</span>(SPI.D1.<span class="fl">5.</span>POV_<span class="dv">10</span><span class="op">&gt;=</span><span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#only give point if there is at least two observations that are comparable</span></span>
<span id="cb2-68"><a href="technical-documentation-of-spi-indicators.html#cb2-68" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">date=</span>reference_year,</span>
<span id="cb2-69"><a href="technical-documentation-of-spi-indicators.html#cb2-69" aria-hidden="true"></a>                 <span class="dt">iso3c=</span>countrycode) <span class="op">%&gt;%</span></span>
<span id="cb2-70"><a href="technical-documentation-of-spi-indicators.html#cb2-70" aria-hidden="true"></a><span class="st">        </span><span class="kw">left_join</span>(country_metadata) <span class="op">%&gt;%</span></span>
<span id="cb2-71"><a href="technical-documentation-of-spi-indicators.html#cb2-71" aria-hidden="true"></a><span class="st">        </span><span class="kw">select</span>( country,iso3c, date, <span class="kw">starts_with</span>(<span class="st">&#39;SPI.D1.5.POV&#39;</span>)) </span>
<span id="cb2-72"><a href="technical-documentation-of-spi-indicators.html#cb2-72" aria-hidden="true"></a></span>
<span id="cb2-73"><a href="technical-documentation-of-spi-indicators.html#cb2-73" aria-hidden="true"></a>  temp &lt;-<span class="st"> </span>temp_<span class="dv">5</span> <span class="op">%&gt;%</span></span>
<span id="cb2-74"><a href="technical-documentation-of-spi-indicators.html#cb2-74" aria-hidden="true"></a><span class="st">    </span><span class="kw">left_join</span>(temp_<span class="dv">10</span>) <span class="op">%&gt;%</span></span>
<span id="cb2-75"><a href="technical-documentation-of-spi-indicators.html#cb2-75" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">SPI.D1.5.POV=</span><span class="kw">case_when</span>(</span>
<span id="cb2-76"><a href="technical-documentation-of-spi-indicators.html#cb2-76" aria-hidden="true"></a>      SPI.D1.<span class="fl">5.</span>POV_<span class="dv">5</span><span class="op">==</span><span class="dv">1</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb2-77"><a href="technical-documentation-of-spi-indicators.html#cb2-77" aria-hidden="true"></a>      SPI.D1.<span class="fl">5.</span>POV_<span class="dv">10</span><span class="op">==</span><span class="dv">1</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>,</span>
<span id="cb2-78"><a href="technical-documentation-of-spi-indicators.html#cb2-78" aria-hidden="true"></a>      <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span></span>
<span id="cb2-79"><a href="technical-documentation-of-spi-indicators.html#cb2-79" aria-hidden="true"></a>    )) <span class="op">%&gt;%</span></span>
<span id="cb2-80"><a href="technical-documentation-of-spi-indicators.html#cb2-80" aria-hidden="true"></a><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span>SPI.D1.<span class="fl">5.</span>POV_<span class="dv">5</span>,<span class="op">-</span>SPI.D1.<span class="fl">5.</span>POV_<span class="dv">10</span>)</span>
<span id="cb2-81"><a href="technical-documentation-of-spi-indicators.html#cb2-81" aria-hidden="true"></a>  </span>
<span id="cb2-82"><a href="technical-documentation-of-spi-indicators.html#cb2-82" aria-hidden="true"></a>  <span class="kw">assign</span>(<span class="kw">paste</span>(<span class="st">&quot;D3.1.AKI&quot;</span>,reference_year,<span class="dt">sep=</span><span class="st">&quot;_&quot;</span>), temp)</span>
<span id="cb2-83"><a href="technical-documentation-of-spi-indicators.html#cb2-83" aria-hidden="true"></a>}</span>
<span id="cb2-84"><a href="technical-documentation-of-spi-indicators.html#cb2-84" aria-hidden="true"></a></span>
<span id="cb2-85"><a href="technical-documentation-of-spi-indicators.html#cb2-85" aria-hidden="true"></a><span class="co">#now append together and save</span></span>
<span id="cb2-86"><a href="technical-documentation-of-spi-indicators.html#cb2-86" aria-hidden="true"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">c</span>(<span class="dv">2004</span><span class="op">:</span><span class="dv">2019</span>)) {</span>
<span id="cb2-87"><a href="technical-documentation-of-spi-indicators.html#cb2-87" aria-hidden="true"></a>  </span>
<span id="cb2-88"><a href="technical-documentation-of-spi-indicators.html#cb2-88" aria-hidden="true"></a>  temp&lt;-<span class="kw">get</span>(<span class="kw">paste</span>(<span class="st">&#39;D3.1.AKI_&#39;</span>,i, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>))</span>
<span id="cb2-89"><a href="technical-documentation-of-spi-indicators.html#cb2-89" aria-hidden="true"></a>  </span>
<span id="cb2-90"><a href="technical-documentation-of-spi-indicators.html#cb2-90" aria-hidden="true"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="kw">exists</span>(<span class="st">&#39;D3.1.AKI&#39;</span>)) {</span>
<span id="cb2-91"><a href="technical-documentation-of-spi-indicators.html#cb2-91" aria-hidden="true"></a>    D3.<span class="fl">1.</span>AKI&lt;-temp</span>
<span id="cb2-92"><a href="technical-documentation-of-spi-indicators.html#cb2-92" aria-hidden="true"></a>  } <span class="cf">else</span> {</span>
<span id="cb2-93"><a href="technical-documentation-of-spi-indicators.html#cb2-93" aria-hidden="true"></a>    D3.<span class="fl">1.</span>AKI&lt;-D3.<span class="fl">1.</span>AKI <span class="op">%&gt;%</span></span>
<span id="cb2-94"><a href="technical-documentation-of-spi-indicators.html#cb2-94" aria-hidden="true"></a><span class="st">      </span><span class="kw">bind_rows</span>(temp) <span class="op">%&gt;%</span></span>
<span id="cb2-95"><a href="technical-documentation-of-spi-indicators.html#cb2-95" aria-hidden="true"></a><span class="st">      </span><span class="kw">arrange</span>(<span class="op">-</span>date, iso3c)</span>
<span id="cb2-96"><a href="technical-documentation-of-spi-indicators.html#cb2-96" aria-hidden="true"></a>  }</span>
<span id="cb2-97"><a href="technical-documentation-of-spi-indicators.html#cb2-97" aria-hidden="true"></a>}</span></code></pre></div>
</div>
<div id="mortality-rate-under-5-per-1000-live-births" class="section level4" number="2.1.5.2">
<h4><span class="header-section-number">2.1.5.2</span> Mortality rate, under-5 (per 1,000 live births)</h4>
<p>UN IGME makes all available source data on child mortality rates available with metadata on quality.</p>
<p><a href="https://childmortality.org/data/" class="uri">https://childmortality.org/data/</a></p>
<p>Source data can bedivided into data included in the estimation model and data excluded from the estimation model (note: data may be excluded for any one of several reasons including data quality or by rule—for example, indirect estimates from summary birth histories are not included when direct estimates from the full birth history from the same survey or census are available).</p>
<p>Countries are assessed for whether they can produce indicators over a five or ten year period that meet the thresholds set by UN IGME.</p>
<p>Quality (1 points total):
1 Point. Two indicators that met UN IGME standards within past 5 years<br />
0.5 Point. Two indicators that met UN IGME standards within past 10 years<br />
0 Points. No data that met UN IGME standards within past 10 years</p>
<p>Data was pulled on April 13, 2020.</p>
<p>Note: Because surveys are reported with a lag, we start measuring whether comparable poverty data is available two years prior. So for 2019, the window starts from 2017 to give countries time to prepare poverty estimates based on surveys.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="technical-documentation-of-spi-indicators.html#cb3-1" aria-hidden="true"></a><span class="co">#Read in data from UN Inter-agency Group for Child Mortality Estimation</span></span>
<span id="cb3-2"><a href="technical-documentation-of-spi-indicators.html#cb3-2" aria-hidden="true"></a></span>
<span id="cb3-3"><a href="technical-documentation-of-spi-indicators.html#cb3-3" aria-hidden="true"></a></span>
<span id="cb3-4"><a href="technical-documentation-of-spi-indicators.html#cb3-4" aria-hidden="true"></a></span>
<span id="cb3-5"><a href="technical-documentation-of-spi-indicators.html#cb3-5" aria-hidden="true"></a>D3.<span class="fl">3.</span>AKI.MORT &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file=</span><span class="kw">paste</span>(raw_dir, <span class="st">&#39;1.5_DUIO/UN IGME Child Mortality and Stillbirth Estimates.csv&#39;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb3-6"><a href="technical-documentation-of-spi-indicators.html#cb3-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">as_tibble</span>(<span class="dt">.name_repair =</span> <span class="st">&#39;universal&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb3-7"><a href="technical-documentation-of-spi-indicators.html#cb3-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(Indicator<span class="op">==</span><span class="st">&#39;Under-five mortality rate&#39;</span> <span class="op">&amp;</span><span class="st"> </span>Sex<span class="op">==</span><span class="st">&#39;Total&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#keep just observations for under 5 child mortality and for both sexes</span></span>
<span id="cb3-8"><a href="technical-documentation-of-spi-indicators.html#cb3-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(Observation.Status<span class="op">==</span><span class="st">&#39;Included in IGME&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Also keep only surveys that met IGME criteria for inclusion as a nationally representative statistic</span></span>
<span id="cb3-9"><a href="technical-documentation-of-spi-indicators.html#cb3-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date=</span><span class="kw">as.numeric</span>(<span class="kw">str_extract</span>(Series.Year, <span class="st">&quot;^.{4}&quot;</span>)),</span>
<span id="cb3-10"><a href="technical-documentation-of-spi-indicators.html#cb3-10" aria-hidden="true"></a>         <span class="dt">ind_date=</span><span class="kw">as.numeric</span>(<span class="kw">str_extract</span>(TIME_PERIOD, <span class="st">&quot;^.{4}&quot;</span>)),</span>
<span id="cb3-11"><a href="technical-documentation-of-spi-indicators.html#cb3-11" aria-hidden="true"></a>         <span class="dt">country=</span>Geographic.area,</span>
<span id="cb3-12"><a href="technical-documentation-of-spi-indicators.html#cb3-12" aria-hidden="true"></a>         <span class="dt">D3.CHLD.MORT=</span>OBS_VALUE)</span>
<span id="cb3-13"><a href="technical-documentation-of-spi-indicators.html#cb3-13" aria-hidden="true"></a></span>
<span id="cb3-14"><a href="technical-documentation-of-spi-indicators.html#cb3-14" aria-hidden="true"></a><span class="co">#Now loop from 2016 and 2019, keeping just data inside last 5 years.</span></span>
<span id="cb3-15"><a href="technical-documentation-of-spi-indicators.html#cb3-15" aria-hidden="true"></a><span class="cf">for</span> (reference_year <span class="cf">in</span> <span class="dv">2004</span><span class="op">:</span><span class="dv">2019</span>) {</span>
<span id="cb3-16"><a href="technical-documentation-of-spi-indicators.html#cb3-16" aria-hidden="true"></a>  </span>
<span id="cb3-17"><a href="technical-documentation-of-spi-indicators.html#cb3-17" aria-hidden="true"></a>  </span>
<span id="cb3-18"><a href="technical-documentation-of-spi-indicators.html#cb3-18" aria-hidden="true"></a>      <span class="co">#extend the window for more recent years.  For instance, 2019 surveys are reported with a lag, so give them two year grace period</span></span>
<span id="cb3-19"><a href="technical-documentation-of-spi-indicators.html#cb3-19" aria-hidden="true"></a>  <span class="cf">if</span> (reference_year<span class="op">==</span><span class="dv">2019</span>) {</span>
<span id="cb3-20"><a href="technical-documentation-of-spi-indicators.html#cb3-20" aria-hidden="true"></a>    rec_window=<span class="dv">7</span></span>
<span id="cb3-21"><a href="technical-documentation-of-spi-indicators.html#cb3-21" aria-hidden="true"></a>  } <span class="cf">else</span> <span class="cf">if</span> (reference_year<span class="op">==</span><span class="dv">2018</span>) {</span>
<span id="cb3-22"><a href="technical-documentation-of-spi-indicators.html#cb3-22" aria-hidden="true"></a>    rec_window=<span class="dv">6</span></span>
<span id="cb3-23"><a href="technical-documentation-of-spi-indicators.html#cb3-23" aria-hidden="true"></a>  } <span class="cf">else</span> {</span>
<span id="cb3-24"><a href="technical-documentation-of-spi-indicators.html#cb3-24" aria-hidden="true"></a>    rec_window=<span class="dv">5</span></span>
<span id="cb3-25"><a href="technical-documentation-of-spi-indicators.html#cb3-25" aria-hidden="true"></a>  }</span>
<span id="cb3-26"><a href="technical-documentation-of-spi-indicators.html#cb3-26" aria-hidden="true"></a> </span>
<span id="cb3-27"><a href="technical-documentation-of-spi-indicators.html#cb3-27" aria-hidden="true"></a>  </span>
<span id="cb3-28"><a href="technical-documentation-of-spi-indicators.html#cb3-28" aria-hidden="true"></a>  temp_<span class="dv">5</span> &lt;-D3.<span class="fl">3.</span>AKI.MORT <span class="op">%&gt;%</span></span>
<span id="cb3-29"><a href="technical-documentation-of-spi-indicators.html#cb3-29" aria-hidden="true"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">frequency=</span>(((reference_year<span class="op">-</span><span class="kw">as.numeric</span>(date))<span class="op">&lt;=</span>rec_window <span class="op">&amp;</span><span class="st"> </span>(reference_year<span class="op">&gt;=</span><span class="kw">as.numeric</span>(date))) <span class="op">|</span><span class="st"> </span>((reference_year<span class="op">-</span><span class="kw">as.numeric</span>(ind_date))<span class="op">&lt;=</span>rec_window <span class="op">&amp;</span><span class="st"> </span>(reference_year<span class="op">&gt;=</span><span class="kw">as.numeric</span>(ind_date))))) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#whether to use the survey year or indicator report year depends on data source.  for vital statistics sources need to use indicator reporting year, but for surveys use survey year</span></span>
<span id="cb3-30"><a href="technical-documentation-of-spi-indicators.html#cb3-30" aria-hidden="true"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">SPI.FREQ.D1.5.CHLD.MORT=</span><span class="kw">if_else</span>(frequency<span class="op">==</span><span class="ot">TRUE</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#create 0,1 variable for whether data point exists for country</span></span>
<span id="cb3-31"><a href="technical-documentation-of-spi-indicators.html#cb3-31" aria-hidden="true"></a><span class="st">          </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span></span>
<span id="cb3-32"><a href="technical-documentation-of-spi-indicators.html#cb3-32" aria-hidden="true"></a><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">SPI.FREQ.D1.5.CHLD.MORT=</span><span class="kw">sum</span>(SPI.FREQ.D1.<span class="fl">5.</span>CHLD.MORT, <span class="dt">na.rm=</span>T)) <span class="op">%&gt;%</span></span>
<span id="cb3-33"><a href="technical-documentation-of-spi-indicators.html#cb3-33" aria-hidden="true"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">SPI.FREQ.D1.5.CHLD.MORT=</span><span class="kw">case_when</span>(</span>
<span id="cb3-34"><a href="technical-documentation-of-spi-indicators.html#cb3-34" aria-hidden="true"></a>            SPI.FREQ.D1.<span class="fl">5.</span>CHLD.MORT<span class="op">&gt;=</span><span class="dv">2</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb3-35"><a href="technical-documentation-of-spi-indicators.html#cb3-35" aria-hidden="true"></a>            <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span></span>
<span id="cb3-36"><a href="technical-documentation-of-spi-indicators.html#cb3-36" aria-hidden="true"></a>          )) <span class="op">%&gt;%</span></span>
<span id="cb3-37"><a href="technical-documentation-of-spi-indicators.html#cb3-37" aria-hidden="true"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">SPI.D1.5.CHLD.MORT_5=</span>SPI.FREQ.D1.<span class="fl">5.</span>CHLD.MORT) <span class="op">%&gt;%</span></span>
<span id="cb3-38"><a href="technical-documentation-of-spi-indicators.html#cb3-38" aria-hidden="true"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">date=</span>reference_year) <span class="op">%&gt;%</span></span>
<span id="cb3-39"><a href="technical-documentation-of-spi-indicators.html#cb3-39" aria-hidden="true"></a><span class="st">          </span><span class="kw">select</span>( country, date, <span class="kw">starts_with</span>(<span class="st">&#39;SPI.&#39;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb3-40"><a href="technical-documentation-of-spi-indicators.html#cb3-40" aria-hidden="true"></a><span class="st">          </span><span class="kw">select</span>(<span class="op">-</span>SPI.FREQ.D1.<span class="fl">5.</span>CHLD.MORT)</span>
<span id="cb3-41"><a href="technical-documentation-of-spi-indicators.html#cb3-41" aria-hidden="true"></a></span>
<span id="cb3-42"><a href="technical-documentation-of-spi-indicators.html#cb3-42" aria-hidden="true"></a>  temp_<span class="dv">10</span> &lt;-D3.<span class="fl">3.</span>AKI.MORT <span class="op">%&gt;%</span></span>
<span id="cb3-43"><a href="technical-documentation-of-spi-indicators.html#cb3-43" aria-hidden="true"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">frequency=</span>((reference_year<span class="op">-</span><span class="kw">as.numeric</span>(date))<span class="op">&lt;=</span>rec_window) <span class="op">&amp;</span><span class="st"> </span>(reference_year<span class="op">&gt;=</span><span class="kw">as.numeric</span>(date))) <span class="op">%&gt;%</span></span>
<span id="cb3-44"><a href="technical-documentation-of-spi-indicators.html#cb3-44" aria-hidden="true"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">SPI.FREQ.D1.5.CHLD.MORT=</span><span class="kw">if_else</span>(frequency<span class="op">==</span><span class="ot">TRUE</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#create 0,1 variable for whether data point exists for country</span></span>
<span id="cb3-45"><a href="technical-documentation-of-spi-indicators.html#cb3-45" aria-hidden="true"></a><span class="st">          </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span></span>
<span id="cb3-46"><a href="technical-documentation-of-spi-indicators.html#cb3-46" aria-hidden="true"></a><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">SPI.FREQ.D1.5.CHLD.MORT=</span><span class="kw">sum</span>(SPI.FREQ.D1.<span class="fl">5.</span>CHLD.MORT, <span class="dt">na.rm=</span>T)) <span class="op">%&gt;%</span></span>
<span id="cb3-47"><a href="technical-documentation-of-spi-indicators.html#cb3-47" aria-hidden="true"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">SPI.FREQ.D1.5.CHLD.MORT=</span><span class="kw">case_when</span>(</span>
<span id="cb3-48"><a href="technical-documentation-of-spi-indicators.html#cb3-48" aria-hidden="true"></a>            SPI.FREQ.D1.<span class="fl">5.</span>CHLD.MORT<span class="op">&gt;=</span><span class="dv">2</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb3-49"><a href="technical-documentation-of-spi-indicators.html#cb3-49" aria-hidden="true"></a>            <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span></span>
<span id="cb3-50"><a href="technical-documentation-of-spi-indicators.html#cb3-50" aria-hidden="true"></a>          )) <span class="op">%&gt;%</span></span>
<span id="cb3-51"><a href="technical-documentation-of-spi-indicators.html#cb3-51" aria-hidden="true"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">SPI.D1.5.CHLD.MORT_10=</span>SPI.FREQ.D1.<span class="fl">5.</span>CHLD.MORT) <span class="op">%&gt;%</span></span>
<span id="cb3-52"><a href="technical-documentation-of-spi-indicators.html#cb3-52" aria-hidden="true"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">date=</span>reference_year) <span class="op">%&gt;%</span></span>
<span id="cb3-53"><a href="technical-documentation-of-spi-indicators.html#cb3-53" aria-hidden="true"></a><span class="st">          </span><span class="kw">select</span>( country, date, <span class="kw">starts_with</span>(<span class="st">&#39;SPI.&#39;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb3-54"><a href="technical-documentation-of-spi-indicators.html#cb3-54" aria-hidden="true"></a><span class="st">          </span><span class="kw">select</span>(<span class="op">-</span>SPI.FREQ.D1.<span class="fl">5.</span>CHLD.MORT)</span>
<span id="cb3-55"><a href="technical-documentation-of-spi-indicators.html#cb3-55" aria-hidden="true"></a>  </span>
<span id="cb3-56"><a href="technical-documentation-of-spi-indicators.html#cb3-56" aria-hidden="true"></a>  temp &lt;-<span class="st"> </span>temp_<span class="dv">5</span> <span class="op">%&gt;%</span></span>
<span id="cb3-57"><a href="technical-documentation-of-spi-indicators.html#cb3-57" aria-hidden="true"></a><span class="st">    </span><span class="kw">left_join</span>(temp_<span class="dv">10</span>) <span class="op">%&gt;%</span></span>
<span id="cb3-58"><a href="technical-documentation-of-spi-indicators.html#cb3-58" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">SPI.D1.5.CHLD.MORT=</span><span class="kw">case_when</span>(</span>
<span id="cb3-59"><a href="technical-documentation-of-spi-indicators.html#cb3-59" aria-hidden="true"></a>      SPI.D1.<span class="fl">5.</span>CHLD.MORT_<span class="dv">5</span><span class="op">==</span><span class="dv">1</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb3-60"><a href="technical-documentation-of-spi-indicators.html#cb3-60" aria-hidden="true"></a>      SPI.D1.<span class="fl">5.</span>CHLD.MORT_<span class="dv">10</span><span class="op">==</span><span class="dv">1</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>,</span>
<span id="cb3-61"><a href="technical-documentation-of-spi-indicators.html#cb3-61" aria-hidden="true"></a>      <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span></span>
<span id="cb3-62"><a href="technical-documentation-of-spi-indicators.html#cb3-62" aria-hidden="true"></a>    )) <span class="op">%&gt;%</span></span>
<span id="cb3-63"><a href="technical-documentation-of-spi-indicators.html#cb3-63" aria-hidden="true"></a><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span>SPI.D1.<span class="fl">5.</span>CHLD.MORT_<span class="dv">5</span>,<span class="op">-</span>SPI.D1.<span class="fl">5.</span>CHLD.MORT_<span class="dv">10</span>)</span>
<span id="cb3-64"><a href="technical-documentation-of-spi-indicators.html#cb3-64" aria-hidden="true"></a>  </span>
<span id="cb3-65"><a href="technical-documentation-of-spi-indicators.html#cb3-65" aria-hidden="true"></a>  <span class="kw">assign</span>(<span class="kw">paste</span>(<span class="st">&quot;D3.3.AKI&quot;</span>,reference_year,<span class="dt">sep=</span><span class="st">&quot;_&quot;</span>), temp)</span>
<span id="cb3-66"><a href="technical-documentation-of-spi-indicators.html#cb3-66" aria-hidden="true"></a>}</span>
<span id="cb3-67"><a href="technical-documentation-of-spi-indicators.html#cb3-67" aria-hidden="true"></a></span>
<span id="cb3-68"><a href="technical-documentation-of-spi-indicators.html#cb3-68" aria-hidden="true"></a><span class="co">#now append together and save</span></span>
<span id="cb3-69"><a href="technical-documentation-of-spi-indicators.html#cb3-69" aria-hidden="true"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">c</span>(<span class="dv">2004</span><span class="op">:</span><span class="dv">2019</span>)) {</span>
<span id="cb3-70"><a href="technical-documentation-of-spi-indicators.html#cb3-70" aria-hidden="true"></a>  </span>
<span id="cb3-71"><a href="technical-documentation-of-spi-indicators.html#cb3-71" aria-hidden="true"></a>  temp&lt;-<span class="kw">get</span>(<span class="kw">paste</span>(<span class="st">&#39;D3.3.AKI_&#39;</span>,i, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>))</span>
<span id="cb3-72"><a href="technical-documentation-of-spi-indicators.html#cb3-72" aria-hidden="true"></a>  </span>
<span id="cb3-73"><a href="technical-documentation-of-spi-indicators.html#cb3-73" aria-hidden="true"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="kw">exists</span>(<span class="st">&#39;D3.3.AKI&#39;</span>)) {</span>
<span id="cb3-74"><a href="technical-documentation-of-spi-indicators.html#cb3-74" aria-hidden="true"></a>    D3.<span class="fl">3.</span>AKI&lt;-temp</span>
<span id="cb3-75"><a href="technical-documentation-of-spi-indicators.html#cb3-75" aria-hidden="true"></a>  } <span class="cf">else</span> {</span>
<span id="cb3-76"><a href="technical-documentation-of-spi-indicators.html#cb3-76" aria-hidden="true"></a>    D3.<span class="fl">3.</span>AKI&lt;-D3.<span class="fl">3.</span>AKI <span class="op">%&gt;%</span></span>
<span id="cb3-77"><a href="technical-documentation-of-spi-indicators.html#cb3-77" aria-hidden="true"></a><span class="st">      </span><span class="kw">bind_rows</span>(temp) <span class="op">%&gt;%</span></span>
<span id="cb3-78"><a href="technical-documentation-of-spi-indicators.html#cb3-78" aria-hidden="true"></a><span class="st">      </span><span class="kw">arrange</span>(<span class="op">-</span>date, country)</span>
<span id="cb3-79"><a href="technical-documentation-of-spi-indicators.html#cb3-79" aria-hidden="true"></a>  }</span>
<span id="cb3-80"><a href="technical-documentation-of-spi-indicators.html#cb3-80" aria-hidden="true"></a>}</span></code></pre></div>
</div>
<div id="debt-service-ppg-and-imf-only-of-exports-of-goods-services-and-primary-income" class="section level4" number="2.1.5.3">
<h4><span class="header-section-number">2.1.5.3</span> Debt service (PPG and IMF only, % of exports of goods, services and primary income)</h4>
<p>For this indicator, Debt service (PPG and IMF only, % of exports of goods, services and primary income), we will pull data from the WDI but modify the scoring using the WDI metadata on whether the external debt data is actual, estimated, or preliminary. The status “as reported (actual)” indicates that the country was fully current in its reporting under the DRS and that World Bank staff are satisfied that the reported data give an adequate and fair representation of the country’s total public debt. “Preliminary” data are based on reported or collected information, but because of incompleteness or other reasons, an element of staff estimation is included. “Estimated” data indicate that countries are not current in their reporting and that a significant element of staff estimation has been necessary for producing the data tables.</p>
<p>Scoring is as follows:</p>
<p>Quality:</p>
<p>1 Points. Actual value
0.67 Points. Preliminary value
0.33 Points. Estimated value
0 Points. No value</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="technical-documentation-of-spi-indicators.html#cb4-1" aria-hidden="true"></a><span class="co">#reshape metaadata file</span></span>
<span id="cb4-2"><a href="technical-documentation-of-spi-indicators.html#cb4-2" aria-hidden="true"></a>D3.<span class="fl">15.</span>AKI &lt;-<span class="st"> </span>WDI_metadata <span class="op">%&gt;%</span></span>
<span id="cb4-3"><a href="technical-documentation-of-spi-indicators.html#cb4-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">transmute</span>(<span class="dt">iso3c=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(Country.Code), Code, Country.Code),</span>
<span id="cb4-4"><a href="technical-documentation-of-spi-indicators.html#cb4-4" aria-hidden="true"></a>            <span class="dt">date=</span>date,</span>
<span id="cb4-5"><a href="technical-documentation-of-spi-indicators.html#cb4-5" aria-hidden="true"></a>            <span class="dt">External_debt_Reporting=</span>External.debt.Reporting.status,</span>
<span id="cb4-6"><a href="technical-documentation-of-spi-indicators.html#cb4-6" aria-hidden="true"></a>            <span class="dt">Income.Group=</span>Income.Group) <span class="op">%&gt;%</span></span>
<span id="cb4-7"><a href="technical-documentation-of-spi-indicators.html#cb4-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D1.5.DT.TDS.DPPF.XP.ZS=</span> <span class="kw">case_when</span>(</span>
<span id="cb4-8"><a href="technical-documentation-of-spi-indicators.html#cb4-8" aria-hidden="true"></a>            External_debt_Reporting<span class="op">==</span><span class="st">&#39;Actual&#39;</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb4-9"><a href="technical-documentation-of-spi-indicators.html#cb4-9" aria-hidden="true"></a>            External_debt_Reporting<span class="op">==</span><span class="st">&#39;Preliminary&#39;</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.67</span>,</span>
<span id="cb4-10"><a href="technical-documentation-of-spi-indicators.html#cb4-10" aria-hidden="true"></a>            External_debt_Reporting<span class="op">==</span><span class="st">&#39;Estimate&#39;</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.33</span>,</span>
<span id="cb4-11"><a href="technical-documentation-of-spi-indicators.html#cb4-11" aria-hidden="true"></a>            <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span></span>
<span id="cb4-12"><a href="technical-documentation-of-spi-indicators.html#cb4-12" aria-hidden="true"></a>          )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-13"><a href="technical-documentation-of-spi-indicators.html#cb4-13" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D1.5.DT.TDS.DPPF.XP.ZS=</span><span class="kw">if_else</span>(((Income.Group<span class="op">==</span><span class="st">&quot;High income&quot;</span> <span class="op">|</span><span class="st"> </span>iso3c <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;WBG&quot;</span>, <span class="st">&quot;PSE&quot;</span>)) <span class="op">&amp;</span><span class="st"> </span><span class="kw">is.na</span>(External_debt_Reporting)),<span class="dv">1</span>,SPI.D1.<span class="fl">5.</span>DT.TDS.DPPF.XP.ZS)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#fix an issue where high income countries are not judged on their debt reporting.  Also give credit to West Bank and Gaza as they are not an IMF country</span></span>
<span id="cb4-14"><a href="technical-documentation-of-spi-indicators.html#cb4-14" aria-hidden="true"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb4-15"><a href="technical-documentation-of-spi-indicators.html#cb4-15" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, date,  <span class="kw">contains</span>(<span class="st">&#39;SPI.D1.5.DT.TDS.DPPF.XP.ZS&#39;</span>)) </span></code></pre></div>
</div>
<div id="safely-managed-water" class="section level4" number="2.1.5.4">
<h4><span class="header-section-number">2.1.5.4</span> Safely Managed Water</h4>
<p>The WHO/UNCIECF JMP has estimated the safely managed water access by a simple linear regression based on the following data sources: Nationally representative household surveys (e.g. DHS, MICS) ; Population and housing censuses; Administrative data (such as regulatory agencies); Service provider data.
JMP has provided the country files that include the original data sources.</p>
<p>From the methodology: <a href="https://washdata.org/sites/default/files/JMP%20methodology-Apr-2018-5.pdf" class="uri">https://washdata.org/sites/default/files/JMP%20methodology-Apr-2018-5.pdf</a>:</p>
<blockquote>
<p>The indicator for SDG 6.1, safely managed drinking water services are defined as use of an improved drinking water source which is accessible on premises, available when needed and free from contamination. To make an estimate of safely managed services, information on the use of improved drinking water sources is combined with information on the accessibility, availability and quality of drinking water. Estimates are based on the minimum value of these criteria or, where estimates are available for both rural and urban, a population weighted average of the two. The JMP reports estimates for safely managed drinking water provided information is available for at least 50 per cent of the population on quality of drinking water and either accessibility or availability.</p>
</blockquote>
<p>We take therefore useable data if it appears within an 8 year window of the reference date. Scoring:</p>
<ul>
<li>1 Point. At least two estimates, with breakdowns for urban/rural areas, within an 8 year window<br />
</li>
<li>0.5 Points. At least two estimates, but not an urban/rural breakdown, within an 8 year window<br />
</li>
<li>0 Points. Otherwise</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="technical-documentation-of-spi-indicators.html#cb5-1" aria-hidden="true"></a><span class="co">#read in saved data</span></span>
<span id="cb5-2"><a href="technical-documentation-of-spi-indicators.html#cb5-2" aria-hidden="true"></a>safely_managed_raw_df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file=</span><span class="kw">paste</span>(raw_dir, <span class="st">&#39;1.5_DUIO/Safely_Managed_Water_data.csv&#39;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span>))</span>
<span id="cb5-3"><a href="technical-documentation-of-spi-indicators.html#cb5-3" aria-hidden="true"></a></span>
<span id="cb5-4"><a href="technical-documentation-of-spi-indicators.html#cb5-4" aria-hidden="true"></a><span class="co">#score the data</span></span>
<span id="cb5-5"><a href="technical-documentation-of-spi-indicators.html#cb5-5" aria-hidden="true"></a></span>
<span id="cb5-6"><a href="technical-documentation-of-spi-indicators.html#cb5-6" aria-hidden="true"></a><span class="co">#function to calculate 10 year window</span></span>
<span id="cb5-7"><a href="technical-documentation-of-spi-indicators.html#cb5-7" aria-hidden="true"></a>window_fun &lt;-<span class="st"> </span><span class="cf">function</span>(date_start, date_end) {</span>
<span id="cb5-8"><a href="technical-documentation-of-spi-indicators.html#cb5-8" aria-hidden="true"></a>  temp &lt;-<span class="st"> </span>safely_managed_raw_df <span class="op">%&gt;%</span></span>
<span id="cb5-9"><a href="technical-documentation-of-spi-indicators.html#cb5-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">between</span>(year,date_start,date_end) ) <span class="op">%&gt;%</span></span>
<span id="cb5-10"><a href="technical-documentation-of-spi-indicators.html#cb5-10" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(iso3c, geo) <span class="op">%&gt;%</span></span>
<span id="cb5-11"><a href="technical-documentation-of-spi-indicators.html#cb5-11" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">data_quality=</span><span class="kw">sum</span>(data_quality, <span class="dt">na.rm=</span>T)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#average over 10 years</span></span>
<span id="cb5-12"><a href="technical-documentation-of-spi-indicators.html#cb5-12" aria-hidden="true"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb5-13"><a href="technical-documentation-of-spi-indicators.html#cb5-13" aria-hidden="true"></a>    <span class="dt">names_from =</span> <span class="st">&#39;geo&#39;</span>,</span>
<span id="cb5-14"><a href="technical-documentation-of-spi-indicators.html#cb5-14" aria-hidden="true"></a>    <span class="dt">values_from =</span> <span class="st">&#39;data_quality&#39;</span></span>
<span id="cb5-15"><a href="technical-documentation-of-spi-indicators.html#cb5-15" aria-hidden="true"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb5-16"><a href="technical-documentation-of-spi-indicators.html#cb5-16" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb5-17"><a href="technical-documentation-of-spi-indicators.html#cb5-17" aria-hidden="true"></a>    <span class="dt">SPI.D1.5.SAFE.MAN.WATER=</span><span class="kw">case_when</span>(</span>
<span id="cb5-18"><a href="technical-documentation-of-spi-indicators.html#cb5-18" aria-hidden="true"></a>      (Rural<span class="op">&gt;=</span><span class="dv">2</span> <span class="op">&amp;</span><span class="st"> </span>Urban<span class="op">&gt;=</span><span class="dv">2</span>) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="co">#urban rural breakdown gets 1 point</span></span>
<span id="cb5-19"><a href="technical-documentation-of-spi-indicators.html#cb5-19" aria-hidden="true"></a>      (Rural<span class="op">&gt;=</span><span class="dv">2</span> <span class="op">|</span><span class="st"> </span>Urban<span class="op">&gt;=</span><span class="dv">2</span> <span class="op">|</span><span class="st"> </span>National<span class="op">&gt;=</span><span class="dv">2</span>) <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>, <span class="co">#partial data at at least one geography gets 0.5</span></span>
<span id="cb5-20"><a href="technical-documentation-of-spi-indicators.html#cb5-20" aria-hidden="true"></a>      <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span></span>
<span id="cb5-21"><a href="technical-documentation-of-spi-indicators.html#cb5-21" aria-hidden="true"></a>    )</span>
<span id="cb5-22"><a href="technical-documentation-of-spi-indicators.html#cb5-22" aria-hidden="true"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb5-23"><a href="technical-documentation-of-spi-indicators.html#cb5-23" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, SPI.D1.<span class="fl">5.</span>SAFE.MAN.WATER) <span class="op">%&gt;%</span></span>
<span id="cb5-24"><a href="technical-documentation-of-spi-indicators.html#cb5-24" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date=</span>date_end)</span>
<span id="cb5-25"><a href="technical-documentation-of-spi-indicators.html#cb5-25" aria-hidden="true"></a>  </span>
<span id="cb5-26"><a href="technical-documentation-of-spi-indicators.html#cb5-26" aria-hidden="true"></a>  </span>
<span id="cb5-27"><a href="technical-documentation-of-spi-indicators.html#cb5-27" aria-hidden="true"></a></span>
<span id="cb5-28"><a href="technical-documentation-of-spi-indicators.html#cb5-28" aria-hidden="true"></a>}</span>
<span id="cb5-29"><a href="technical-documentation-of-spi-indicators.html#cb5-29" aria-hidden="true"></a><span class="co">####</span></span>
<span id="cb5-30"><a href="technical-documentation-of-spi-indicators.html#cb5-30" aria-hidden="true"></a><span class="co"># 8 Year window</span></span>
<span id="cb5-31"><a href="technical-documentation-of-spi-indicators.html#cb5-31" aria-hidden="true"></a><span class="co">####</span></span>
<span id="cb5-32"><a href="technical-documentation-of-spi-indicators.html#cb5-32" aria-hidden="true"></a><span class="co">#create this database for each year from 2004 to 2019 using a 8 year window</span></span>
<span id="cb5-33"><a href="technical-documentation-of-spi-indicators.html#cb5-33" aria-hidden="true"></a></span>
<span id="cb5-34"><a href="technical-documentation-of-spi-indicators.html#cb5-34" aria-hidden="true"></a></span>
<span id="cb5-35"><a href="technical-documentation-of-spi-indicators.html#cb5-35" aria-hidden="true"></a></span>
<span id="cb5-36"><a href="technical-documentation-of-spi-indicators.html#cb5-36" aria-hidden="true"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">c</span>(<span class="dv">2015</span><span class="op">:</span><span class="dv">2019</span>)) {</span>
<span id="cb5-37"><a href="technical-documentation-of-spi-indicators.html#cb5-37" aria-hidden="true"></a>  </span>
<span id="cb5-38"><a href="technical-documentation-of-spi-indicators.html#cb5-38" aria-hidden="true"></a>  end=i</span>
<span id="cb5-39"><a href="technical-documentation-of-spi-indicators.html#cb5-39" aria-hidden="true"></a>  <span class="co">#extend the window for more recent years.  For instance, 2019 surveys are reported with a lag, so give them two year grace period</span></span>
<span id="cb5-40"><a href="technical-documentation-of-spi-indicators.html#cb5-40" aria-hidden="true"></a>  <span class="cf">if</span> (end<span class="op">==</span><span class="dv">2019</span>) {</span>
<span id="cb5-41"><a href="technical-documentation-of-spi-indicators.html#cb5-41" aria-hidden="true"></a>    start=i<span class="dv">-9</span></span>
<span id="cb5-42"><a href="technical-documentation-of-spi-indicators.html#cb5-42" aria-hidden="true"></a>  } <span class="cf">else</span> <span class="cf">if</span> (end<span class="op">==</span><span class="dv">2018</span>) {</span>
<span id="cb5-43"><a href="technical-documentation-of-spi-indicators.html#cb5-43" aria-hidden="true"></a>    start=i<span class="dv">-8</span></span>
<span id="cb5-44"><a href="technical-documentation-of-spi-indicators.html#cb5-44" aria-hidden="true"></a>  } <span class="cf">else</span> {</span>
<span id="cb5-45"><a href="technical-documentation-of-spi-indicators.html#cb5-45" aria-hidden="true"></a>    start=i<span class="dv">-7</span></span>
<span id="cb5-46"><a href="technical-documentation-of-spi-indicators.html#cb5-46" aria-hidden="true"></a>  }</span>
<span id="cb5-47"><a href="technical-documentation-of-spi-indicators.html#cb5-47" aria-hidden="true"></a> </span>
<span id="cb5-48"><a href="technical-documentation-of-spi-indicators.html#cb5-48" aria-hidden="true"></a>  </span>
<span id="cb5-49"><a href="technical-documentation-of-spi-indicators.html#cb5-49" aria-hidden="true"></a>  temp_df &lt;-<span class="st"> </span><span class="kw">window_fun</span>(start,end)</span>
<span id="cb5-50"><a href="technical-documentation-of-spi-indicators.html#cb5-50" aria-hidden="true"></a>  <span class="kw">assign</span>(<span class="kw">paste</span>(<span class="st">&#39;safe_managed_&#39;</span>,end, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>), temp_df)</span>
<span id="cb5-51"><a href="technical-documentation-of-spi-indicators.html#cb5-51" aria-hidden="true"></a>}</span>
<span id="cb5-52"><a href="technical-documentation-of-spi-indicators.html#cb5-52" aria-hidden="true"></a></span>
<span id="cb5-53"><a href="technical-documentation-of-spi-indicators.html#cb5-53" aria-hidden="true"></a><span class="cf">if</span> (<span class="kw">exists</span>(<span class="st">&#39;safe_managed_df&#39;</span>)) {</span>
<span id="cb5-54"><a href="technical-documentation-of-spi-indicators.html#cb5-54" aria-hidden="true"></a>  <span class="kw">rm</span>(<span class="st">&#39;safe_managed_df&#39;</span>)</span>
<span id="cb5-55"><a href="technical-documentation-of-spi-indicators.html#cb5-55" aria-hidden="true"></a>}</span>
<span id="cb5-56"><a href="technical-documentation-of-spi-indicators.html#cb5-56" aria-hidden="true"></a><span class="co">#now append together and save</span></span>
<span id="cb5-57"><a href="technical-documentation-of-spi-indicators.html#cb5-57" aria-hidden="true"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">c</span>(<span class="dv">2015</span><span class="op">:</span><span class="dv">2019</span>)) {</span>
<span id="cb5-58"><a href="technical-documentation-of-spi-indicators.html#cb5-58" aria-hidden="true"></a>  </span>
<span id="cb5-59"><a href="technical-documentation-of-spi-indicators.html#cb5-59" aria-hidden="true"></a>  temp&lt;-<span class="kw">get</span>(<span class="kw">paste</span>(<span class="st">&#39;safe_managed_&#39;</span>,i, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>))</span>
<span id="cb5-60"><a href="technical-documentation-of-spi-indicators.html#cb5-60" aria-hidden="true"></a>  </span>
<span id="cb5-61"><a href="technical-documentation-of-spi-indicators.html#cb5-61" aria-hidden="true"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="kw">exists</span>(<span class="st">&#39;safe_managed_df&#39;</span>)) {</span>
<span id="cb5-62"><a href="technical-documentation-of-spi-indicators.html#cb5-62" aria-hidden="true"></a>    safe_managed_df&lt;-temp</span>
<span id="cb5-63"><a href="technical-documentation-of-spi-indicators.html#cb5-63" aria-hidden="true"></a>  } <span class="cf">else</span> {</span>
<span id="cb5-64"><a href="technical-documentation-of-spi-indicators.html#cb5-64" aria-hidden="true"></a>    safe_managed_df&lt;-safe_managed_df <span class="op">%&gt;%</span></span>
<span id="cb5-65"><a href="technical-documentation-of-spi-indicators.html#cb5-65" aria-hidden="true"></a><span class="st">      </span><span class="kw">bind_rows</span>(temp) <span class="op">%&gt;%</span></span>
<span id="cb5-66"><a href="technical-documentation-of-spi-indicators.html#cb5-66" aria-hidden="true"></a><span class="st">      </span><span class="kw">arrange</span>(<span class="op">-</span>date, iso3c)</span>
<span id="cb5-67"><a href="technical-documentation-of-spi-indicators.html#cb5-67" aria-hidden="true"></a>  }</span>
<span id="cb5-68"><a href="technical-documentation-of-spi-indicators.html#cb5-68" aria-hidden="true"></a>}</span></code></pre></div>
</div>
<div id="labor-force-statistics" class="section level4" number="2.1.5.5">
<h4><span class="header-section-number">2.1.5.5</span> Labor Force Statistics</h4>
<p>In this indicator, we compare estimated labor force participation data compared to data submitted to the ILO based on national data. ILOSTAT is the source of both datasets. Countries are given full points if an indicator is produced by a national government based on a labor force survey and if that estimate is within 10 percentage points of the ILO estimated value. If either of those two components are missing, but one is available, then the country gets 0.5 points. O points otherwise.</p>
<p>The ILO modelled estimates series provides a complete set of internationally comparable labour statistics, including both nationally-reported observations and imputed data for countries with missing data. The imputations are produced through a series of econometric models maintained by the ILO. The purpose of estimating labour market indicators for countries with missing data is to obtain a balanced panel data set so that, every year, regional and global aggregates with consistent country coverage can be computed. These allow the ILO to analyse global and regional estimates of key labour market indicators and related trends. Moreover, the resulting country-level data, combining both reported and imputed observations, constitute a unique, internationally comparable data set on labour market indicators.</p>
<p>From the ILO methodological note (<a href="https://www.ilo.org/ilostat-files/Documents/TEM.pdf" class="uri">https://www.ilo.org/ilostat-files/Documents/TEM.pdf</a>), ILO has the following preferences for data with Labor force surveys coming first:</p>
<blockquote>
<p>With regard to the first criterion, in order for labour market data to be included in a particular model, they must be derived from a labour force survey, a household survey or, more rarely, a population census. National labour force surveys are generally similar across countries and present the highest data quality. Hence, the data derived from such surveys are more readily comparable than data obtained from other sources. Strict preference is therefore given to labour force survey-based data in the selection process. However, many developing countries, which lack the resources to carry out a labour force survey, do report labour market information on the basis of other types of household surveys or population censuses. Consequently, because of the need to balance the competing goals of data comparability and data coverage, some (non-labour force survey) household survey data and, more rarely, population census-based data are included in the models.</p>
</blockquote>
<p>Scoring:<br />
1 Point. Country has a labor force survey based estimate in past 5 years of labor force participation broken down by total, male, and female &amp; estimated value from ILO is within 10 percentage points of value reported by national government.<br />
0.5 Point. Country has labor force survey or is within 10 points of ILO, but not both<br />
0 Points. Otherwise</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="technical-documentation-of-spi-indicators.html#cb6-1" aria-hidden="true"></a><span class="co">#read in ILO reference areas</span></span>
<span id="cb6-2"><a href="technical-documentation-of-spi-indicators.html#cb6-2" aria-hidden="true"></a>ilo_ref_area &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file=</span> <span class="kw">paste0</span>(raw_dir,<span class="st">&quot;/metadata/ILO_reference_area.csv&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb6-3"><a href="technical-documentation-of-spi-indicators.html#cb6-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">transmute</span>(<span class="dt">iso3c=</span>ref_area,</span>
<span id="cb6-4"><a href="technical-documentation-of-spi-indicators.html#cb6-4" aria-hidden="true"></a>            <span class="dt">country=</span>ref_area.label)</span>
<span id="cb6-5"><a href="technical-documentation-of-spi-indicators.html#cb6-5" aria-hidden="true"></a>                         </span>
<span id="cb6-6"><a href="technical-documentation-of-spi-indicators.html#cb6-6" aria-hidden="true"></a><span class="co">#read in the ILO data downloaded on November 24, 2020</span></span>
<span id="cb6-7"><a href="technical-documentation-of-spi-indicators.html#cb6-7" aria-hidden="true"></a>lfp_estimated &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="dt">path =</span> <span class="kw">paste0</span>(raw_dir,<span class="st">&quot;/1.5_DUIO/ILO_lfp_country_estimated.xlsx&quot;</span>),</span>
<span id="cb6-8"><a href="technical-documentation-of-spi-indicators.html#cb6-8" aria-hidden="true"></a>                            <span class="dt">skip=</span><span class="dv">5</span>) <span class="op">%&gt;%</span></span>
<span id="cb6-9"><a href="technical-documentation-of-spi-indicators.html#cb6-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">as_tibble</span>(<span class="dt">.name_repair =</span> <span class="st">&#39;universal&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb6-10"><a href="technical-documentation-of-spi-indicators.html#cb6-10" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">country=</span><span class="kw">case_when</span>(</span>
<span id="cb6-11"><a href="technical-documentation-of-spi-indicators.html#cb6-11" aria-hidden="true"></a>    Reference.area<span class="op">==</span><span class="st">&quot;Gambia&quot;</span> <span class="op">~</span><span class="st"> &quot;Gambia, The&quot;</span>,</span>
<span id="cb6-12"><a href="technical-documentation-of-spi-indicators.html#cb6-12" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>Reference.area</span>
<span id="cb6-13"><a href="technical-documentation-of-spi-indicators.html#cb6-13" aria-hidden="true"></a>    ),</span>
<span id="cb6-14"><a href="technical-documentation-of-spi-indicators.html#cb6-14" aria-hidden="true"></a>    <span class="dt">date=</span>Time,</span>
<span id="cb6-15"><a href="technical-documentation-of-spi-indicators.html#cb6-15" aria-hidden="true"></a>    <span class="dt">estimated_value=</span>Total) <span class="op">%&gt;%</span></span>
<span id="cb6-16"><a href="technical-documentation-of-spi-indicators.html#cb6-16" aria-hidden="true"></a><span class="st">    </span><span class="kw">left_join</span>(ilo_ref_area) <span class="op">%&gt;%</span></span>
<span id="cb6-17"><a href="technical-documentation-of-spi-indicators.html#cb6-17" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, date, Sex, estimated_value ) </span>
<span id="cb6-18"><a href="technical-documentation-of-spi-indicators.html#cb6-18" aria-hidden="true"></a></span>
<span id="cb6-19"><a href="technical-documentation-of-spi-indicators.html#cb6-19" aria-hidden="true"></a><span class="co">#reported data by countries</span></span>
<span id="cb6-20"><a href="technical-documentation-of-spi-indicators.html#cb6-20" aria-hidden="true"></a>lfp_reported &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="dt">path =</span> <span class="kw">paste0</span>(raw_dir,<span class="st">&quot;/1.5_DUIO/ILO_lfp_country_reported.xlsx&quot;</span>),</span>
<span id="cb6-21"><a href="technical-documentation-of-spi-indicators.html#cb6-21" aria-hidden="true"></a>                           <span class="dt">skip=</span><span class="dv">5</span>)<span class="op">%&gt;%</span></span>
<span id="cb6-22"><a href="technical-documentation-of-spi-indicators.html#cb6-22" aria-hidden="true"></a><span class="st">  </span><span class="kw">as_tibble</span>(<span class="dt">.name_repair =</span> <span class="st">&#39;universal&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb6-23"><a href="technical-documentation-of-spi-indicators.html#cb6-23" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">country=</span><span class="kw">case_when</span>(</span>
<span id="cb6-24"><a href="technical-documentation-of-spi-indicators.html#cb6-24" aria-hidden="true"></a>    Reference.area<span class="op">==</span><span class="st">&quot;Gambia&quot;</span> <span class="op">~</span><span class="st"> &quot;Gambia, The&quot;</span>,</span>
<span id="cb6-25"><a href="technical-documentation-of-spi-indicators.html#cb6-25" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>Reference.area</span>
<span id="cb6-26"><a href="technical-documentation-of-spi-indicators.html#cb6-26" aria-hidden="true"></a>    ),</span>
<span id="cb6-27"><a href="technical-documentation-of-spi-indicators.html#cb6-27" aria-hidden="true"></a>    <span class="dt">date=</span>Time,</span>
<span id="cb6-28"><a href="technical-documentation-of-spi-indicators.html#cb6-28" aria-hidden="true"></a>    <span class="dt">reported_value=</span>..<span class="fl">15.</span>) <span class="op">%&gt;%</span></span>
<span id="cb6-29"><a href="technical-documentation-of-spi-indicators.html#cb6-29" aria-hidden="true"></a><span class="st">    </span><span class="kw">left_join</span>(ilo_ref_area) <span class="op">%&gt;%</span></span>
<span id="cb6-30"><a href="technical-documentation-of-spi-indicators.html#cb6-30" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, date, Source.type, Sex, reported_value )</span>
<span id="cb6-31"><a href="technical-documentation-of-spi-indicators.html#cb6-31" aria-hidden="true"></a></span>
<span id="cb6-32"><a href="technical-documentation-of-spi-indicators.html#cb6-32" aria-hidden="true"></a><span class="co">#merge the two together</span></span>
<span id="cb6-33"><a href="technical-documentation-of-spi-indicators.html#cb6-33" aria-hidden="true"></a>lfp_data &lt;-<span class="st"> </span>lfp_reported <span class="op">%&gt;%</span></span>
<span id="cb6-34"><a href="technical-documentation-of-spi-indicators.html#cb6-34" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(lfp_estimated) <span class="op">%&gt;%</span></span>
<span id="cb6-35"><a href="technical-documentation-of-spi-indicators.html#cb6-35" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">estimate_diff=</span>reported_value<span class="op">-</span>estimated_value,</span>
<span id="cb6-36"><a href="technical-documentation-of-spi-indicators.html#cb6-36" aria-hidden="true"></a>         <span class="dt">lfs_source=</span>(Source.type<span class="op">==</span><span class="st">&quot;Labour force survey&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb6-37"><a href="technical-documentation-of-spi-indicators.html#cb6-37" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(iso3c <span class="op">%in%</span><span class="st"> </span>country_metadata<span class="op">$</span>iso3c)</span>
<span id="cb6-38"><a href="technical-documentation-of-spi-indicators.html#cb6-38" aria-hidden="true"></a></span>
<span id="cb6-39"><a href="technical-documentation-of-spi-indicators.html#cb6-39" aria-hidden="true"></a></span>
<span id="cb6-40"><a href="technical-documentation-of-spi-indicators.html#cb6-40" aria-hidden="true"></a><span class="co">#score the data</span></span>
<span id="cb6-41"><a href="technical-documentation-of-spi-indicators.html#cb6-41" aria-hidden="true"></a></span>
<span id="cb6-42"><a href="technical-documentation-of-spi-indicators.html#cb6-42" aria-hidden="true"></a><span class="co">#function to calculate 10 year window</span></span>
<span id="cb6-43"><a href="technical-documentation-of-spi-indicators.html#cb6-43" aria-hidden="true"></a>ilo_fun &lt;-<span class="st"> </span><span class="cf">function</span>(date_start, date_end) {</span>
<span id="cb6-44"><a href="technical-documentation-of-spi-indicators.html#cb6-44" aria-hidden="true"></a>  temp &lt;-<span class="st"> </span>lfp_data <span class="op">%&gt;%</span></span>
<span id="cb6-45"><a href="technical-documentation-of-spi-indicators.html#cb6-45" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="kw">between</span>(date,date_start,date_end) ) <span class="op">%&gt;%</span></span>
<span id="cb6-46"><a href="technical-documentation-of-spi-indicators.html#cb6-46" aria-hidden="true"></a><span class="st">    </span><span class="kw">group_by</span>(iso3c) <span class="op">%&gt;%</span></span>
<span id="cb6-47"><a href="technical-documentation-of-spi-indicators.html#cb6-47" aria-hidden="true"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">SPI.D1.5.LFP.ACC=</span><span class="kw">as.numeric</span>(<span class="kw">mean</span>(estimate_diff, <span class="dt">na.rm=</span>T)<span class="op">&lt;=</span><span class="dv">10</span>),</span>
<span id="cb6-48"><a href="technical-documentation-of-spi-indicators.html#cb6-48" aria-hidden="true"></a>              <span class="dt">SPI.D1.5.LFP.SOURCE=</span><span class="kw">max</span>(lfs_source, <span class="dt">na.rm=</span>T),</span>
<span id="cb6-49"><a href="technical-documentation-of-spi-indicators.html#cb6-49" aria-hidden="true"></a>              <span class="dt">SPI.D1.5.LFP=</span>(SPI.D1.<span class="fl">5.</span>LFP.ACC<span class="op">+</span>SPI.D1.<span class="fl">5.</span>LFP.SOURCE)<span class="op">/</span><span class="dv">2</span>) <span class="op">%&gt;%</span></span>
<span id="cb6-50"><a href="technical-documentation-of-spi-indicators.html#cb6-50" aria-hidden="true"></a><span class="st">    </span><span class="kw">select</span>(iso3c, SPI.D1.<span class="fl">5.</span>LFP) <span class="op">%&gt;%</span></span>
<span id="cb6-51"><a href="technical-documentation-of-spi-indicators.html#cb6-51" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">date=</span>date_end)</span>
<span id="cb6-52"><a href="technical-documentation-of-spi-indicators.html#cb6-52" aria-hidden="true"></a>    </span>
<span id="cb6-53"><a href="technical-documentation-of-spi-indicators.html#cb6-53" aria-hidden="true"></a>}</span>
<span id="cb6-54"><a href="technical-documentation-of-spi-indicators.html#cb6-54" aria-hidden="true"></a><span class="co">####</span></span>
<span id="cb6-55"><a href="technical-documentation-of-spi-indicators.html#cb6-55" aria-hidden="true"></a><span class="co"># 5 Year window</span></span>
<span id="cb6-56"><a href="technical-documentation-of-spi-indicators.html#cb6-56" aria-hidden="true"></a><span class="co">####</span></span>
<span id="cb6-57"><a href="technical-documentation-of-spi-indicators.html#cb6-57" aria-hidden="true"></a><span class="co">#create this database for each year from 2004 to 2019 using a 10 year window</span></span>
<span id="cb6-58"><a href="technical-documentation-of-spi-indicators.html#cb6-58" aria-hidden="true"></a></span>
<span id="cb6-59"><a href="technical-documentation-of-spi-indicators.html#cb6-59" aria-hidden="true"></a></span>
<span id="cb6-60"><a href="technical-documentation-of-spi-indicators.html#cb6-60" aria-hidden="true"></a></span>
<span id="cb6-61"><a href="technical-documentation-of-spi-indicators.html#cb6-61" aria-hidden="true"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">c</span>(<span class="dv">2010</span><span class="op">:</span><span class="dv">2019</span>)) {</span>
<span id="cb6-62"><a href="technical-documentation-of-spi-indicators.html#cb6-62" aria-hidden="true"></a>  </span>
<span id="cb6-63"><a href="technical-documentation-of-spi-indicators.html#cb6-63" aria-hidden="true"></a>  end=i</span>
<span id="cb6-64"><a href="technical-documentation-of-spi-indicators.html#cb6-64" aria-hidden="true"></a>  </span>
<span id="cb6-65"><a href="technical-documentation-of-spi-indicators.html#cb6-65" aria-hidden="true"></a>    <span class="co">#extend the window for more recent years.  For instance, 2019 surveys are reported with a lag, so give them two year grace period</span></span>
<span id="cb6-66"><a href="technical-documentation-of-spi-indicators.html#cb6-66" aria-hidden="true"></a>  <span class="cf">if</span> (end<span class="op">==</span><span class="dv">2019</span>) {</span>
<span id="cb6-67"><a href="technical-documentation-of-spi-indicators.html#cb6-67" aria-hidden="true"></a>    start=i<span class="dv">-6</span></span>
<span id="cb6-68"><a href="technical-documentation-of-spi-indicators.html#cb6-68" aria-hidden="true"></a>  } <span class="cf">else</span> <span class="cf">if</span> (end<span class="op">==</span><span class="dv">2018</span>) {</span>
<span id="cb6-69"><a href="technical-documentation-of-spi-indicators.html#cb6-69" aria-hidden="true"></a>    start=i<span class="dv">-5</span></span>
<span id="cb6-70"><a href="technical-documentation-of-spi-indicators.html#cb6-70" aria-hidden="true"></a>  } <span class="cf">else</span> {</span>
<span id="cb6-71"><a href="technical-documentation-of-spi-indicators.html#cb6-71" aria-hidden="true"></a>    start=i<span class="dv">-4</span></span>
<span id="cb6-72"><a href="technical-documentation-of-spi-indicators.html#cb6-72" aria-hidden="true"></a>  }</span>
<span id="cb6-73"><a href="technical-documentation-of-spi-indicators.html#cb6-73" aria-hidden="true"></a>  </span>
<span id="cb6-74"><a href="technical-documentation-of-spi-indicators.html#cb6-74" aria-hidden="true"></a>  temp_df &lt;-<span class="st"> </span><span class="kw">ilo_fun</span>(start,end)</span>
<span id="cb6-75"><a href="technical-documentation-of-spi-indicators.html#cb6-75" aria-hidden="true"></a>  <span class="kw">assign</span>(<span class="kw">paste</span>(<span class="st">&#39;lfp_data_&#39;</span>,end, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>), temp_df)</span>
<span id="cb6-76"><a href="technical-documentation-of-spi-indicators.html#cb6-76" aria-hidden="true"></a>}</span>
<span id="cb6-77"><a href="technical-documentation-of-spi-indicators.html#cb6-77" aria-hidden="true"></a></span>
<span id="cb6-78"><a href="technical-documentation-of-spi-indicators.html#cb6-78" aria-hidden="true"></a><span class="cf">if</span> (<span class="kw">exists</span>(<span class="st">&#39;lfp_data_df&#39;</span>)) {</span>
<span id="cb6-79"><a href="technical-documentation-of-spi-indicators.html#cb6-79" aria-hidden="true"></a>  <span class="kw">rm</span>(<span class="st">&#39;lfp_data_df&#39;</span>)</span>
<span id="cb6-80"><a href="technical-documentation-of-spi-indicators.html#cb6-80" aria-hidden="true"></a>}</span>
<span id="cb6-81"><a href="technical-documentation-of-spi-indicators.html#cb6-81" aria-hidden="true"></a><span class="co">#now append together and save</span></span>
<span id="cb6-82"><a href="technical-documentation-of-spi-indicators.html#cb6-82" aria-hidden="true"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">c</span>(<span class="dv">2010</span><span class="op">:</span><span class="dv">2019</span>)) {</span>
<span id="cb6-83"><a href="technical-documentation-of-spi-indicators.html#cb6-83" aria-hidden="true"></a>  </span>
<span id="cb6-84"><a href="technical-documentation-of-spi-indicators.html#cb6-84" aria-hidden="true"></a>  temp&lt;-<span class="kw">get</span>(<span class="kw">paste</span>(<span class="st">&#39;lfp_data_&#39;</span>,i, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>))</span>
<span id="cb6-85"><a href="technical-documentation-of-spi-indicators.html#cb6-85" aria-hidden="true"></a>  </span>
<span id="cb6-86"><a href="technical-documentation-of-spi-indicators.html#cb6-86" aria-hidden="true"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="kw">exists</span>(<span class="st">&#39;lfp_data_df&#39;</span>)) {</span>
<span id="cb6-87"><a href="technical-documentation-of-spi-indicators.html#cb6-87" aria-hidden="true"></a>    lfp_data_df&lt;-temp</span>
<span id="cb6-88"><a href="technical-documentation-of-spi-indicators.html#cb6-88" aria-hidden="true"></a>  } <span class="cf">else</span> {</span>
<span id="cb6-89"><a href="technical-documentation-of-spi-indicators.html#cb6-89" aria-hidden="true"></a>    lfp_data_df&lt;-lfp_data_df <span class="op">%&gt;%</span></span>
<span id="cb6-90"><a href="technical-documentation-of-spi-indicators.html#cb6-90" aria-hidden="true"></a><span class="st">      </span><span class="kw">bind_rows</span>(temp) <span class="op">%&gt;%</span></span>
<span id="cb6-91"><a href="technical-documentation-of-spi-indicators.html#cb6-91" aria-hidden="true"></a><span class="st">      </span><span class="kw">arrange</span>(<span class="op">-</span>date, iso3c)</span>
<span id="cb6-92"><a href="technical-documentation-of-spi-indicators.html#cb6-92" aria-hidden="true"></a>  }</span>
<span id="cb6-93"><a href="technical-documentation-of-spi-indicators.html#cb6-93" aria-hidden="true"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;SPI.D1.5.POV&quot;</code></pre>
<p><img src="SPI-book_files/figure-html/aki_plots-1.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-2.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-3.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-4.png" width="960" /></p>
<pre><code>## [1] &quot;SPI.D1.5.CHLD.MORT&quot;</code></pre>
<p><img src="SPI-book_files/figure-html/aki_plots-5.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-6.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-7.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-8.png" width="960" /></p>
<pre><code>## [1] &quot;SPI.D1.5.DT.TDS.DPPF.XP.ZS&quot;</code></pre>
<p><img src="SPI-book_files/figure-html/aki_plots-9.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-10.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-11.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-12.png" width="960" /></p>
<pre><code>## [1] &quot;SPI.D1.5.SAFE.MAN.WATER&quot;</code></pre>
<p><img src="SPI-book_files/figure-html/aki_plots-13.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-14.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-15.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-16.png" width="960" /></p>
<pre><code>## [1] &quot;SPI.D1.5.LFP&quot;</code></pre>
<p><img src="SPI-book_files/figure-html/aki_plots-17.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-18.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-19.png" width="960" /><img src="SPI-book_files/figure-html/aki_plots-20.png" width="960" /></p>
</div>
</div>
</div>
<div id="data-services-1" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Data Services</h2>
<p>Cleaning for Data Services Indicators. Data Services (4 Indicators):<br />
- 2.1_DSDR - Indicator 2.1: Data releases<br />
- 2.2_DSOA - Indicator 2.2: Online access<br />
- 2.3_DSAS - Indicator 2.3: Advisory/ Analytical Services<br />
- 2.4_DSDS - Indicator 2.4: Data services</p>
<div id="indicator-2.1-data-releases" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Indicator 2.1: Data Releases</h3>
<p>Data Dissemination Standard (SDDS) and electronic General Data Dissemination Standard (e-GDDS) were
established by the International Monetary Fund (IMF) for member countries that have or that might seek
access to international capital markets, to guide them in providing their economic and financial data to the public.
Although subscription is voluntary, the subscribing member needs to be committed to observing the standard and provide
information about its data and data dissemination practices (metadata). The metadata are posted on the IMF’s SDDS and
e-GDDS websites.</p>
<p>1 Point. Subscribing to IMF SDDS+ or SDDS standards
0.5 Points. Subscribing to IMF e-GDDS standards
0 Points. Otherwise</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="technical-documentation-of-spi-indicators.html#cb12-1" aria-hidden="true"></a>Request_metadata &lt;-<span class="st"> </span><span class="kw">GET</span>(<span class="dt">url =</span> <span class="st">&quot;http://api.worldbank.org/v2/country/all/indicator/5.21.01.01.sdds?format=json&amp;date=2004:2015&amp;per_page=5000&quot;</span>)</span>
<span id="cb12-2"><a href="technical-documentation-of-spi-indicators.html#cb12-2" aria-hidden="true"></a>Response_metadata &lt;-<span class="st"> </span><span class="kw">content</span>(Request_metadata, <span class="dt">as =</span> <span class="st">&quot;text&quot;</span>, <span class="dt">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb12-3"><a href="technical-documentation-of-spi-indicators.html#cb12-3" aria-hidden="true"></a></span>
<span id="cb12-4"><a href="technical-documentation-of-spi-indicators.html#cb12-4" aria-hidden="true"></a><span class="co"># Parse the JSON content and convert it to a data frame.</span></span>
<span id="cb12-5"><a href="technical-documentation-of-spi-indicators.html#cb12-5" aria-hidden="true"></a>D2<span class="fl">.1</span>_DSDR_sci &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">fromJSON</span>(Response_metadata, <span class="dt">flatten =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb12-6"><a href="technical-documentation-of-spi-indicators.html#cb12-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">data.frame</span>() <span class="op">%&gt;%</span></span>
<span id="cb12-7"><a href="technical-documentation-of-spi-indicators.html#cb12-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">transmute</span>(</span>
<span id="cb12-8"><a href="technical-documentation-of-spi-indicators.html#cb12-8" aria-hidden="true"></a>    <span class="dt">iso3c=</span>countryiso3code,</span>
<span id="cb12-9"><a href="technical-documentation-of-spi-indicators.html#cb12-9" aria-hidden="true"></a>    <span class="dt">country=</span>country.value,</span>
<span id="cb12-10"><a href="technical-documentation-of-spi-indicators.html#cb12-10" aria-hidden="true"></a>    <span class="dt">date=</span><span class="kw">as.numeric</span>(date),</span>
<span id="cb12-11"><a href="technical-documentation-of-spi-indicators.html#cb12-11" aria-hidden="true"></a>    <span class="dt">SDDS=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(value),<span class="dv">0</span>,<span class="kw">as.numeric</span>(value))</span>
<span id="cb12-12"><a href="technical-documentation-of-spi-indicators.html#cb12-12" aria-hidden="true"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb12-13"><a href="technical-documentation-of-spi-indicators.html#cb12-13" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(spi_df_empty) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#add on country metadata</span></span>
<span id="cb12-14"><a href="technical-documentation-of-spi-indicators.html#cb12-14" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(income)) <span class="op">%&gt;%</span></span>
<span id="cb12-15"><a href="technical-documentation-of-spi-indicators.html#cb12-15" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, country, date, SDDS  ) </span>
<span id="cb12-16"><a href="technical-documentation-of-spi-indicators.html#cb12-16" aria-hidden="true"></a></span>
<span id="cb12-17"><a href="technical-documentation-of-spi-indicators.html#cb12-17" aria-hidden="true"></a></span>
<span id="cb12-18"><a href="technical-documentation-of-spi-indicators.html#cb12-18" aria-hidden="true"></a></span>
<span id="cb12-19"><a href="technical-documentation-of-spi-indicators.html#cb12-19" aria-hidden="true"></a><span class="co">#read in metadata file.</span></span>
<span id="cb12-20"><a href="technical-documentation-of-spi-indicators.html#cb12-20" aria-hidden="true"></a></span>
<span id="cb12-21"><a href="technical-documentation-of-spi-indicators.html#cb12-21" aria-hidden="true"></a><span class="co">#pull data for several of the standards from WDI metadata</span></span>
<span id="cb12-22"><a href="technical-documentation-of-spi-indicators.html#cb12-22" aria-hidden="true"></a></span>
<span id="cb12-23"><a href="technical-documentation-of-spi-indicators.html#cb12-23" aria-hidden="true"></a>df &lt;-<span class="st"> </span>WDI_metadata</span>
<span id="cb12-24"><a href="technical-documentation-of-spi-indicators.html#cb12-24" aria-hidden="true"></a></span>
<span id="cb12-25"><a href="technical-documentation-of-spi-indicators.html#cb12-25" aria-hidden="true"></a><span class="co"># Manipulate and clean final data</span></span>
<span id="cb12-26"><a href="technical-documentation-of-spi-indicators.html#cb12-26" aria-hidden="true"></a>df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb12-27"><a href="technical-documentation-of-spi-indicators.html#cb12-27" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(Income.Group))  <span class="co">#keep just countries (drop aggregations)</span></span>
<span id="cb12-28"><a href="technical-documentation-of-spi-indicators.html#cb12-28" aria-hidden="true"></a></span>
<span id="cb12-29"><a href="technical-documentation-of-spi-indicators.html#cb12-29" aria-hidden="true"></a></span>
<span id="cb12-30"><a href="technical-documentation-of-spi-indicators.html#cb12-30" aria-hidden="true"></a>D2<span class="fl">.1</span>_DSDR &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb12-31"><a href="technical-documentation-of-spi-indicators.html#cb12-31" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">iso3c=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(Country.Code), Code, Country.Code),</span>
<span id="cb12-32"><a href="technical-documentation-of-spi-indicators.html#cb12-32" aria-hidden="true"></a>         <span class="dt">country=</span>Table.Name) <span class="op">%&gt;%</span></span>
<span id="cb12-33"><a href="technical-documentation-of-spi-indicators.html#cb12-33" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="kw">c</span>(<span class="st">&#39;iso3c&#39;</span>, <span class="st">&#39;country&#39;</span>, <span class="st">&#39;date&#39;</span>,  <span class="st">&#39;IMF.data.dissemination.standard&#39;</span>)  ) <span class="op">%&gt;%</span></span>
<span id="cb12-34"><a href="technical-documentation-of-spi-indicators.html#cb12-34" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">IDDS=</span>IMF.data.dissemination.standard) <span class="op">%&gt;%</span></span>
<span id="cb12-35"><a href="technical-documentation-of-spi-indicators.html#cb12-35" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D2.1.GDDS=</span><span class="kw">case_when</span>(</span>
<span id="cb12-36"><a href="technical-documentation-of-spi-indicators.html#cb12-36" aria-hidden="true"></a>    IDDS<span class="op">==</span><span class="st">&quot;Special Data Dissemination Standard Plus (SDDS+)&quot;</span> <span class="op">|</span><span class="st"> </span>IDDS<span class="op">==</span><span class="st">&quot;Special Data Dissemination Standard (SDDS)&quot;</span><span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb12-37"><a href="technical-documentation-of-spi-indicators.html#cb12-37" aria-hidden="true"></a>    IDDS<span class="op">==</span><span class="st">&quot;Enhanced General Data Dissemination System (e-GDDS)&quot;</span><span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>,</span>
<span id="cb12-38"><a href="technical-documentation-of-spi-indicators.html#cb12-38" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> ),</span>
<span id="cb12-39"><a href="technical-documentation-of-spi-indicators.html#cb12-39" aria-hidden="true"></a>    <span class="dt">SDDS=</span><span class="kw">case_when</span>(</span>
<span id="cb12-40"><a href="technical-documentation-of-spi-indicators.html#cb12-40" aria-hidden="true"></a>     IDDS<span class="op">==</span><span class="st">&quot;Special Data Dissemination Standard (SDDS)&quot;</span><span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb12-41"><a href="technical-documentation-of-spi-indicators.html#cb12-41" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> ))  <span class="op">%&gt;%</span></span>
<span id="cb12-42"><a href="technical-documentation-of-spi-indicators.html#cb12-42" aria-hidden="true"></a><span class="st">  </span><span class="kw">bind_rows</span>(D2<span class="fl">.1</span>_DSDR_sci) <span class="op">%&gt;%</span></span>
<span id="cb12-43"><a href="technical-documentation-of-spi-indicators.html#cb12-43" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">RAW.D2.1.IDDS=</span>IDDS) <span class="op">%&gt;%</span></span>
<span id="cb12-44"><a href="technical-documentation-of-spi-indicators.html#cb12-44" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c,  date, RAW.D2.<span class="fl">1.</span>IDDS, SPI.D2.<span class="fl">1.</span>GDDS  ) <span class="op">%&gt;%</span></span>
<span id="cb12-45"><a href="technical-documentation-of-spi-indicators.html#cb12-45" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(country_metadata)</span>
<span id="cb12-46"><a href="technical-documentation-of-spi-indicators.html#cb12-46" aria-hidden="true"></a></span>
<span id="cb12-47"><a href="technical-documentation-of-spi-indicators.html#cb12-47" aria-hidden="true"></a>D2<span class="fl">.1</span>_DSDR_map &lt;-<span class="st"> </span>D2<span class="fl">.1</span>_DSDR </span>
<span id="cb12-48"><a href="technical-documentation-of-spi-indicators.html#cb12-48" aria-hidden="true"></a></span>
<span id="cb12-49"><a href="technical-documentation-of-spi-indicators.html#cb12-49" aria-hidden="true"></a></span>
<span id="cb12-50"><a href="technical-documentation-of-spi-indicators.html#cb12-50" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;D2.1_DSDR_map&#39;</span>, <span class="st">&#39;SPI.D2.1.GDDS&#39;</span>, <span class="st">&#39;SDDS Data Standards in Place&#39;</span> )</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/idds-1.png" width="960" /><img src="SPI-book_files/figure-html/idds-2.png" width="960" /><img src="SPI-book_files/figure-html/idds-3.png" width="960" /><img src="SPI-book_files/figure-html/idds-4.png" width="960" /></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="technical-documentation-of-spi-indicators.html#cb13-1" aria-hidden="true"></a><span class="co">#add to spi databases</span></span>
<span id="cb13-2"><a href="technical-documentation-of-spi-indicators.html#cb13-2" aria-hidden="true"></a>spi_df &lt;-<span class="st"> </span>spi_df <span class="op">%&gt;%</span></span>
<span id="cb13-3"><a href="technical-documentation-of-spi-indicators.html#cb13-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(D2<span class="fl">.1</span>_DSDR)</span></code></pre></div>
</div>
<div id="indicator-2.2-online-access" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Indicator 2.2: Online access</h3>
<p>This indicator measures the richness and openness of online access.</p>
<div id="source" class="section level4" number="2.2.2.1">
<h4><span class="header-section-number">2.2.2.1</span> Source</h4>
<p>Our source for this indicator is Open Data Watch. From Open Data watch:</p>
<blockquote>
<p>The Open Data Inventory (ODIN) assesses the coverage and openness of official statistics to help identify gaps, promote open data policies, improve access, and encourage dialogue
between national statistical offices (NSOs) and data users. ODIN 2018/19 includes 178 countries, including most all OECD countries. Two-year comparisons are for all countries with
two years of data between 2015-2017. Scores can be compared across topics and countries.</p>
</blockquote>
<p>We use the Openness score from ODIN for this measure. The score ranges from 0-100. It contains scores along five dimensions:<br />
- Machine Readability<br />
- Non-Proprietary format<br />
- Download Options<br />
- Metadata Available<br />
- Terms of Use</p>
<p>A description for each of these five dimensions is below:</p>
</div>
<div id="machine-readability" class="section level4" number="2.2.2.2">
<h4><span class="header-section-number">2.2.2.2</span> Machine Readability</h4>
<blockquote>
<p>Openness element 1 measures whether data are available in a machine readable format such as XLS, XLSX, CSV, and JSON. Machine-readable file formats allow users to easily process data using a computer. When data are made available in formats that are not machine readable, users cannot easily access and modify the data, which severely restricts the scope of the data’s use. In many cases PDF versions of datasets within reports can be useful to users, as the text in conjunction with the tables gives context and explanation to the figures which helps less technical users understand the data. Because of this, ODIN assessments do not penalize countries for making datasets available in PDF or other non-machine readable formats, unless these formats are the only option for exporting data. Scores are not penalized for having identical datasets in both machine readable and non-readable formats. Compression formats do not affect machine readability scores, only non-proprietary scores (see next page). Scores are given by data category, not indicator.</p>
</blockquote>
</div>
<div id="non-proprietary-format" class="section level4" number="2.2.2.3">
<h4><span class="header-section-number">2.2.2.3</span> Non-Proprietary format</h4>
<blockquote>
<p>For the elements of data openness, scoring is calculated independent of the data coverage.
If data files are compressed in RAR format (which is proprietary), data for that indicator should be considered proprietary even if the enclosing files are in a non-proprietary format. Files compressed in ZIP format are not affected.</p>
</blockquote>
</div>
<div id="download-options" class="section level4" number="2.2.2.4">
<h4><span class="header-section-number">2.2.2.4</span> Download Options</h4>
<blockquote>
<p>Openness element 3 measures whether data are available with three different download options: bulk download, API, and user-select options.
A bulk download is defined at the indicator level as: The ability to download all data recorded in ODIN for a particular indicator (all years, disaggregations, and subnational data) in one file, or multiple files that can be downloaded simultaneously. Bulk downloads are a key component of the Open Definition, which requires data to be “provided as a whole . . . and downloadable via the internet.”
User-selectable download options are defined as: Users must be able to select an indicator and at least one other dimension to create a download or table. These dimensions could include time periods, geographic disaggregations, or other recommended disaggregations. An option to choose the file export format is not enough.
API stands for Application Programming Interface. Ideally, APIs should be clearly displayed on the website. ODIN assumes APIs are available for the NSOs entire data collection used in ODIN, unless clearly stated. ODIN assessors do not register for use or test API functionality. For more information on APIs, see this guide. Scores are given by data category, not indicator.</p>
</blockquote>
</div>
<div id="metadata-available" class="section level4" number="2.2.2.5">
<h4><span class="header-section-number">2.2.2.5</span> Metadata Available</h4>
<blockquote>
<p>Openness element 4 measures whether metadata are made available. Scores are given by data category, not indicator. Metadata are defined at the indicator level as information about how the data are defined/calculated and collected. ODIN classifies metadata into three categories: (1) Not Available, (2) Incomplete, and (3) Complete. The following must be available to classify metadata as complete:
• Definition of the indicator, or definition of key terms used in the indicator description (as applicable), or how the indicator was calculated.
• Publication (date of upload), compilation date (date on front of report is not sufficient), or date dataset was last updated.
• Name of data source (what agency collected the data).
If the metadata only have one or two of the above elements, they are scored as incomplete</p>
</blockquote>
</div>
<div id="terms-of-use" class="section level4" number="2.2.2.6">
<h4><span class="header-section-number">2.2.2.6</span> Terms of Use</h4>
<blockquote>
<p>Openness element 5 measures whether data are available with an open terms of use. Generally, terms of use (TOU) will apply to an entire website or data portal (unless otherwise specified). In these cases, all data found on the same website and/or portal will receive the same score. If a portal is located on the same domain as the NSO website, the terms of use on the NSO site will apply. If the data are located on a portal or website on a different domain, another terms of use will need to be present. For a policy/ license to be accepted as a terms of use, it must clearly refer to the data found on the website. Terms of use that refer to nondata content (such as pictures, logos, etc.) of the website are not considered. A copyright symbol at the bottom of the page is not sufficient. A sentence indicating a recommended citation format is not sufficient.
Terms of use are classified the following ways: (1) Not Available, (2) Restrictive, (3) Semi-Restrictive, and (4) Open.
If the TOU contains one or more restrictive clauses, it receives 0 points and is classified as “restrictive.” Restrictive clauses include:</p>
</blockquote>
<p>For more details, consult the ODIN technical documentation:
<a href="https://docs.google.com/document/d/1ubPL1l_3im9bjlCVZ6W2ICAy6UAiXl1hGeA1aXImkxI/edit#" class="uri">https://docs.google.com/document/d/1ubPL1l_3im9bjlCVZ6W2ICAy6UAiXl1hGeA1aXImkxI/edit#</a></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="technical-documentation-of-spi-indicators.html#cb14-1" aria-hidden="true"></a>  <span class="co">#read in ODIN data</span></span>
<span id="cb14-2"><a href="technical-documentation-of-spi-indicators.html#cb14-2" aria-hidden="true"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2015</span><span class="op">:</span><span class="dv">2018</span>) {</span>
<span id="cb14-3"><a href="technical-documentation-of-spi-indicators.html#cb14-3" aria-hidden="true"></a>   temp &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">paste</span>(raw_dir, <span class="st">&#39;/2.2_DSOA/&#39;</span>,<span class="st">&#39;ODIN_&#39;</span>,i,<span class="st">&#39;.csv&#39;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>))  <span class="op">%&gt;%</span></span>
<span id="cb14-4"><a href="technical-documentation-of-spi-indicators.html#cb14-4" aria-hidden="true"></a><span class="st">        </span><span class="kw">as_tibble</span>(<span class="dt">.name_repair =</span> <span class="st">&#39;universal&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb14-5"><a href="technical-documentation-of-spi-indicators.html#cb14-5" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">date=</span>i) <span class="op">%&gt;%</span></span>
<span id="cb14-6"><a href="technical-documentation-of-spi-indicators.html#cb14-6" aria-hidden="true"></a><span class="st">        </span><span class="kw">filter</span>(Data.categories<span class="op">==</span><span class="st">&#39;All Categories&#39;</span>)</span>
<span id="cb14-7"><a href="technical-documentation-of-spi-indicators.html#cb14-7" aria-hidden="true"></a></span>
<span id="cb14-8"><a href="technical-documentation-of-spi-indicators.html#cb14-8" aria-hidden="true"></a>    <span class="kw">assign</span>(<span class="kw">paste</span>(<span class="st">&#39;openness_df&#39;</span>,i,<span class="dt">sep=</span><span class="st">&quot;_&quot;</span>), temp)</span>
<span id="cb14-9"><a href="technical-documentation-of-spi-indicators.html#cb14-9" aria-hidden="true"></a>  }</span>
<span id="cb14-10"><a href="technical-documentation-of-spi-indicators.html#cb14-10" aria-hidden="true"></a></span>
<span id="cb14-11"><a href="technical-documentation-of-spi-indicators.html#cb14-11" aria-hidden="true"></a><span class="co">#bind different years together</span></span>
<span id="cb14-12"><a href="technical-documentation-of-spi-indicators.html#cb14-12" aria-hidden="true"></a>openness_df &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(openness_df_<span class="dv">2015</span>, openness_df_<span class="dv">2016</span>, openness_df_<span class="dv">2017</span>, openness_df_<span class="dv">2018</span>)</span>
<span id="cb14-13"><a href="technical-documentation-of-spi-indicators.html#cb14-13" aria-hidden="true"></a></span>
<span id="cb14-14"><a href="technical-documentation-of-spi-indicators.html#cb14-14" aria-hidden="true"></a></span>
<span id="cb14-15"><a href="technical-documentation-of-spi-indicators.html#cb14-15" aria-hidden="true"></a>openness_df &lt;-<span class="st"> </span>openness_df <span class="op">%&gt;%</span></span>
<span id="cb14-16"><a href="technical-documentation-of-spi-indicators.html#cb14-16" aria-hidden="true"></a><span class="st">    </span><span class="kw">select</span>(Country.Code, date, Machine.readable, Non.proprietary, Download.options, Metadata.available, Terms.of.use, Openness.subscore) <span class="op">%&gt;%</span></span>
<span id="cb14-17"><a href="technical-documentation-of-spi-indicators.html#cb14-17" aria-hidden="true"></a><span class="st">    </span><span class="kw">rename</span>(<span class="dt">iso3c=</span>Country.Code) <span class="op">%&gt;%</span></span>
<span id="cb14-18"><a href="technical-documentation-of-spi-indicators.html#cb14-18" aria-hidden="true"></a><span class="st">    </span><span class="kw">group_by</span>( iso3c) <span class="op">%&gt;%</span></span>
<span id="cb14-19"><a href="technical-documentation-of-spi-indicators.html#cb14-19" aria-hidden="true"></a><span class="st">    </span><span class="kw">right_join</span>(country_metadata) <span class="op">%&gt;%</span></span>
<span id="cb14-20"><a href="technical-documentation-of-spi-indicators.html#cb14-20" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(</span>
<span id="cb14-21"><a href="technical-documentation-of-spi-indicators.html#cb14-21" aria-hidden="true"></a>      <span class="kw">across</span>(<span class="kw">c</span>(<span class="st">&#39;Machine.readable&#39;</span>, <span class="st">&#39;Non.proprietary&#39;</span>, <span class="st">&#39;Download.options&#39;</span>, <span class="st">&#39;Metadata.available&#39;</span>, <span class="st">&#39;Terms.of.use&#39;</span>, <span class="st">&#39;Openness.subscore&#39;</span>),<span class="op">~</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(.), <span class="dv">0</span>, .)           )</span>
<span id="cb14-22"><a href="technical-documentation-of-spi-indicators.html#cb14-22" aria-hidden="true"></a>      </span>
<span id="cb14-23"><a href="technical-documentation-of-spi-indicators.html#cb14-23" aria-hidden="true"></a>           )  </span>
<span id="cb14-24"><a href="technical-documentation-of-spi-indicators.html#cb14-24" aria-hidden="true"></a></span>
<span id="cb14-25"><a href="technical-documentation-of-spi-indicators.html#cb14-25" aria-hidden="true"></a><span class="co">#do some quick renaming and formatting</span></span>
<span id="cb14-26"><a href="technical-documentation-of-spi-indicators.html#cb14-26" aria-hidden="true"></a>openness_df_temp1 &lt;-<span class="st"> </span>openness_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb14-27"><a href="technical-documentation-of-spi-indicators.html#cb14-27" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename_with</span>(<span class="op">~</span><span class="kw">paste</span>(<span class="st">&#39;RAW.D2.2&#39;</span>,., <span class="dt">sep=</span><span class="st">&quot;.&quot;</span>), <span class="dt">.cols=</span><span class="kw">c</span>(<span class="st">&#39;Machine.readable&#39;</span>, <span class="st">&#39;Non.proprietary&#39;</span>, <span class="st">&#39;Download.options&#39;</span>, <span class="st">&#39;Metadata.available&#39;</span>, <span class="st">&#39;Terms.of.use&#39;</span>, <span class="st">&#39;Openness.subscore&#39;</span>) ) </span>
<span id="cb14-28"><a href="technical-documentation-of-spi-indicators.html#cb14-28" aria-hidden="true"></a></span>
<span id="cb14-29"><a href="technical-documentation-of-spi-indicators.html#cb14-29" aria-hidden="true"></a></span>
<span id="cb14-30"><a href="technical-documentation-of-spi-indicators.html#cb14-30" aria-hidden="true"></a>openness_df_temp2 &lt;-<span class="st"> </span>openness_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb14-31"><a href="technical-documentation-of-spi-indicators.html#cb14-31" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(<span class="kw">c</span>(<span class="st">&#39;Machine.readable&#39;</span>, <span class="st">&#39;Non.proprietary&#39;</span>, <span class="st">&#39;Download.options&#39;</span>, <span class="st">&#39;Metadata.available&#39;</span>, <span class="st">&#39;Terms.of.use&#39;</span>, <span class="st">&#39;Openness.subscore&#39;</span>), <span class="op">~</span>.<span class="op">/</span><span class="dv">100</span>)) <span class="op">%&gt;%</span></span>
<span id="cb14-32"><a href="technical-documentation-of-spi-indicators.html#cb14-32" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename_with</span>(<span class="op">~</span><span class="kw">paste</span>(<span class="st">&#39;SPI.D2.2&#39;</span>,., <span class="dt">sep=</span><span class="st">&quot;.&quot;</span>), <span class="dt">.cols=</span><span class="kw">c</span>(<span class="st">&#39;Machine.readable&#39;</span>, <span class="st">&#39;Non.proprietary&#39;</span>, <span class="st">&#39;Download.options&#39;</span>, <span class="st">&#39;Metadata.available&#39;</span>, <span class="st">&#39;Terms.of.use&#39;</span>, <span class="st">&#39;Openness.subscore&#39;</span>) ) </span>
<span id="cb14-33"><a href="technical-documentation-of-spi-indicators.html#cb14-33" aria-hidden="true"></a></span>
<span id="cb14-34"><a href="technical-documentation-of-spi-indicators.html#cb14-34" aria-hidden="true"></a>openness_df &lt;-<span class="st"> </span>openness_df_temp1 <span class="op">%&gt;%</span></span>
<span id="cb14-35"><a href="technical-documentation-of-spi-indicators.html#cb14-35" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(openness_df_temp2)</span>
<span id="cb14-36"><a href="technical-documentation-of-spi-indicators.html#cb14-36" aria-hidden="true"></a></span>
<span id="cb14-37"><a href="technical-documentation-of-spi-indicators.html#cb14-37" aria-hidden="true"></a><span class="co">#add to spi dataframe</span></span>
<span id="cb14-38"><a href="technical-documentation-of-spi-indicators.html#cb14-38" aria-hidden="true"></a>spi_df &lt;-<span class="st"> </span>spi_df <span class="op">%&gt;%</span></span>
<span id="cb14-39"><a href="technical-documentation-of-spi-indicators.html#cb14-39" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(openness_df)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/open_plots-1.png" width="960" /><img src="SPI-book_files/figure-html/open_plots-2.png" width="960" /><img src="SPI-book_files/figure-html/open_plots-3.png" width="960" /></p>
</div>
</div>
<div id="indicator-2.3-advisory-analytical-services" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Indicator 2.3: Advisory/ Analytical Services</h3>
<p>No established source exists for this indicator. This is experimental.</p>
</div>
<div id="indicator-2.4-data-services" class="section level3" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Indicator 2.4: Data services</h3>
<p>NSO has a listing of surveys and microdata sets that can provide the necessary
data and reference for follow-up. Upon well-defined request and procedure per
the national law and practice, users and practitioners can obtain the data
collected from the households and businesses when needed.</p>
<p>NADA is an open source microdata cataloging system, compliant with the Data Documentation Initiative (DDI) and Dublin Core’s RDF metadata standards. It serves as a portal for researchers to browse, search, compare, apply for access, and download relevant census or survey datasets, questionnaires, reports and other information.</p>
<p>1 Point. Yes
0 Points. No</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="technical-documentation-of-spi-indicators.html#cb15-1" aria-hidden="true"></a><span class="co">#read in csv file.</span></span>
<span id="cb15-2"><a href="technical-documentation-of-spi-indicators.html#cb15-2" aria-hidden="true"></a>D2<span class="fl">.4</span>_NADA &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&#39;/2.4_DSDS/&#39;</span>, <span class="st">&quot;D2.4.NADA.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> )) <span class="op">%&gt;%</span></span>
<span id="cb15-3"><a href="technical-documentation-of-spi-indicators.html#cb15-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D2.4.NADA=</span><span class="kw">case_when</span>(</span>
<span id="cb15-4"><a href="technical-documentation-of-spi-indicators.html#cb15-4" aria-hidden="true"></a>    NADA<span class="op">==</span><span class="dv">1</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb15-5"><a href="technical-documentation-of-spi-indicators.html#cb15-5" aria-hidden="true"></a>    NADA<span class="op">==</span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span>, </span>
<span id="cb15-6"><a href="technical-documentation-of-spi-indicators.html#cb15-6" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb15-7"><a href="technical-documentation-of-spi-indicators.html#cb15-7" aria-hidden="true"></a>  ))  <span class="op">%&gt;%</span></span>
<span id="cb15-8"><a href="technical-documentation-of-spi-indicators.html#cb15-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">RAW.D2.4.NADA=</span>NADA,</span>
<span id="cb15-9"><a href="technical-documentation-of-spi-indicators.html#cb15-9" aria-hidden="true"></a>         <span class="dt">RAW.D2.4.NADA_text=</span>NADA_text) <span class="op">%&gt;%</span></span>
<span id="cb15-10"><a href="technical-documentation-of-spi-indicators.html#cb15-10" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, country, date, RAW.D2.<span class="fl">4.</span>NADA,RAW.D2.<span class="fl">4.</span>NADA_text, SPI.D2.<span class="fl">4.</span>NADA  ) <span class="op">%&gt;%</span></span>
<span id="cb15-11"><a href="technical-documentation-of-spi-indicators.html#cb15-11" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, country)</span>
<span id="cb15-12"><a href="technical-documentation-of-spi-indicators.html#cb15-12" aria-hidden="true"></a></span>
<span id="cb15-13"><a href="technical-documentation-of-spi-indicators.html#cb15-13" aria-hidden="true"></a>D2<span class="fl">.4</span>_NADA_map &lt;-<span class="st"> </span>D2<span class="fl">.4</span>_NADA <span class="op">%&gt;%</span></span>
<span id="cb15-14"><a href="technical-documentation-of-spi-indicators.html#cb15-14" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(SPI.D2.<span class="fl">4.</span>NADA<span class="op">&gt;</span><span class="dv">0</span>)</span>
<span id="cb15-15"><a href="technical-documentation-of-spi-indicators.html#cb15-15" aria-hidden="true"></a></span>
<span id="cb15-16"><a href="technical-documentation-of-spi-indicators.html#cb15-16" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;D2.4_NADA_map&#39;</span>, <span class="st">&#39;RAW.D2.4.NADA&#39;</span>, <span class="st">&#39;NADA in Place&#39;</span> )</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/nada-1.png" width="960" /><img src="SPI-book_files/figure-html/nada-2.png" width="960" /><img src="SPI-book_files/figure-html/nada-3.png" width="960" /><img src="SPI-book_files/figure-html/nada-4.png" width="960" /></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="technical-documentation-of-spi-indicators.html#cb16-1" aria-hidden="true"></a><span class="co">#add to spi databases</span></span>
<span id="cb16-2"><a href="technical-documentation-of-spi-indicators.html#cb16-2" aria-hidden="true"></a>spi_df &lt;-<span class="st"> </span>spi_df <span class="op">%&gt;%</span></span>
<span id="cb16-3"><a href="technical-documentation-of-spi-indicators.html#cb16-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(D2<span class="fl">.4</span>_NADA)</span></code></pre></div>
</div>
</div>
<div id="data-products-1" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Data Products</h2>
<p>Cleaning for Data Products Indicators. Data Products (16 Indicators):</p>
<ul>
<li>GOAL 1: No Poverty<br />
</li>
<li>GOAL 2: Zero Hunger<br />
</li>
<li>GOAL 3: Good Health and Well-beingq<br />
</li>
<li>GOAL 4: Quality Education<br />
</li>
<li>GOAL 5: Gender Equality<br />
</li>
<li>GOAL 6: Clean Water and Sanitation<br />
</li>
<li>GOAL 7: Affordable and Clean Energy<br />
</li>
<li>GOAL 8: Decent Work and Economic Growth<br />
</li>
<li>GOAL 9: Industry, Innovation and Infrastructure<br />
</li>
<li>GOAL 10: Reduced Inequality<br />
</li>
<li>GOAL 11: Sustainable Cities and Communities<br />
</li>
<li>GOAL 12: Responsible Consumption and Production<br />
</li>
<li>GOAL 13: Climate Action<br />
</li>
<li><strong>GOAL 14: Life Below Water is excluded because this indicator is not relevant for landlocked countries</strong><br />
</li>
<li>GOAL 15: Life on Land<br />
</li>
<li>GOAL 16: Peace and Justice Strong Institutions<br />
</li>
<li>GOAL 17: Partnerships to achieve the Goal</li>
</ul>
<div id="methodology" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Methodology</h3>
<ol style="list-style-type: decimal">
<li><p>Download the latest SDG indicator data from UN Stats (<a href="https://unstats.un.org/sdgs/indicators/en/#" class="uri">https://unstats.un.org/sdgs/indicators/en/#</a>) using their API</p></li>
<li><p>Transform the data so that for each indicator we can create a score documenting whether a value exists for the country in a year, whether the value is based on country data, country data adjusted, estimated, or modelled data according the UN Stats metadata. <strong>This will only include tier 1 indicators</strong>.</p></li>
<li><p>Combine the resulting data into a single set of indicators for use in the Statistical Performance Indicators dashboard and index by calculating the average across SDGs. This results in 17 total indicators. One for each SDG, which is the share of indicators with a value meeting quality criteria defined below.</p></li>
</ol>
<p>Below is a paraphrased description from the UN stats webpage (<a href="https://unstats.un.org/sdgs/indicators/indicators-list/" class="uri">https://unstats.un.org/sdgs/indicators/indicators-list/</a>):</p>
<p>The global indicator framework for Sustainable Development Goals was developed by the Inter-Agency and Expert Group on SDG Indicators (IAEG-SDGs) and agreed upon at the 48th session of the United Nations Statistical Commission held in March 2017.</p>
<p>The global indicator framework includes 231 unique indicators. Please note that the total number of indicators listed in the global indicator framework of SDG indicators is 247. However, twelve indicators repeat under two or three different targets.</p>
<p>For each value of the indicator, the responsible international agency has been requested to indicate whether the national data were adjusted, estimated, modelled or are the result of global monitoring. The “nature” of the data in the SDG database is determined as follows:</p>
<ul>
<li><p>Country data (C): Produced and disseminated by the country (including data adjusted by the country to meet international standards);</p></li>
<li><p>Country data adjusted (CA): Produced and provided by the country, but adjusted by the international agency for international comparability to comply with internationally agreed standards, definitions and classifications;</p></li>
<li><p>Estimated (E): Estimated based on national data, such as surveys or administrative records, or other sources but on the same variable being estimated, produced by the international agency when country data for some year(s) is not available, when multiple sources exist, or when there are data quality issues;</p></li>
<li><p>Modelled (M): Modelled by the agency on the basis of other covariates when there is a complete lack of data on the variable being estimated;</p></li>
<li><p>Global monitoring data (G): Produced on a regular basis by the designated agency for global monitoring, based on country data. There is no corresponding figure at the country level.</p></li>
</ul>
<p>For each indicator, we will produce a value for each country with the following coding scheme:</p>
<ul>
<li><strong>1 Point</strong>: Indicator exists and the value is based on the <strong>country</strong>, <strong>country data adjusted</strong>, or <strong>estimated or Global Monitoring</strong> data<br />
</li>
<li><strong>0 Points</strong>: Indicator <strong>based on modeled data or does not exists</strong></li>
</ul>
<p>We give countries no credit for modeled data, because the country did not produce indicators in a form that was directly usable for reporting on an SDG indicator.</p>
<p>When we average over all indicators in a goal to get a score, we compute a 5 year moving average to avoid year to year variability in reporting for SDGs. The overall score for an SDG is then the 5 year average of the percentage of indicator values based on <strong>country</strong>, <strong>country data adjusted</strong>, or <strong>estimated or Global Monitoring</strong> data that were available for the SDG.</p>
<p>Because of the large data files and runtime of the program to calculate these indicators, the code to produce these indicators is in a separate file. <a href="https://github.com/stacybri/UN_Stats_SDG_Indicators_SPI/blob/master/02_programs/un_stats_cleaning.Rmd" class="uri">https://github.com/stacybri/UN_Stats_SDG_Indicators_SPI/blob/master/02_programs/un_stats_cleaning.Rmd</a></p>
</div>
<div id="indicators-3.1---3.17" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Indicators 3.1 - 3.17</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="technical-documentation-of-spi-indicators.html#cb17-1" aria-hidden="true"></a>un_sdg_df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">paste</span>(raw_dir,<span class="st">&#39;/3_DP/SPI_D3_UNSD_data_&#39;</span>,window,<span class="st">&#39;yr.csv&#39;</span>,<span class="dt">sep=</span><span class="st">&quot;&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb17-2"><a href="technical-documentation-of-spi-indicators.html#cb17-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">SPI.D3.1.POV   =</span> SPI.D3<span class="fl">.1</span>,</span>
<span id="cb17-3"><a href="technical-documentation-of-spi-indicators.html#cb17-3" aria-hidden="true"></a>         <span class="dt">SPI.D3.2.HNGR  =</span> SPI.D3<span class="fl">.2</span>,</span>
<span id="cb17-4"><a href="technical-documentation-of-spi-indicators.html#cb17-4" aria-hidden="true"></a>         <span class="dt">SPI.D3.3.HLTH  =</span> SPI.D3<span class="fl">.3</span>,</span>
<span id="cb17-5"><a href="technical-documentation-of-spi-indicators.html#cb17-5" aria-hidden="true"></a>         <span class="dt">SPI.D3.4.EDUC  =</span> SPI.D3<span class="fl">.4</span>,</span>
<span id="cb17-6"><a href="technical-documentation-of-spi-indicators.html#cb17-6" aria-hidden="true"></a>         <span class="dt">SPI.D3.5.GEND  =</span> SPI.D3<span class="fl">.5</span>,</span>
<span id="cb17-7"><a href="technical-documentation-of-spi-indicators.html#cb17-7" aria-hidden="true"></a>         <span class="dt">SPI.D3.6.WTRS  =</span> SPI.D3<span class="fl">.6</span>,</span>
<span id="cb17-8"><a href="technical-documentation-of-spi-indicators.html#cb17-8" aria-hidden="true"></a>         <span class="dt">SPI.D3.7.ENRG  =</span> SPI.D3<span class="fl">.7</span>,</span>
<span id="cb17-9"><a href="technical-documentation-of-spi-indicators.html#cb17-9" aria-hidden="true"></a>         <span class="dt">SPI.D3.8.WORK  =</span> SPI.D3<span class="fl">.8</span>,</span>
<span id="cb17-10"><a href="technical-documentation-of-spi-indicators.html#cb17-10" aria-hidden="true"></a>         <span class="dt">SPI.D3.9.INDY  =</span> SPI.D3<span class="fl">.9</span>,</span>
<span id="cb17-11"><a href="technical-documentation-of-spi-indicators.html#cb17-11" aria-hidden="true"></a>         <span class="dt">SPI.D3.10.NEQL =</span> SPI.D3<span class="fl">.10</span>,</span>
<span id="cb17-12"><a href="technical-documentation-of-spi-indicators.html#cb17-12" aria-hidden="true"></a>         <span class="dt">SPI.D3.11.CITY =</span> SPI.D3<span class="fl">.11</span>,</span>
<span id="cb17-13"><a href="technical-documentation-of-spi-indicators.html#cb17-13" aria-hidden="true"></a>         <span class="dt">SPI.D3.12.CNSP =</span> SPI.D3<span class="fl">.12</span>,</span>
<span id="cb17-14"><a href="technical-documentation-of-spi-indicators.html#cb17-14" aria-hidden="true"></a>         <span class="dt">SPI.D3.13.CLMT =</span> SPI.D3<span class="fl">.13</span>,</span>
<span id="cb17-15"><a href="technical-documentation-of-spi-indicators.html#cb17-15" aria-hidden="true"></a>         <span class="dt">SPI.D3.14.LFWT =</span> SPI.D3<span class="fl">.14</span>,</span>
<span id="cb17-16"><a href="technical-documentation-of-spi-indicators.html#cb17-16" aria-hidden="true"></a>         <span class="dt">SPI.D3.15.LAND =</span> SPI.D3<span class="fl">.15</span>,</span>
<span id="cb17-17"><a href="technical-documentation-of-spi-indicators.html#cb17-17" aria-hidden="true"></a>         <span class="dt">SPI.D3.16.INST =</span> SPI.D3<span class="fl">.16</span>,</span>
<span id="cb17-18"><a href="technical-documentation-of-spi-indicators.html#cb17-18" aria-hidden="true"></a>         <span class="dt">SPI.D3.17.PTNS =</span> SPI.D3<span class="fl">.17</span></span>
<span id="cb17-19"><a href="technical-documentation-of-spi-indicators.html#cb17-19" aria-hidden="true"></a>) <span class="op">%&gt;%</span></span>
<span id="cb17-20"><a href="technical-documentation-of-spi-indicators.html#cb17-20" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(country, date, <span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb17-21"><a href="technical-documentation-of-spi-indicators.html#cb17-21" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>SPI.D3.<span class="fl">14.</span>LFWT)</span>
<span id="cb17-22"><a href="technical-documentation-of-spi-indicators.html#cb17-22" aria-hidden="true"></a></span>
<span id="cb17-23"><a href="technical-documentation-of-spi-indicators.html#cb17-23" aria-hidden="true"></a><span class="co">#add to spi databases</span></span>
<span id="cb17-24"><a href="technical-documentation-of-spi-indicators.html#cb17-24" aria-hidden="true"></a>spi_df &lt;-<span class="st"> </span>spi_df <span class="op">%&gt;%</span></span>
<span id="cb17-25"><a href="technical-documentation-of-spi-indicators.html#cb17-25" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(un_sdg_df)</span>
<span id="cb17-26"><a href="technical-documentation-of-spi-indicators.html#cb17-26" aria-hidden="true"></a></span>
<span id="cb17-27"><a href="technical-documentation-of-spi-indicators.html#cb17-27" aria-hidden="true"></a><span class="co">#map the values</span></span>
<span id="cb17-28"><a href="technical-documentation-of-spi-indicators.html#cb17-28" aria-hidden="true"></a>un_sdg_map &lt;-<span class="st"> </span>un_sdg_df <span class="op">%&gt;%</span></span>
<span id="cb17-29"><a href="technical-documentation-of-spi-indicators.html#cb17-29" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(country, date, <span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>)) </span>
<span id="cb17-30"><a href="technical-documentation-of-spi-indicators.html#cb17-30" aria-hidden="true"></a></span>
<span id="cb17-31"><a href="technical-documentation-of-spi-indicators.html#cb17-31" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.1.POV&#39;</span>,<span class="st">&#39;Goal 1: No Poverty&#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-1.png" width="960" /><img src="SPI-book_files/figure-html/unstats-2.png" width="960" /><img src="SPI-book_files/figure-html/unstats-3.png" width="960" /><img src="SPI-book_files/figure-html/unstats-4.png" width="960" /></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="technical-documentation-of-spi-indicators.html#cb18-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.2.HNGR&#39;</span>,<span class="st">&#39;Goal 2: No Hunger&#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-5.png" width="960" /><img src="SPI-book_files/figure-html/unstats-6.png" width="960" /><img src="SPI-book_files/figure-html/unstats-7.png" width="960" /><img src="SPI-book_files/figure-html/unstats-8.png" width="960" /></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="technical-documentation-of-spi-indicators.html#cb19-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.3.HLTH&#39;</span>,<span class="st">&#39;Goal 3: Good Health and Well-being&#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-9.png" width="960" /><img src="SPI-book_files/figure-html/unstats-10.png" width="960" /><img src="SPI-book_files/figure-html/unstats-11.png" width="960" /><img src="SPI-book_files/figure-html/unstats-12.png" width="960" /></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="technical-documentation-of-spi-indicators.html#cb20-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.4.EDUC&#39;</span>,<span class="st">&#39;Goal 4: Quality Education  &#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-13.png" width="960" /><img src="SPI-book_files/figure-html/unstats-14.png" width="960" /><img src="SPI-book_files/figure-html/unstats-15.png" width="960" /><img src="SPI-book_files/figure-html/unstats-16.png" width="960" /></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="technical-documentation-of-spi-indicators.html#cb21-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.5.GEND&#39;</span>,<span class="st">&#39;Goal 5: Gender Equality &#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-17.png" width="960" /><img src="SPI-book_files/figure-html/unstats-18.png" width="960" /><img src="SPI-book_files/figure-html/unstats-19.png" width="960" /><img src="SPI-book_files/figure-html/unstats-20.png" width="960" /></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="technical-documentation-of-spi-indicators.html#cb22-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.6.WTRS&#39;</span>,<span class="st">&#39;Goal 6: Clean Water and Sanitation &#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-21.png" width="960" /><img src="SPI-book_files/figure-html/unstats-22.png" width="960" /><img src="SPI-book_files/figure-html/unstats-23.png" width="960" /><img src="SPI-book_files/figure-html/unstats-24.png" width="960" /></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="technical-documentation-of-spi-indicators.html#cb23-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.7.ENRG&#39;</span>,<span class="st">&#39;Goal 7: Affordable and Clean Energy&#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-25.png" width="960" /><img src="SPI-book_files/figure-html/unstats-26.png" width="960" /><img src="SPI-book_files/figure-html/unstats-27.png" width="960" /><img src="SPI-book_files/figure-html/unstats-28.png" width="960" /></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="technical-documentation-of-spi-indicators.html#cb24-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.8.WORK&#39;</span>,<span class="st">&#39;Goal 8: Decent Work and Economic Growth  &#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-29.png" width="960" /><img src="SPI-book_files/figure-html/unstats-30.png" width="960" /><img src="SPI-book_files/figure-html/unstats-31.png" width="960" /><img src="SPI-book_files/figure-html/unstats-32.png" width="960" /></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="technical-documentation-of-spi-indicators.html#cb25-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.9.INDY&#39;</span>,<span class="st">&#39;Goal 9: Industry, Innovation and Infrastructure &#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-33.png" width="960" /><img src="SPI-book_files/figure-html/unstats-34.png" width="960" /><img src="SPI-book_files/figure-html/unstats-35.png" width="960" /><img src="SPI-book_files/figure-html/unstats-36.png" width="960" /></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="technical-documentation-of-spi-indicators.html#cb26-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.10.NEQL&#39;</span>,<span class="st">&#39;Goal 10: Reduced Inequality   &#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-37.png" width="960" /><img src="SPI-book_files/figure-html/unstats-38.png" width="960" /><img src="SPI-book_files/figure-html/unstats-39.png" width="960" /><img src="SPI-book_files/figure-html/unstats-40.png" width="960" /></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="technical-documentation-of-spi-indicators.html#cb27-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.11.CITY&#39;</span>,<span class="st">&#39;Goal 11: Sustainable Cities and Communities&#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-41.png" width="960" /><img src="SPI-book_files/figure-html/unstats-42.png" width="960" /><img src="SPI-book_files/figure-html/unstats-43.png" width="960" /><img src="SPI-book_files/figure-html/unstats-44.png" width="960" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="technical-documentation-of-spi-indicators.html#cb28-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.12.CNSP&#39;</span>,<span class="st">&#39;Goal 12: Responsible Consumption and Production   &#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-45.png" width="960" /><img src="SPI-book_files/figure-html/unstats-46.png" width="960" /><img src="SPI-book_files/figure-html/unstats-47.png" width="960" /><img src="SPI-book_files/figure-html/unstats-48.png" width="960" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="technical-documentation-of-spi-indicators.html#cb29-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.13.CLMT&#39;</span>,<span class="st">&#39;Goal 13: Climate Action&#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-49.png" width="960" /><img src="SPI-book_files/figure-html/unstats-50.png" width="960" /><img src="SPI-book_files/figure-html/unstats-51.png" width="960" /><img src="SPI-book_files/figure-html/unstats-52.png" width="960" /></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="technical-documentation-of-spi-indicators.html#cb30-1" aria-hidden="true"></a><span class="co">#spi_mapper(&#39;un_sdg_map&#39;,&#39;SPI.D3.14.LFWT&#39;,&#39;Goal 14: Life Below Water&#39;)</span></span>
<span id="cb30-2"><a href="technical-documentation-of-spi-indicators.html#cb30-2" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.15.LAND&#39;</span>,<span class="st">&#39;Goal 15: Life on Land&#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-53.png" width="960" /><img src="SPI-book_files/figure-html/unstats-54.png" width="960" /><img src="SPI-book_files/figure-html/unstats-55.png" width="960" /><img src="SPI-book_files/figure-html/unstats-56.png" width="960" /></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="technical-documentation-of-spi-indicators.html#cb31-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.16.INST&#39;</span>,<span class="st">&#39;Goal 16: Peace and Justice Strong Institutions&#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-57.png" width="960" /><img src="SPI-book_files/figure-html/unstats-58.png" width="960" /><img src="SPI-book_files/figure-html/unstats-59.png" width="960" /><img src="SPI-book_files/figure-html/unstats-60.png" width="960" /></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="technical-documentation-of-spi-indicators.html#cb32-1" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;un_sdg_map&#39;</span>,<span class="st">&#39;SPI.D3.17.PTNS&#39;</span>,<span class="st">&#39;Goal 17: Partnerships to achieve the Goal  &#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/unstats-61.png" width="960" /><img src="SPI-book_files/figure-html/unstats-62.png" width="960" /><img src="SPI-book_files/figure-html/unstats-63.png" width="960" /><img src="SPI-book_files/figure-html/unstats-64.png" width="960" /></p>
</div>
</div>
<div id="data-sources-1" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Data Sources</h2>
<p>Cleaning for the Data Sources Indicators. Data Sources (4 Indicators):<br />
- 4.1_SOCS - Indicator 4.1: censuses and surveys<br />
- 4.2_SOAD - Indicator 4.2: administrative data<br />
- 4.3_SOGS - Indicator 4.3: geospatial data<br />
- 4.4_SOPC - Indicator 4.4: private/citizen generated data</p>
<div id="indicator-4.1-censuses-and-surveys" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Indicator 4.1: censuses and surveys</h3>
<p>This indicator draws from data collected by the Statistical Performance Indicators team. The following censuses and surveys are considered:</p>
<ul>
<li>Population &amp; Housing census<br />
</li>
<li>Agriculture census<br />
</li>
<li>Business/establishment census<br />
</li>
<li>Household Survey on income/ consumption/ expenditure/ budget/ Integrated Survey<br />
</li>
<li>Agriculture survey<br />
</li>
<li>Labor Force Survey<br />
</li>
<li>Health/Demographic survey<br />
</li>
<li>Business/establishment survey</li>
</ul>
<div id="population-housing-census" class="section level4" number="2.4.1.1">
<h4><span class="header-section-number">2.4.1.1</span> Population &amp; Housing census</h4>
<p>Population censuses collect data on the size, distribution and composition of population and
information on a broad range of social and economic characteristics of the population. It also
provides sampling frames for household and other surveys. Housing censuses provide information
on the supply of housing units, the structural characteristics and facilities, and health and the
development of normal family living conditions. Data obtained as part of the population census,
including data on homeless persons, are often used in the presentation and analysis of the results
of the housing census. It is recommended that population and housing censuses be conducted at least every 10 years.</p>
<p>1 Point. Population census done within last 10 years<br />
0.5 Points. Population census done within last 20 years
0 Points. Otherwise</p>
</div>
<div id="agriculture-census" class="section level4" number="2.4.1.2">
<h4><span class="header-section-number">2.4.1.2</span> Agriculture census</h4>
<p>Agriculture censuses collect information on agricultural activities, such as
size of holding, land tenure, land use, employment and production, and provide
basic structural data and sampling frames for agricultural surveys. Censuses
of agriculture normally involves collecting key structural data by complete
enumeration of all agricultural holdings, in combination with more detailed
structural data using sampling methods. It is recommended that agricultural
censuses be conducted at least every 10 years.</p>
<p>1 Point. census done within last 10 years<br />
0.5 Points. census done within last 20 years<br />
0 Points. Otherwise</p>
</div>
<div id="businessestablishment-census" class="section level4" number="2.4.1.3">
<h4><span class="header-section-number">2.4.1.3</span> Business/establishment census</h4>
<p>Business/establishment censuses provide valuable information on all economic
activities, number of employed and size of establishments in the economy.
Business Register information is establishment-based and includes business
location, organization type (e.g. subsidiary or parent), industry
classification, and operating data (e.g., receipts and employment).</p>
<p>1 Point. census done within last 10 years<br />
0.5 Points. census done within last 20 years<br />
0 Points. Otherwise</p>
</div>
<div id="household-survey-on-incomeconsumptionexpenditurebudgetintegrated-survey" class="section level4" number="2.4.1.4">
<h4><span class="header-section-number">2.4.1.4</span> Household Survey on income/consumption/expenditure/budget/Integrated Survey</h4>
<p>These surveys collect data on household income (including income in kind),
consumption and expenditure. They typically include income, expenditure, and
consumption surveys, household budget surveys, integrated surveys. It is
recommended that surveys on income and expenditure be conducted at least every
3 to 5 years.</p>
<p>1 Point. 3 or more surveys done within past 10 years<br />
0.6 Points. 2 surveys done within past 10 years;<br />
0.3 Points. 1 survey done within past 10 years;<br />
0 Points. None within past 10 years</p>
</div>
<div id="agriculture-survey" class="section level4" number="2.4.1.5">
<h4><span class="header-section-number">2.4.1.5</span> Agriculture survey</h4>
<p>Agricultural surveys refer to surveys of agricultural holdings based on the
sampling frames established by the agricultural census. These are surveys on
agricultural land, production, crops and livestock, aquaculture, labor and
cost, and time use. Some issues, such as gender and food security, are of
interest to most agriculture surveys.</p>
<p>1 Point. 3 or more surveys done within past 10 years<br />
0.6 Points. 2 surveys done within past 10 years;<br />
0.3 Points. 1 survey done within past 10 years;<br />
0 Points. None within past 10 years</p>
</div>
<div id="labor-force-survey" class="section level4" number="2.4.1.6">
<h4><span class="header-section-number">2.4.1.6</span> Labor Force Survey</h4>
<p>Labor force survey is a standard household-based survey of work-related
statistics at the national and sub-national employment or unemployment levels,
rates or trends. The surveys also provide the characteristics of the employed
or unemployed, including labor force status by age or gender, breakdowns
between employees and the self-employed, public versus private sector
employment, multiple job-holding, hiring, job creation, and duration of
unemployment.</p>
<p>1 Point. 3 or more surveys done within past 10 years<br />
0.6 Points. 2 surveys done within past 10 years;<br />
0.3 Points. 1 survey done within past 10 years;<br />
0 Points. None within past 10 years</p>
</div>
<div id="healthdemographic-survey" class="section level4" number="2.4.1.7">
<h4><span class="header-section-number">2.4.1.7</span> Health/Demographic survey</h4>
<p>Health surveys collect information on various aspects of health of
populations, such as health expenditure, access, utilization, and outcomes.
They typically include Demographic and Health Surveys. It is recommended that
health surveys be conducted at least every 3 to 5 years.</p>
<p>1 Point. 3 or more surveys done within past 10 years<br />
0.6 Points. 2 surveys done within past 10 years;<br />
0.3 Points. 1 survey done within past 10 years;<br />
0 Points. None within past 10 years</p>
</div>
<div id="businessestablishment-survey" class="section level4" number="2.4.1.8">
<h4><span class="header-section-number">2.4.1.8</span> Business/establishment survey</h4>
<p>The business/establishment survey provides information on employment, hours,
and earnings of employees from a sample of business establishments including
private and public, entities that are classified based on an establishment’s
principal activity from the business or establishment census. Establishment
surveys include surveys of businesses, farms, and institutions. They may ask
for information about the establishment itself and/or employee characteristics
and demographics.</p>
<p>1 Point. 3 or more surveys done within past 10 years<br />
0.6 Points. 2 surveys done within past 10 years;<br />
0.3 Points. 1 survey done within past 10 years;<br />
0 Points. None within past 10 years</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="technical-documentation-of-spi-indicators.html#cb33-1" aria-hidden="true"></a><span class="co">#pull data for population and agriculture census from WDI metadata</span></span>
<span id="cb33-2"><a href="technical-documentation-of-spi-indicators.html#cb33-2" aria-hidden="true"></a></span>
<span id="cb33-3"><a href="technical-documentation-of-spi-indicators.html#cb33-3" aria-hidden="true"></a>df &lt;-<span class="st"> </span>WDI_metadata</span>
<span id="cb33-4"><a href="technical-documentation-of-spi-indicators.html#cb33-4" aria-hidden="true"></a></span>
<span id="cb33-5"><a href="technical-documentation-of-spi-indicators.html#cb33-5" aria-hidden="true"></a><span class="co"># Manipulate and clean final data</span></span>
<span id="cb33-6"><a href="technical-documentation-of-spi-indicators.html#cb33-6" aria-hidden="true"></a>df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb33-7"><a href="technical-documentation-of-spi-indicators.html#cb33-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(Income.Group))  <span class="co">#keep just countries (drop aggregations)</span></span>
<span id="cb33-8"><a href="technical-documentation-of-spi-indicators.html#cb33-8" aria-hidden="true"></a>  </span>
<span id="cb33-9"><a href="technical-documentation-of-spi-indicators.html#cb33-9" aria-hidden="true"></a></span>
<span id="cb33-10"><a href="technical-documentation-of-spi-indicators.html#cb33-10" aria-hidden="true"></a>pop_census_df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb33-11"><a href="technical-documentation-of-spi-indicators.html#cb33-11" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">iso3c=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(Country.Code), Code, Country.Code),</span>
<span id="cb33-12"><a href="technical-documentation-of-spi-indicators.html#cb33-12" aria-hidden="true"></a>         <span class="dt">country=</span>Table.Name) <span class="op">%&gt;%</span></span>
<span id="cb33-13"><a href="technical-documentation-of-spi-indicators.html#cb33-13" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="kw">c</span>(<span class="st">&#39;iso3c&#39;</span>, <span class="st">&#39;country&#39;</span>, <span class="st">&#39;date&#39;</span>,  <span class="st">&#39;Latest.population.census&#39;</span>)  ) <span class="op">%&gt;%</span></span>
<span id="cb33-14"><a href="technical-documentation-of-spi-indicators.html#cb33-14" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">last_val=</span><span class="kw">str_extract</span>(Latest.population.census, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d{4}&quot;</span>) )<span class="op">%&gt;%</span></span>
<span id="cb33-15"><a href="technical-documentation-of-spi-indicators.html#cb33-15" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">last_val=</span><span class="kw">as.numeric</span>(last_val)) <span class="op">%&gt;%</span></span>
<span id="cb33-16"><a href="technical-documentation-of-spi-indicators.html#cb33-16" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">indicator=</span><span class="kw">case_when</span>(</span>
<span id="cb33-17"><a href="technical-documentation-of-spi-indicators.html#cb33-17" aria-hidden="true"></a>      (date<span class="op">-</span>last_val<span class="op">&lt;=</span><span class="dv">10</span>) <span class="op">&amp;</span><span class="st"> </span>(date<span class="op">-</span>last_val<span class="op">&gt;=</span><span class="dv">0</span>) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb33-18"><a href="technical-documentation-of-spi-indicators.html#cb33-18" aria-hidden="true"></a>      (date<span class="op">-</span>last_val<span class="op">&lt;=</span><span class="dv">20</span>) <span class="op">&amp;</span><span class="st"> </span>(date<span class="op">-</span>last_val<span class="op">&gt;=</span><span class="dv">0</span>) <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>,</span>
<span id="cb33-19"><a href="technical-documentation-of-spi-indicators.html#cb33-19" aria-hidden="true"></a>      <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> )</span>
<span id="cb33-20"><a href="technical-documentation-of-spi-indicators.html#cb33-20" aria-hidden="true"></a>    )  <span class="op">%&gt;%</span></span>
<span id="cb33-21"><a href="technical-documentation-of-spi-indicators.html#cb33-21" aria-hidden="true"></a><span class="st">    </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb33-22"><a href="technical-documentation-of-spi-indicators.html#cb33-22" aria-hidden="true"></a><span class="st">    </span><span class="kw">select</span>(<span class="kw">c</span>(<span class="st">&#39;iso3c&#39;</span>, <span class="st">&#39;country&#39;</span>, <span class="st">&#39;date&#39;</span>, <span class="st">&#39;Latest.population.census&#39;</span>, <span class="st">&#39;indicator&#39;</span>)  ) <span class="op">%&gt;%</span></span>
<span id="cb33-23"><a href="technical-documentation-of-spi-indicators.html#cb33-23" aria-hidden="true"></a><span class="st">    </span><span class="kw">arrange</span>(date, country)</span>
<span id="cb33-24"><a href="technical-documentation-of-spi-indicators.html#cb33-24" aria-hidden="true"></a>  </span>
<span id="cb33-25"><a href="technical-documentation-of-spi-indicators.html#cb33-25" aria-hidden="true"></a>ag_census_df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb33-26"><a href="technical-documentation-of-spi-indicators.html#cb33-26" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">iso3c=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(Country.Code), Code, Country.Code),</span>
<span id="cb33-27"><a href="technical-documentation-of-spi-indicators.html#cb33-27" aria-hidden="true"></a>         <span class="dt">country=</span>Table.Name) <span class="op">%&gt;%</span></span>
<span id="cb33-28"><a href="technical-documentation-of-spi-indicators.html#cb33-28" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="kw">c</span>(<span class="st">&#39;iso3c&#39;</span>,  <span class="st">&#39;date&#39;</span>,  <span class="st">&#39;Latest.agricultural.census&#39;</span>)  ) <span class="op">%&gt;%</span></span>
<span id="cb33-29"><a href="technical-documentation-of-spi-indicators.html#cb33-29" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">last_val=</span><span class="kw">str_extract</span>(Latest.agricultural.census, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d{4}&quot;</span>) )<span class="op">%&gt;%</span></span>
<span id="cb33-30"><a href="technical-documentation-of-spi-indicators.html#cb33-30" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">last_val=</span><span class="kw">as.numeric</span>(last_val)) <span class="op">%&gt;%</span></span>
<span id="cb33-31"><a href="technical-documentation-of-spi-indicators.html#cb33-31" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">indicator=</span><span class="kw">case_when</span>(</span>
<span id="cb33-32"><a href="technical-documentation-of-spi-indicators.html#cb33-32" aria-hidden="true"></a>      (date<span class="op">-</span>last_val<span class="op">&lt;=</span><span class="dv">10</span>) <span class="op">&amp;</span><span class="st"> </span>(date<span class="op">-</span>last_val<span class="op">&gt;=</span><span class="dv">0</span>) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb33-33"><a href="technical-documentation-of-spi-indicators.html#cb33-33" aria-hidden="true"></a>      (date<span class="op">-</span>last_val<span class="op">&lt;=</span><span class="dv">20</span>) <span class="op">&amp;</span><span class="st"> </span>(date<span class="op">-</span>last_val<span class="op">&gt;=</span><span class="dv">0</span>) <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>,</span>
<span id="cb33-34"><a href="technical-documentation-of-spi-indicators.html#cb33-34" aria-hidden="true"></a>      <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> )</span>
<span id="cb33-35"><a href="technical-documentation-of-spi-indicators.html#cb33-35" aria-hidden="true"></a>    )  <span class="op">%&gt;%</span></span>
<span id="cb33-36"><a href="technical-documentation-of-spi-indicators.html#cb33-36" aria-hidden="true"></a><span class="st">    </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb33-37"><a href="technical-documentation-of-spi-indicators.html#cb33-37" aria-hidden="true"></a><span class="st">    </span><span class="kw">select</span>(<span class="kw">c</span>(<span class="st">&#39;iso3c&#39;</span>,  <span class="st">&#39;date&#39;</span>, <span class="st">&#39;Latest.agricultural.census&#39;</span>, <span class="st">&#39;indicator&#39;</span>)  ) <span class="op">%&gt;%</span></span>
<span id="cb33-38"><a href="technical-documentation-of-spi-indicators.html#cb33-38" aria-hidden="true"></a><span class="st">    </span><span class="kw">arrange</span>(date, iso3c)</span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="technical-documentation-of-spi-indicators.html#cb34-1" aria-hidden="true"></a>census_fun  &lt;-<span class="st"> </span><span class="cf">function</span>(data, input_var) {</span>
<span id="cb34-2"><a href="technical-documentation-of-spi-indicators.html#cb34-2" aria-hidden="true"></a>  </span>
<span id="cb34-3"><a href="technical-documentation-of-spi-indicators.html#cb34-3" aria-hidden="true"></a>  data &lt;-<span class="st"> </span>data</span>
<span id="cb34-4"><a href="technical-documentation-of-spi-indicators.html#cb34-4" aria-hidden="true"></a>  input_var &lt;-<span class="st"> </span>input_var</span>
<span id="cb34-5"><a href="technical-documentation-of-spi-indicators.html#cb34-5" aria-hidden="true"></a></span>
<span id="cb34-6"><a href="technical-documentation-of-spi-indicators.html#cb34-6" aria-hidden="true"></a>  <span class="co">#read in csv file.</span></span>
<span id="cb34-7"><a href="technical-documentation-of-spi-indicators.html#cb34-7" aria-hidden="true"></a>  cs_df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&#39;/4.1_SOCS/raw/&#39;</span>, data, <span class="st">&quot;_145.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span> )) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#bring in data collected for an original set of 145 countries, then an additional 10, then several more high income counries.</span></span>
<span id="cb34-8"><a href="technical-documentation-of-spi-indicators.html#cb34-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">bind_rows</span>(<span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&#39;/4.1_SOCS/raw/&#39;</span>, data, <span class="st">&quot;_10.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span> ))) <span class="op">%&gt;%</span></span>
<span id="cb34-9"><a href="technical-documentation-of-spi-indicators.html#cb34-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">bind_rows</span>(<span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&#39;/4.1_SOCS/raw/&#39;</span>, data, <span class="st">&quot;_high.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span> ))) <span class="op">%&gt;%</span><span class="st">            </span></span>
<span id="cb34-10"><a href="technical-documentation-of-spi-indicators.html#cb34-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">write_excel_csv</span>(<span class="dt">path =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&#39;/4.1_SOCS/&#39;</span>, data, <span class="st">&quot;_manual.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span> )) <span class="op">%&gt;%</span></span>
<span id="cb34-11"><a href="technical-documentation-of-spi-indicators.html#cb34-11" aria-hidden="true"></a><span class="st">    </span><span class="kw">distinct</span>() <span class="op">%&gt;%</span></span>
<span id="cb34-12"><a href="technical-documentation-of-spi-indicators.html#cb34-12" aria-hidden="true"></a><span class="st">    </span><span class="kw">group_by</span>(iso3c, country) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb34-13"><a href="technical-documentation-of-spi-indicators.html#cb34-13" aria-hidden="true"></a><span class="st">    </span><span class="kw">rename</span>(<span class="dt">input_var =</span> <span class="op">!!</span><span class="st"> </span>input_var) <span class="op">%&gt;%</span></span>
<span id="cb34-14"><a href="technical-documentation-of-spi-indicators.html#cb34-14" aria-hidden="true"></a><span class="st">    </span><span class="kw">nest</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># The next chunk of code will split our string with the years of the census (i.e. &quot;2000, 2010&quot;) in to separate rows.  We will then aggregate up.</span></span>
<span id="cb34-15"><a href="technical-documentation-of-spi-indicators.html#cb34-15" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(</span>
<span id="cb34-16"><a href="technical-documentation-of-spi-indicators.html#cb34-16" aria-hidden="true"></a>      <span class="dt">temp_col =</span> <span class="kw">map</span>(</span>
<span id="cb34-17"><a href="technical-documentation-of-spi-indicators.html#cb34-17" aria-hidden="true"></a>        data, </span>
<span id="cb34-18"><a href="technical-documentation-of-spi-indicators.html#cb34-18" aria-hidden="true"></a>        <span class="op">~</span><span class="st"> </span><span class="kw">str_extract_all</span>(.x<span class="op">$</span>input_var, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d{4}&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb34-19"><a href="technical-documentation-of-spi-indicators.html#cb34-19" aria-hidden="true"></a><span class="st">          </span><span class="kw">flatten</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb34-20"><a href="technical-documentation-of-spi-indicators.html#cb34-20" aria-hidden="true"></a><span class="st">          </span><span class="kw">map_chr</span>(<span class="op">~</span><span class="kw">return</span>(.x)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb34-21"><a href="technical-documentation-of-spi-indicators.html#cb34-21" aria-hidden="true"></a><span class="st">          </span><span class="kw">as_tibble</span>()</span>
<span id="cb34-22"><a href="technical-documentation-of-spi-indicators.html#cb34-22" aria-hidden="true"></a>      )</span>
<span id="cb34-23"><a href="technical-documentation-of-spi-indicators.html#cb34-23" aria-hidden="true"></a>    ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb34-24"><a href="technical-documentation-of-spi-indicators.html#cb34-24" aria-hidden="true"></a><span class="st">    </span><span class="kw">unnest</span>(<span class="dt">keep_empty =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Now we have a database with the observations equal to Country*Census observations.  From here we can calculate latest census, etc.</span></span>
<span id="cb34-25"><a href="technical-documentation-of-spi-indicators.html#cb34-25" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">indicator_date=</span><span class="kw">as.numeric</span>(value)) <span class="op">%&gt;%</span></span>
<span id="cb34-26"><a href="technical-documentation-of-spi-indicators.html#cb34-26" aria-hidden="true"></a><span class="st">    </span><span class="kw">select</span>(<span class="st">&#39;country&#39;</span>,<span class="st">&#39;indicator_date&#39;</span>,<span class="st">&#39;input_var&#39;</span>)</span>
<span id="cb34-27"><a href="technical-documentation-of-spi-indicators.html#cb34-27" aria-hidden="true"></a>  </span>
<span id="cb34-28"><a href="technical-documentation-of-spi-indicators.html#cb34-28" aria-hidden="true"></a>    <span class="co">#append nada data on surveys</span></span>
<span id="cb34-29"><a href="technical-documentation-of-spi-indicators.html#cb34-29" aria-hidden="true"></a>  cs_df &lt;-<span class="st"> </span>cs_df <span class="op">%&gt;%</span></span>
<span id="cb34-30"><a href="technical-documentation-of-spi-indicators.html#cb34-30" aria-hidden="true"></a><span class="st">    </span><span class="kw">bind_rows</span>(<span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&#39;/4.1_SOCS/&#39;</span>, data, <span class="st">&quot;_NADA.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span> ))) <span class="op">%&gt;%</span></span>
<span id="cb34-31"><a href="technical-documentation-of-spi-indicators.html#cb34-31" aria-hidden="true"></a><span class="st">    </span><span class="kw">group_by</span>(country, indicator_date) <span class="op">%&gt;%</span></span>
<span id="cb34-32"><a href="technical-documentation-of-spi-indicators.html#cb34-32" aria-hidden="true"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">input_var=</span><span class="kw">first</span>(<span class="kw">na.omit</span>(input_var)  ),</span>
<span id="cb34-33"><a href="technical-documentation-of-spi-indicators.html#cb34-33" aria-hidden="true"></a>            <span class="dt">nada_dates=</span><span class="kw">first</span>(<span class="kw">na.omit</span>(nada_dates)  ) </span>
<span id="cb34-34"><a href="technical-documentation-of-spi-indicators.html#cb34-34" aria-hidden="true"></a>             )</span>
<span id="cb34-35"><a href="technical-documentation-of-spi-indicators.html#cb34-35" aria-hidden="true"></a>    </span>
<span id="cb34-36"><a href="technical-documentation-of-spi-indicators.html#cb34-36" aria-hidden="true"></a>  </span>
<span id="cb34-37"><a href="technical-documentation-of-spi-indicators.html#cb34-37" aria-hidden="true"></a>  <span class="co">#Now calculate our SPI score for this indicator</span></span>
<span id="cb34-38"><a href="technical-documentation-of-spi-indicators.html#cb34-38" aria-hidden="true"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2004</span><span class="op">:</span><span class="dv">2019</span>) {</span>
<span id="cb34-39"><a href="technical-documentation-of-spi-indicators.html#cb34-39" aria-hidden="true"></a>   temp &lt;-<span class="st"> </span>cs_df <span class="op">%&gt;%</span></span>
<span id="cb34-40"><a href="technical-documentation-of-spi-indicators.html#cb34-40" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">date=</span>i) <span class="op">%&gt;%</span></span>
<span id="cb34-41"><a href="technical-documentation-of-spi-indicators.html#cb34-41" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">recency_indicator=</span>((date<span class="op">&gt;=</span>indicator_date)) ) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#restrict to censuses that do not occur after reference date</span></span>
<span id="cb34-42"><a href="technical-documentation-of-spi-indicators.html#cb34-42" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">indicator_date=</span><span class="kw">if_else</span>(recency_indicator<span class="op">==</span><span class="ot">TRUE</span>, indicator_date, <span class="kw">as.numeric</span>(<span class="ot">NA</span>))) <span class="op">%&gt;%</span></span>
<span id="cb34-43"><a href="technical-documentation-of-spi-indicators.html#cb34-43" aria-hidden="true"></a><span class="st">    </span><span class="kw">group_by</span>(country, date) <span class="op">%&gt;%</span></span>
<span id="cb34-44"><a href="technical-documentation-of-spi-indicators.html#cb34-44" aria-hidden="true"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">last_val=</span><span class="kw">max</span>(indicator_date, <span class="dt">na.rm=</span>T),</span>
<span id="cb34-45"><a href="technical-documentation-of-spi-indicators.html#cb34-45" aria-hidden="true"></a>      <span class="dt">input_var=</span><span class="kw">first</span>(input_var),</span>
<span id="cb34-46"><a href="technical-documentation-of-spi-indicators.html#cb34-46" aria-hidden="true"></a>      <span class="dt">nada_dates=</span><span class="kw">first</span>(nada_dates)) <span class="op">%&gt;%</span></span>
<span id="cb34-47"><a href="technical-documentation-of-spi-indicators.html#cb34-47" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">indicator=</span><span class="kw">case_when</span>(</span>
<span id="cb34-48"><a href="technical-documentation-of-spi-indicators.html#cb34-48" aria-hidden="true"></a>      (date<span class="op">-</span>last_val<span class="op">&lt;=</span><span class="dv">10</span>) <span class="op">&amp;</span><span class="st"> </span>(date<span class="op">-</span>last_val<span class="op">&gt;</span><span class="dv">0</span>) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb34-49"><a href="technical-documentation-of-spi-indicators.html#cb34-49" aria-hidden="true"></a>      (date<span class="op">-</span>last_val<span class="op">&lt;=</span><span class="dv">20</span>) <span class="op">&amp;</span><span class="st"> </span>(date<span class="op">-</span>last_val<span class="op">&gt;</span><span class="dv">0</span>) <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>,</span>
<span id="cb34-50"><a href="technical-documentation-of-spi-indicators.html#cb34-50" aria-hidden="true"></a>      <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> )</span>
<span id="cb34-51"><a href="technical-documentation-of-spi-indicators.html#cb34-51" aria-hidden="true"></a>    )  <span class="op">%&gt;%</span></span>
<span id="cb34-52"><a href="technical-documentation-of-spi-indicators.html#cb34-52" aria-hidden="true"></a><span class="st">     </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb34-53"><a href="technical-documentation-of-spi-indicators.html#cb34-53" aria-hidden="true"></a><span class="st">    </span><span class="kw">select</span>(<span class="kw">c</span>( <span class="st">&#39;country&#39;</span>, <span class="st">&#39;date&#39;</span>, <span class="st">&#39;input_var&#39;</span>,<span class="st">&#39;nada_dates&#39;</span>, <span class="st">&#39;indicator&#39;</span>)  ) <span class="op">%&gt;%</span></span>
<span id="cb34-54"><a href="technical-documentation-of-spi-indicators.html#cb34-54" aria-hidden="true"></a><span class="st">    </span><span class="kw">arrange</span>(date, country)</span>
<span id="cb34-55"><a href="technical-documentation-of-spi-indicators.html#cb34-55" aria-hidden="true"></a></span>
<span id="cb34-56"><a href="technical-documentation-of-spi-indicators.html#cb34-56" aria-hidden="true"></a>    <span class="kw">assign</span>(<span class="kw">paste</span>(<span class="st">&#39;temp&#39;</span>,i,<span class="dt">sep=</span><span class="st">&quot;_&quot;</span>), temp)</span>
<span id="cb34-57"><a href="technical-documentation-of-spi-indicators.html#cb34-57" aria-hidden="true"></a>  }</span>
<span id="cb34-58"><a href="technical-documentation-of-spi-indicators.html#cb34-58" aria-hidden="true"></a></span>
<span id="cb34-59"><a href="technical-documentation-of-spi-indicators.html#cb34-59" aria-hidden="true"></a>  temp &lt;-<span class="st"> </span>temp_<span class="dv">2019</span></span>
<span id="cb34-60"><a href="technical-documentation-of-spi-indicators.html#cb34-60" aria-hidden="true"></a>  </span>
<span id="cb34-61"><a href="technical-documentation-of-spi-indicators.html#cb34-61" aria-hidden="true"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2004</span><span class="op">:</span><span class="dv">2018</span>) {</span>
<span id="cb34-62"><a href="technical-documentation-of-spi-indicators.html#cb34-62" aria-hidden="true"></a>    temp &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(temp, <span class="kw">get</span>(<span class="kw">paste</span>(<span class="st">&#39;temp&#39;</span>,i,<span class="dt">sep=</span><span class="st">&quot;_&quot;</span>)))</span>
<span id="cb34-63"><a href="technical-documentation-of-spi-indicators.html#cb34-63" aria-hidden="true"></a>  }</span>
<span id="cb34-64"><a href="technical-documentation-of-spi-indicators.html#cb34-64" aria-hidden="true"></a>  temp</span>
<span id="cb34-65"><a href="technical-documentation-of-spi-indicators.html#cb34-65" aria-hidden="true"></a>}</span>
<span id="cb34-66"><a href="technical-documentation-of-spi-indicators.html#cb34-66" aria-hidden="true"></a></span>
<span id="cb34-67"><a href="technical-documentation-of-spi-indicators.html#cb34-67" aria-hidden="true"></a></span>
<span id="cb34-68"><a href="technical-documentation-of-spi-indicators.html#cb34-68" aria-hidden="true"></a></span>
<span id="cb34-69"><a href="technical-documentation-of-spi-indicators.html#cb34-69" aria-hidden="true"></a>survey_fun  &lt;-<span class="st"> </span><span class="cf">function</span>(data, input_var) {</span>
<span id="cb34-70"><a href="technical-documentation-of-spi-indicators.html#cb34-70" aria-hidden="true"></a>  </span>
<span id="cb34-71"><a href="technical-documentation-of-spi-indicators.html#cb34-71" aria-hidden="true"></a>  data &lt;-<span class="st"> </span>data</span>
<span id="cb34-72"><a href="technical-documentation-of-spi-indicators.html#cb34-72" aria-hidden="true"></a>  input_var &lt;-<span class="st"> </span>input_var</span>
<span id="cb34-73"><a href="technical-documentation-of-spi-indicators.html#cb34-73" aria-hidden="true"></a></span>
<span id="cb34-74"><a href="technical-documentation-of-spi-indicators.html#cb34-74" aria-hidden="true"></a>  <span class="co">#read in csv file that was manually collected.</span></span>
<span id="cb34-75"><a href="technical-documentation-of-spi-indicators.html#cb34-75" aria-hidden="true"></a>  cs_df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&#39;/4.1_SOCS/raw/&#39;</span>, data, <span class="st">&quot;_145.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span> )) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#bring in data collected for an original set of 145 countries, then an additional 10, then several more high income counries.</span></span>
<span id="cb34-76"><a href="technical-documentation-of-spi-indicators.html#cb34-76" aria-hidden="true"></a><span class="st">    </span><span class="kw">bind_rows</span>(<span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&#39;/4.1_SOCS/raw/&#39;</span>, data, <span class="st">&quot;_10.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span> ))) <span class="op">%&gt;%</span></span>
<span id="cb34-77"><a href="technical-documentation-of-spi-indicators.html#cb34-77" aria-hidden="true"></a><span class="st">    </span><span class="kw">bind_rows</span>(<span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&#39;/4.1_SOCS/raw/&#39;</span>, data, <span class="st">&quot;_high.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span> ))) <span class="op">%&gt;%</span><span class="st">            </span></span>
<span id="cb34-78"><a href="technical-documentation-of-spi-indicators.html#cb34-78" aria-hidden="true"></a><span class="st">    </span><span class="kw">write_excel_csv</span>(<span class="dt">path =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&#39;/4.1_SOCS/&#39;</span>, data, <span class="st">&quot;_manual.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span> )) <span class="op">%&gt;%</span></span>
<span id="cb34-79"><a href="technical-documentation-of-spi-indicators.html#cb34-79" aria-hidden="true"></a><span class="st">    </span><span class="kw">distinct</span>() <span class="op">%&gt;%</span></span>
<span id="cb34-80"><a href="technical-documentation-of-spi-indicators.html#cb34-80" aria-hidden="true"></a><span class="st">    </span><span class="kw">group_by</span>( country) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb34-81"><a href="technical-documentation-of-spi-indicators.html#cb34-81" aria-hidden="true"></a><span class="st">    </span><span class="kw">rename</span>(<span class="dt">input_var =</span> <span class="op">!!</span><span class="st"> </span>input_var) <span class="op">%&gt;%</span></span>
<span id="cb34-82"><a href="technical-documentation-of-spi-indicators.html#cb34-82" aria-hidden="true"></a><span class="st">    </span><span class="kw">nest</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># The next chunk of code will split our string with the years of the census (i.e. &quot;2000, 2010&quot;) in to separate rows.  We will then aggregate up.</span></span>
<span id="cb34-83"><a href="technical-documentation-of-spi-indicators.html#cb34-83" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(</span>
<span id="cb34-84"><a href="technical-documentation-of-spi-indicators.html#cb34-84" aria-hidden="true"></a>      <span class="dt">temp_col =</span> <span class="kw">map</span>(</span>
<span id="cb34-85"><a href="technical-documentation-of-spi-indicators.html#cb34-85" aria-hidden="true"></a>        data, </span>
<span id="cb34-86"><a href="technical-documentation-of-spi-indicators.html#cb34-86" aria-hidden="true"></a>        <span class="op">~</span><span class="st"> </span><span class="kw">str_extract_all</span>(.x<span class="op">$</span>input_var, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d{4}&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb34-87"><a href="technical-documentation-of-spi-indicators.html#cb34-87" aria-hidden="true"></a><span class="st">          </span><span class="kw">flatten</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb34-88"><a href="technical-documentation-of-spi-indicators.html#cb34-88" aria-hidden="true"></a><span class="st">          </span><span class="kw">map_chr</span>(<span class="op">~</span><span class="kw">return</span>(.x)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb34-89"><a href="technical-documentation-of-spi-indicators.html#cb34-89" aria-hidden="true"></a><span class="st">          </span><span class="kw">as_tibble</span>()</span>
<span id="cb34-90"><a href="technical-documentation-of-spi-indicators.html#cb34-90" aria-hidden="true"></a>      )</span>
<span id="cb34-91"><a href="technical-documentation-of-spi-indicators.html#cb34-91" aria-hidden="true"></a>    ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb34-92"><a href="technical-documentation-of-spi-indicators.html#cb34-92" aria-hidden="true"></a><span class="st">    </span><span class="kw">unnest</span>(<span class="dt">keep_empty =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Now we have a database with the observations equal to Country*Census observations.  From here we can calculate latest census, etc.</span></span>
<span id="cb34-93"><a href="technical-documentation-of-spi-indicators.html#cb34-93" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">indicator_date=</span><span class="kw">as.numeric</span>(value)) <span class="op">%&gt;%</span></span>
<span id="cb34-94"><a href="technical-documentation-of-spi-indicators.html#cb34-94" aria-hidden="true"></a><span class="st">    </span><span class="kw">select</span>(<span class="st">&#39;country&#39;</span>,<span class="st">&#39;indicator_date&#39;</span>,<span class="st">&#39;input_var&#39;</span>)</span>
<span id="cb34-95"><a href="technical-documentation-of-spi-indicators.html#cb34-95" aria-hidden="true"></a>  </span>
<span id="cb34-96"><a href="technical-documentation-of-spi-indicators.html#cb34-96" aria-hidden="true"></a>  <span class="co">#append nada data on surveys</span></span>
<span id="cb34-97"><a href="technical-documentation-of-spi-indicators.html#cb34-97" aria-hidden="true"></a>  cs_df &lt;-<span class="st"> </span>cs_df <span class="op">%&gt;%</span></span>
<span id="cb34-98"><a href="technical-documentation-of-spi-indicators.html#cb34-98" aria-hidden="true"></a><span class="st">    </span><span class="kw">bind_rows</span>(<span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&#39;/4.1_SOCS/&#39;</span>, data, <span class="st">&quot;_NADA.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span> ),</span>
<span id="cb34-99"><a href="technical-documentation-of-spi-indicators.html#cb34-99" aria-hidden="true"></a>                       <span class="dt">col_types =</span> <span class="kw">list</span>(<span class="kw">col_character</span>(),<span class="kw">col_double</span>(), <span class="kw">col_character</span>()))) <span class="op">%&gt;%</span></span>
<span id="cb34-100"><a href="technical-documentation-of-spi-indicators.html#cb34-100" aria-hidden="true"></a><span class="st">    </span><span class="kw">group_by</span>(country, indicator_date) <span class="op">%&gt;%</span></span>
<span id="cb34-101"><a href="technical-documentation-of-spi-indicators.html#cb34-101" aria-hidden="true"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">input_var=</span><span class="kw">first</span>(<span class="kw">na.omit</span>(input_var)  ),</span>
<span id="cb34-102"><a href="technical-documentation-of-spi-indicators.html#cb34-102" aria-hidden="true"></a>            <span class="dt">nada_dates=</span><span class="kw">first</span>(<span class="kw">na.omit</span>(nada_dates)  ) </span>
<span id="cb34-103"><a href="technical-documentation-of-spi-indicators.html#cb34-103" aria-hidden="true"></a>             )</span>
<span id="cb34-104"><a href="technical-documentation-of-spi-indicators.html#cb34-104" aria-hidden="true"></a>    </span>
<span id="cb34-105"><a href="technical-documentation-of-spi-indicators.html#cb34-105" aria-hidden="true"></a>  </span>
<span id="cb34-106"><a href="technical-documentation-of-spi-indicators.html#cb34-106" aria-hidden="true"></a>  <span class="co">#Now calculate our SPI score for this indicator</span></span>
<span id="cb34-107"><a href="technical-documentation-of-spi-indicators.html#cb34-107" aria-hidden="true"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2004</span><span class="op">:</span><span class="dv">2019</span>) {</span>
<span id="cb34-108"><a href="technical-documentation-of-spi-indicators.html#cb34-108" aria-hidden="true"></a>   temp &lt;-<span class="st"> </span>cs_df <span class="op">%&gt;%</span></span>
<span id="cb34-109"><a href="technical-documentation-of-spi-indicators.html#cb34-109" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">date=</span>i) <span class="op">%&gt;%</span></span>
<span id="cb34-110"><a href="technical-documentation-of-spi-indicators.html#cb34-110" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">window=</span><span class="kw">case_when</span>( <span class="co">#extend the window for more recent years.  For instance, 2019 surveys are reported with a lag, so give them two year grace period</span></span>
<span id="cb34-111"><a href="technical-documentation-of-spi-indicators.html#cb34-111" aria-hidden="true"></a>      date<span class="op">==</span><span class="dv">2019</span> <span class="op">~</span><span class="st"> </span><span class="dv">12</span>,</span>
<span id="cb34-112"><a href="technical-documentation-of-spi-indicators.html#cb34-112" aria-hidden="true"></a>      date<span class="op">==</span><span class="dv">2018</span> <span class="op">~</span><span class="st"> </span><span class="dv">11</span>,</span>
<span id="cb34-113"><a href="technical-documentation-of-spi-indicators.html#cb34-113" aria-hidden="true"></a>      <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">10</span></span>
<span id="cb34-114"><a href="technical-documentation-of-spi-indicators.html#cb34-114" aria-hidden="true"></a>    )) <span class="op">%&gt;%</span></span>
<span id="cb34-115"><a href="technical-documentation-of-spi-indicators.html#cb34-115" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">recency_indicator=</span>((date<span class="op">-</span>indicator_date<span class="op">&lt;=</span>window) <span class="op">&amp;</span><span class="st"> </span>(date<span class="op">-</span>indicator_date<span class="op">&gt;=</span><span class="dv">0</span>)) ) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#restrict to surveys inside 10 year period </span></span>
<span id="cb34-116"><a href="technical-documentation-of-spi-indicators.html#cb34-116" aria-hidden="true"></a><span class="st">    </span><span class="kw">group_by</span>( country, date) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#group by country and create indicator for how many surveys over 10 year period</span></span>
<span id="cb34-117"><a href="technical-documentation-of-spi-indicators.html#cb34-117" aria-hidden="true"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">indicator=</span><span class="kw">case_when</span>(</span>
<span id="cb34-118"><a href="technical-documentation-of-spi-indicators.html#cb34-118" aria-hidden="true"></a>      <span class="kw">sum</span>(recency_indicator)<span class="op">&gt;=</span><span class="dv">3</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb34-119"><a href="technical-documentation-of-spi-indicators.html#cb34-119" aria-hidden="true"></a>      <span class="kw">sum</span>(recency_indicator)<span class="op">==</span><span class="dv">2</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.6</span>, </span>
<span id="cb34-120"><a href="technical-documentation-of-spi-indicators.html#cb34-120" aria-hidden="true"></a>      <span class="kw">sum</span>(recency_indicator)<span class="op">==</span><span class="dv">1</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.3</span>, </span>
<span id="cb34-121"><a href="technical-documentation-of-spi-indicators.html#cb34-121" aria-hidden="true"></a>      <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> ),</span>
<span id="cb34-122"><a href="technical-documentation-of-spi-indicators.html#cb34-122" aria-hidden="true"></a>      <span class="dt">input_var=</span><span class="kw">first</span>(input_var),</span>
<span id="cb34-123"><a href="technical-documentation-of-spi-indicators.html#cb34-123" aria-hidden="true"></a>      <span class="dt">nada_dates=</span><span class="kw">first</span>(nada_dates)) <span class="op">%&gt;%</span></span>
<span id="cb34-124"><a href="technical-documentation-of-spi-indicators.html#cb34-124" aria-hidden="true"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb34-125"><a href="technical-documentation-of-spi-indicators.html#cb34-125" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="kw">c</span>( <span class="st">&#39;country&#39;</span>, <span class="st">&#39;date&#39;</span>, <span class="st">&#39;input_var&#39;</span>,<span class="st">&#39;nada_dates&#39;</span>, <span class="st">&#39;indicator&#39;</span>)  ) <span class="op">%&gt;%</span></span>
<span id="cb34-126"><a href="technical-documentation-of-spi-indicators.html#cb34-126" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, country)</span>
<span id="cb34-127"><a href="technical-documentation-of-spi-indicators.html#cb34-127" aria-hidden="true"></a></span>
<span id="cb34-128"><a href="technical-documentation-of-spi-indicators.html#cb34-128" aria-hidden="true"></a>    <span class="kw">assign</span>(<span class="kw">paste</span>(<span class="st">&#39;temp&#39;</span>,i,<span class="dt">sep=</span><span class="st">&quot;_&quot;</span>), temp)</span>
<span id="cb34-129"><a href="technical-documentation-of-spi-indicators.html#cb34-129" aria-hidden="true"></a>  }</span>
<span id="cb34-130"><a href="technical-documentation-of-spi-indicators.html#cb34-130" aria-hidden="true"></a></span>
<span id="cb34-131"><a href="technical-documentation-of-spi-indicators.html#cb34-131" aria-hidden="true"></a>  temp &lt;-<span class="st"> </span>temp_<span class="dv">2019</span></span>
<span id="cb34-132"><a href="technical-documentation-of-spi-indicators.html#cb34-132" aria-hidden="true"></a>  </span>
<span id="cb34-133"><a href="technical-documentation-of-spi-indicators.html#cb34-133" aria-hidden="true"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2004</span><span class="op">:</span><span class="dv">2018</span>) {</span>
<span id="cb34-134"><a href="technical-documentation-of-spi-indicators.html#cb34-134" aria-hidden="true"></a>    temp &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(temp, <span class="kw">get</span>(<span class="kw">paste</span>(<span class="st">&#39;temp&#39;</span>,i,<span class="dt">sep=</span><span class="st">&quot;_&quot;</span>)))</span>
<span id="cb34-135"><a href="technical-documentation-of-spi-indicators.html#cb34-135" aria-hidden="true"></a>  }</span>
<span id="cb34-136"><a href="technical-documentation-of-spi-indicators.html#cb34-136" aria-hidden="true"></a>  temp</span>
<span id="cb34-137"><a href="technical-documentation-of-spi-indicators.html#cb34-137" aria-hidden="true"></a>}</span>
<span id="cb34-138"><a href="technical-documentation-of-spi-indicators.html#cb34-138" aria-hidden="true"></a></span>
<span id="cb34-139"><a href="technical-documentation-of-spi-indicators.html#cb34-139" aria-hidden="true"></a></span>
<span id="cb34-140"><a href="technical-documentation-of-spi-indicators.html#cb34-140" aria-hidden="true"></a><span class="co">#Population Censuses</span></span>
<span id="cb34-141"><a href="technical-documentation-of-spi-indicators.html#cb34-141" aria-hidden="true"></a>cs1_df &lt;-pop_census_df <span class="op">%&gt;%</span></span>
<span id="cb34-142"><a href="technical-documentation-of-spi-indicators.html#cb34-142" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">RAW.D4.1.1.POPU.CENSUS=</span>Latest.population.census,</span>
<span id="cb34-143"><a href="technical-documentation-of-spi-indicators.html#cb34-143" aria-hidden="true"></a>         <span class="dt">SPI.D4.1.1.POPU=</span>indicator) <span class="op">%&gt;%</span></span>
<span id="cb34-144"><a href="technical-documentation-of-spi-indicators.html#cb34-144" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, date, <span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;RAW&quot;</span>))</span>
<span id="cb34-145"><a href="technical-documentation-of-spi-indicators.html#cb34-145" aria-hidden="true"></a></span>
<span id="cb34-146"><a href="technical-documentation-of-spi-indicators.html#cb34-146" aria-hidden="true"></a><span class="co">#Agriculture census  </span></span>
<span id="cb34-147"><a href="technical-documentation-of-spi-indicators.html#cb34-147" aria-hidden="true"></a>cs2_df &lt;-ag_census_df <span class="op">%&gt;%</span></span>
<span id="cb34-148"><a href="technical-documentation-of-spi-indicators.html#cb34-148" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">RAW.D4.1.2.AGRI.CENSUS=</span>Latest.agricultural.census,</span>
<span id="cb34-149"><a href="technical-documentation-of-spi-indicators.html#cb34-149" aria-hidden="true"></a>         <span class="dt">SPI.D4.1.2.AGRI=</span>indicator) <span class="op">%&gt;%</span></span>
<span id="cb34-150"><a href="technical-documentation-of-spi-indicators.html#cb34-150" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, date, <span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;RAW&quot;</span>))</span>
<span id="cb34-151"><a href="technical-documentation-of-spi-indicators.html#cb34-151" aria-hidden="true"></a></span>
<span id="cb34-152"><a href="technical-documentation-of-spi-indicators.html#cb34-152" aria-hidden="true"></a><span class="co">#Business/establishment census </span></span>
<span id="cb34-153"><a href="technical-documentation-of-spi-indicators.html#cb34-153" aria-hidden="true"></a>cs3_df &lt;-<span class="kw">census_fun</span>(<span class="st">&#39;D4.1.3.CEN.BIZZ&#39;</span>, <span class="st">&#39;BIZZ.CENSUS&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb34-154"><a href="technical-documentation-of-spi-indicators.html#cb34-154" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">RAW.D4.1.3.BIZZ.CENSUS=</span>input_var,</span>
<span id="cb34-155"><a href="technical-documentation-of-spi-indicators.html#cb34-155" aria-hidden="true"></a>         <span class="dt">RAW.D4.1.3.BIZZ.CENSUS_nada=</span>nada_dates,</span>
<span id="cb34-156"><a href="technical-documentation-of-spi-indicators.html#cb34-156" aria-hidden="true"></a>         <span class="dt">SPI.D4.1.3.BIZZ=</span>indicator) <span class="op">%&gt;%</span></span>
<span id="cb34-157"><a href="technical-documentation-of-spi-indicators.html#cb34-157" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(country, date, <span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;RAW&quot;</span>))</span>
<span id="cb34-158"><a href="technical-documentation-of-spi-indicators.html#cb34-158" aria-hidden="true"></a></span>
<span id="cb34-159"><a href="technical-documentation-of-spi-indicators.html#cb34-159" aria-hidden="true"></a><span class="co">#Household Survey on income/ consumption/ expenditure/ budget/ Integrated Survey</span></span>
<span id="cb34-160"><a href="technical-documentation-of-spi-indicators.html#cb34-160" aria-hidden="true"></a>cs4_df &lt;-<span class="kw">survey_fun</span>(<span class="st">&#39;D4.1.4.SVY.HOUS&#39;</span>, <span class="st">&#39;HOUS.SURVEYS&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb34-161"><a href="technical-documentation-of-spi-indicators.html#cb34-161" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">RAW.D4.1.4.HOUS.SURVEYS=</span>input_var,</span>
<span id="cb34-162"><a href="technical-documentation-of-spi-indicators.html#cb34-162" aria-hidden="true"></a>         <span class="dt">RAW.D4.1.4.HOUS.SURVEYS_nada=</span>nada_dates,</span>
<span id="cb34-163"><a href="technical-documentation-of-spi-indicators.html#cb34-163" aria-hidden="true"></a>         <span class="dt">SPI.D4.1.4.HOUS=</span>indicator) <span class="op">%&gt;%</span></span>
<span id="cb34-164"><a href="technical-documentation-of-spi-indicators.html#cb34-164" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(country, date, <span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;RAW&quot;</span>))</span>
<span id="cb34-165"><a href="technical-documentation-of-spi-indicators.html#cb34-165" aria-hidden="true"></a></span>
<span id="cb34-166"><a href="technical-documentation-of-spi-indicators.html#cb34-166" aria-hidden="true"></a><span class="co">#Agriculture survey </span></span>
<span id="cb34-167"><a href="technical-documentation-of-spi-indicators.html#cb34-167" aria-hidden="true"></a>cs5_df &lt;-<span class="kw">survey_fun</span>(<span class="st">&#39;D4.1.5.SVY.AGRI&#39;</span>, <span class="st">&#39;AGRI.SURVEYS&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb34-168"><a href="technical-documentation-of-spi-indicators.html#cb34-168" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">RAW.D4.1.5.AGRI.SURVEYS=</span>input_var,</span>
<span id="cb34-169"><a href="technical-documentation-of-spi-indicators.html#cb34-169" aria-hidden="true"></a>         <span class="dt">RAW.D4.1.5.AGRI.SURVEYS_nada=</span>nada_dates,</span>
<span id="cb34-170"><a href="technical-documentation-of-spi-indicators.html#cb34-170" aria-hidden="true"></a>         <span class="dt">SPI.D4.1.5.AGSVY=</span>indicator) <span class="op">%&gt;%</span></span>
<span id="cb34-171"><a href="technical-documentation-of-spi-indicators.html#cb34-171" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(country, date, <span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;RAW&quot;</span>))</span>
<span id="cb34-172"><a href="technical-documentation-of-spi-indicators.html#cb34-172" aria-hidden="true"></a></span>
<span id="cb34-173"><a href="technical-documentation-of-spi-indicators.html#cb34-173" aria-hidden="true"></a><span class="co">#Labor Force Survey </span></span>
<span id="cb34-174"><a href="technical-documentation-of-spi-indicators.html#cb34-174" aria-hidden="true"></a>cs6_df &lt;-<span class="kw">survey_fun</span>(<span class="st">&#39;D4.1.6.SVY.LABR&#39;</span>, <span class="st">&#39;LABR.SURVEYS&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb34-175"><a href="technical-documentation-of-spi-indicators.html#cb34-175" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">RAW.D4.1.6.LABR.SURVEYS=</span>input_var,</span>
<span id="cb34-176"><a href="technical-documentation-of-spi-indicators.html#cb34-176" aria-hidden="true"></a>         <span class="dt">RAW.D4.1.6.LABR.SURVEYS_nada=</span>nada_dates,</span>
<span id="cb34-177"><a href="technical-documentation-of-spi-indicators.html#cb34-177" aria-hidden="true"></a>         <span class="dt">SPI.D4.1.6.LABR=</span>indicator) <span class="op">%&gt;%</span></span>
<span id="cb34-178"><a href="technical-documentation-of-spi-indicators.html#cb34-178" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(country, date, <span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;RAW&quot;</span>))</span>
<span id="cb34-179"><a href="technical-documentation-of-spi-indicators.html#cb34-179" aria-hidden="true"></a></span>
<span id="cb34-180"><a href="technical-documentation-of-spi-indicators.html#cb34-180" aria-hidden="true"></a><span class="co">#Health/Demographic survey</span></span>
<span id="cb34-181"><a href="technical-documentation-of-spi-indicators.html#cb34-181" aria-hidden="true"></a>cs7_df &lt;-<span class="kw">survey_fun</span>(<span class="st">&#39;D4.1.7.SVY.HLTH&#39;</span>, <span class="st">&#39;HLTH.SURVEYS&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb34-182"><a href="technical-documentation-of-spi-indicators.html#cb34-182" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">RAW.D4.1.7.HLTH.SURVEYS=</span>input_var,</span>
<span id="cb34-183"><a href="technical-documentation-of-spi-indicators.html#cb34-183" aria-hidden="true"></a>         <span class="dt">RAW.D4.1.7.HLTH.SURVEYS_nada=</span>nada_dates,</span>
<span id="cb34-184"><a href="technical-documentation-of-spi-indicators.html#cb34-184" aria-hidden="true"></a>         <span class="dt">SPI.D4.1.7.HLTH=</span>indicator) <span class="op">%&gt;%</span></span>
<span id="cb34-185"><a href="technical-documentation-of-spi-indicators.html#cb34-185" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(country, date, <span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;RAW&quot;</span>))</span>
<span id="cb34-186"><a href="technical-documentation-of-spi-indicators.html#cb34-186" aria-hidden="true"></a></span>
<span id="cb34-187"><a href="technical-documentation-of-spi-indicators.html#cb34-187" aria-hidden="true"></a><span class="co">#Business/establishment survey  </span></span>
<span id="cb34-188"><a href="technical-documentation-of-spi-indicators.html#cb34-188" aria-hidden="true"></a>cs8_df &lt;-<span class="kw">survey_fun</span>(<span class="st">&#39;D4.1.8.SVY.BIZZ&#39;</span>, <span class="st">&#39;BIZZ.SURVEYS&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb34-189"><a href="technical-documentation-of-spi-indicators.html#cb34-189" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">RAW.D4.1.8.BIZZ.SURVEYS=</span>input_var,</span>
<span id="cb34-190"><a href="technical-documentation-of-spi-indicators.html#cb34-190" aria-hidden="true"></a>         <span class="dt">RAW.D4.1.8.BIZZ.SURVEYS_nada=</span>nada_dates,</span>
<span id="cb34-191"><a href="technical-documentation-of-spi-indicators.html#cb34-191" aria-hidden="true"></a>         <span class="dt">SPI.D4.1.8.BZSVY=</span>indicator) <span class="op">%&gt;%</span></span>
<span id="cb34-192"><a href="technical-documentation-of-spi-indicators.html#cb34-192" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(country, date, <span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;RAW&quot;</span>))</span>
<span id="cb34-193"><a href="technical-documentation-of-spi-indicators.html#cb34-193" aria-hidden="true"></a></span>
<span id="cb34-194"><a href="technical-documentation-of-spi-indicators.html#cb34-194" aria-hidden="true"></a></span>
<span id="cb34-195"><a href="technical-documentation-of-spi-indicators.html#cb34-195" aria-hidden="true"></a><span class="co">#brind all censuses and surveys together</span></span>
<span id="cb34-196"><a href="technical-documentation-of-spi-indicators.html#cb34-196" aria-hidden="true"></a>cs_df &lt;-<span class="st"> </span>spi_df_empty <span class="op">%&gt;%</span></span>
<span id="cb34-197"><a href="technical-documentation-of-spi-indicators.html#cb34-197" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(cs1_df) <span class="op">%&gt;%</span></span>
<span id="cb34-198"><a href="technical-documentation-of-spi-indicators.html#cb34-198" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(cs2_df) <span class="op">%&gt;%</span></span>
<span id="cb34-199"><a href="technical-documentation-of-spi-indicators.html#cb34-199" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(cs3_df) <span class="op">%&gt;%</span></span>
<span id="cb34-200"><a href="technical-documentation-of-spi-indicators.html#cb34-200" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(cs4_df) <span class="op">%&gt;%</span></span>
<span id="cb34-201"><a href="technical-documentation-of-spi-indicators.html#cb34-201" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(cs5_df) <span class="op">%&gt;%</span></span>
<span id="cb34-202"><a href="technical-documentation-of-spi-indicators.html#cb34-202" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(cs6_df) <span class="op">%&gt;%</span></span>
<span id="cb34-203"><a href="technical-documentation-of-spi-indicators.html#cb34-203" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(cs7_df) <span class="op">%&gt;%</span></span>
<span id="cb34-204"><a href="technical-documentation-of-spi-indicators.html#cb34-204" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(cs8_df) </span>
<span id="cb34-205"><a href="technical-documentation-of-spi-indicators.html#cb34-205" aria-hidden="true"></a></span>
<span id="cb34-206"><a href="technical-documentation-of-spi-indicators.html#cb34-206" aria-hidden="true"></a><span class="co">#add to spi databases</span></span>
<span id="cb34-207"><a href="technical-documentation-of-spi-indicators.html#cb34-207" aria-hidden="true"></a>spi_df &lt;-<span class="st"> </span>spi_df <span class="op">%&gt;%</span></span>
<span id="cb34-208"><a href="technical-documentation-of-spi-indicators.html#cb34-208" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(cs_df)</span>
<span id="cb34-209"><a href="technical-documentation-of-spi-indicators.html#cb34-209" aria-hidden="true"></a></span>
<span id="cb34-210"><a href="technical-documentation-of-spi-indicators.html#cb34-210" aria-hidden="true"></a><span class="co">#now do the figures </span></span>
<span id="cb34-211"><a href="technical-documentation-of-spi-indicators.html#cb34-211" aria-hidden="true"></a>cs_df_map &lt;-<span class="st"> </span>cs_df <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(SPI.D4.<span class="dv">1</span>.<span class="fl">1.</span>POPU))</span>
<span id="cb34-212"><a href="technical-documentation-of-spi-indicators.html#cb34-212" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;cs_df_map&#39;</span>, <span class="st">&#39;SPI.D4.1.1.POPU&#39;</span>, <span class="st">&#39;Population Census Available in Past 20 Years in 2019&#39;</span> )</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/cs-1.png" width="960" /><img src="SPI-book_files/figure-html/cs-2.png" width="960" /><img src="SPI-book_files/figure-html/cs-3.png" width="960" /><img src="SPI-book_files/figure-html/cs-4.png" width="960" /></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="technical-documentation-of-spi-indicators.html#cb35-1" aria-hidden="true"></a>cs_df_map &lt;-<span class="st"> </span>cs_df <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(SPI.D4.<span class="dv">1</span>.<span class="fl">2.</span>AGRI))</span>
<span id="cb35-2"><a href="technical-documentation-of-spi-indicators.html#cb35-2" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;cs_df_map&#39;</span>, <span class="st">&#39;SPI.D4.1.2.AGRI&#39;</span>, <span class="st">&#39;Agriculture Census Available in Past 20 Years in 2019&#39;</span> )</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/cs-5.png" width="960" /><img src="SPI-book_files/figure-html/cs-6.png" width="960" /><img src="SPI-book_files/figure-html/cs-7.png" width="960" /><img src="SPI-book_files/figure-html/cs-8.png" width="960" /></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="technical-documentation-of-spi-indicators.html#cb36-1" aria-hidden="true"></a>cs_df_map &lt;-<span class="st"> </span>cs_df <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(SPI.D4.<span class="dv">1</span>.<span class="fl">3.</span>BIZZ))</span>
<span id="cb36-2"><a href="technical-documentation-of-spi-indicators.html#cb36-2" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;cs_df_map&#39;</span>, <span class="st">&#39;SPI.D4.1.3.BIZZ&#39;</span>, <span class="st">&#39;Business/Establishment Census Available in Past 20 Years in 2019&#39;</span> )</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/cs-9.png" width="960" /><img src="SPI-book_files/figure-html/cs-10.png" width="960" /><img src="SPI-book_files/figure-html/cs-11.png" width="960" /><img src="SPI-book_files/figure-html/cs-12.png" width="960" /></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="technical-documentation-of-spi-indicators.html#cb37-1" aria-hidden="true"></a>cs_df_map &lt;-<span class="st"> </span>cs_df <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(SPI.D4.<span class="dv">1</span>.<span class="fl">4.</span>HOUS))</span>
<span id="cb37-2"><a href="technical-documentation-of-spi-indicators.html#cb37-2" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;cs_df_map&#39;</span>, <span class="st">&#39;SPI.D4.1.4.HOUS&#39;</span>, <span class="st">&#39;Household Survey Availablility in Past 10 Years in 2019&#39;</span> )</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/cs-13.png" width="960" /><img src="SPI-book_files/figure-html/cs-14.png" width="960" /><img src="SPI-book_files/figure-html/cs-15.png" width="960" /><img src="SPI-book_files/figure-html/cs-16.png" width="960" /></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="technical-documentation-of-spi-indicators.html#cb38-1" aria-hidden="true"></a>cs_df_map &lt;-<span class="st"> </span>cs_df <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(SPI.D4.<span class="dv">1</span>.<span class="fl">5.</span>AGSVY))</span>
<span id="cb38-2"><a href="technical-documentation-of-spi-indicators.html#cb38-2" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;cs_df_map&#39;</span>, <span class="st">&#39;SPI.D4.1.5.AGSVY&#39;</span>, <span class="st">&#39;Agriculture Survey Availablility in Past 10 Years in 2019&#39;</span> )</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/cs-17.png" width="960" /><img src="SPI-book_files/figure-html/cs-18.png" width="960" /><img src="SPI-book_files/figure-html/cs-19.png" width="960" /><img src="SPI-book_files/figure-html/cs-20.png" width="960" /></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="technical-documentation-of-spi-indicators.html#cb39-1" aria-hidden="true"></a>cs_df_map &lt;-<span class="st"> </span>cs_df <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(SPI.D4.<span class="dv">1</span>.<span class="fl">6.</span>LABR))</span>
<span id="cb39-2"><a href="technical-documentation-of-spi-indicators.html#cb39-2" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;cs_df_map&#39;</span>, <span class="st">&#39;SPI.D4.1.6.LABR&#39;</span>, <span class="st">&#39;Labor Force Survey Availablility in Past 10 Years in 2019&#39;</span> )</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/cs-21.png" width="960" /><img src="SPI-book_files/figure-html/cs-22.png" width="960" /><img src="SPI-book_files/figure-html/cs-23.png" width="960" /><img src="SPI-book_files/figure-html/cs-24.png" width="960" /></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="technical-documentation-of-spi-indicators.html#cb40-1" aria-hidden="true"></a>cs_df_map &lt;-<span class="st"> </span>cs_df <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(SPI.D4.<span class="dv">1</span>.<span class="fl">7.</span>HLTH))</span>
<span id="cb40-2"><a href="technical-documentation-of-spi-indicators.html#cb40-2" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;cs_df_map&#39;</span>, <span class="st">&#39;SPI.D4.1.7.HLTH&#39;</span>, <span class="st">&#39;Health Survey Availablility in Past 10 Years in 2019&#39;</span> )</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/cs-25.png" width="960" /><img src="SPI-book_files/figure-html/cs-26.png" width="960" /><img src="SPI-book_files/figure-html/cs-27.png" width="960" /><img src="SPI-book_files/figure-html/cs-28.png" width="960" /></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="technical-documentation-of-spi-indicators.html#cb41-1" aria-hidden="true"></a>cs_df_map &lt;-<span class="st"> </span>cs_df <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(SPI.D4.<span class="dv">1</span>.<span class="fl">8.</span>BZSVY))</span>
<span id="cb41-2"><a href="technical-documentation-of-spi-indicators.html#cb41-2" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;cs_df_map&#39;</span>, <span class="st">&#39;SPI.D4.1.8.BZSVY&#39;</span>, <span class="st">&#39;Business Survey Availablility in Past 10 Years in 2019&#39;</span> )</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/cs-29.png" width="960" /><img src="SPI-book_files/figure-html/cs-30.png" width="960" /><img src="SPI-book_files/figure-html/cs-31.png" width="960" /><img src="SPI-book_files/figure-html/cs-32.png" width="960" /></p>
</div>
</div>
<div id="indicator-4.2-administrative-data" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Indicator 4.2: administrative data</h3>
<p>The following indicator checks whether administrative data is available for the following topic areas: Social Protection, Education, Population &amp; Health, and Labor</p>
<p>Average score for CRVS indicator. Social Protection, Education, and Labor admin data indicators not included because of lack of established methodology. While our team identified several promising sources for administrative data from the World Bank’s ASPIRE team, UNESCO, and ILO, incomplete coverage across countries made us drop these indicators from our index. A major research and data collection effort is needed from all custodian agencies to fill in this information, so that a more comprehensive picture of administrative data availability can be produced.</p>
<!-- ### Social Protection Admin Data -->
<!-- -  Atlas of Social Protection Indicators of Resilience and Equity (ASPIRE) is compilation of Social Protection and Labor (SPL) indicators to analyze scope and performance of SPL programs.    -->
<!-- - ASPIRE has indicators for 136 countries on:     -->
<!--   * Social assistance    -->
<!--   * Social insurance     -->
<!--   * Labor market programs  -->
<!-- - Based on both program-level administrative data and national household survey data     -->
<!-- - Data extends from 2001 to 2018 -->
<!-- Scoring is 1 if administrative data is available to produce beneficiary counts or expenditures for any social protection and labor program, 0 otherwise.  In order to smooth out gaps in reporting, we take a moving 5 year average of the score. -->
<!-- ### Education Admin Data -->
<!-- * UNESCO UIS has database containing data we can use on administrative data systems.  Database is accessible using the UIS bulk download service at https://apiportal.uis.unesco.org/bdds.  Data was last updated on September 29, 2020.   -->
<!-- * We score countries based on whether there is: -->
<!--   * Data tracking SDG 4.1.2 Administration of a nationally-representative learning assessment (a) in Grade 2 or 3; (b) at the end of primary education; and (c) at the end of lower secondary education     -->
<!--   <!-- * Data tracking whether countries produce the following from administrative data sources: -->
<p>–&gt;</p>
<!--   <!--     * Out-of-school rate by school age and sex -->
<p>–&gt;
<!--   <!--     * 4.2.2 Participation rate in organized learning (one year before the official primary entry age), by sex --> –&gt;</p>
<!-- In order to score this indicator, we calculate the fraction of the indicators that were produced in a country in a year.  In order to smooth out variation from year to year in reporting or conducting national assessments, we take a moving 5 year average. -->
<div id="population-health-admin-data" class="section level4" number="2.4.2.1">
<h4><span class="header-section-number">2.4.2.1</span> Population &amp; Health Admin Data</h4>
<ul>
<li>This indicator is formed using World Bank metadata on whether the Civil Registration and Vital Statistics (CRVS) system is complete in the country.</li>
</ul>
<p>Civil registration is the act of recording and documenting of vital events in a person’s life (including birth, marriage, divorce, adoption, and death and cause of death) and is a fundamental function of national governments. Birth registration establishes an individual’s legal identity at birth. A legal identity, name, nationality, and proof of age, are important human rights. They enable individuals to be included in various government, social and private services, and include the right to vote, etc. Vital statistics are compiled using civil registration information on these vital events. The availability of reliable and up-to-date vital statistics depends on the level of development of civil registration programs. An effective civil registration and vital statistics (CRVS) system is critical for planning and monitoring programs across several sectors.</p>
<p>Data comes from the UNSD Global SDG monitoring database and also the WDI. Scoring is as follows:<br />
1 Points. Both of at least 90% of births registered and at least 75% of deaths registered
0.5 Points. One of at least 90% of births registered or at least 75% of deaths registered
0 Points. Neither</p>
<p>Source: World Bank WDI Metadata.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="technical-documentation-of-spi-indicators.html#cb42-1" aria-hidden="true"></a><span class="co">#read in data from UNSD database on SDGs</span></span>
<span id="cb42-2"><a href="technical-documentation-of-spi-indicators.html#cb42-2" aria-hidden="true"></a>df_birth &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file=</span><span class="kw">paste</span>(raw_dir, <span class="st">&#39;4.2_SOAD&#39;</span>, <span class="st">&#39;SG_REG_BRTH90N.csv&#39;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Countries with birth registration data that are at least 90 percent complete (1 = YES; 0 = NO)</span></span>
<span id="cb42-3"><a href="technical-documentation-of-spi-indicators.html#cb42-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(date<span class="op">&gt;=</span><span class="dv">2015</span> <span class="op">&amp;</span><span class="st"> </span>date<span class="op">&lt;=</span><span class="dv">2019</span>) <span class="op">%&gt;%</span></span>
<span id="cb42-4"><a href="technical-documentation-of-spi-indicators.html#cb42-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(spi_df_empty) <span class="op">%&gt;%</span></span>
<span id="cb42-5"><a href="technical-documentation-of-spi-indicators.html#cb42-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">transmute</span>(</span>
<span id="cb42-6"><a href="technical-documentation-of-spi-indicators.html#cb42-6" aria-hidden="true"></a>    <span class="dt">iso3c=</span>iso3c,</span>
<span id="cb42-7"><a href="technical-documentation-of-spi-indicators.html#cb42-7" aria-hidden="true"></a>    <span class="dt">country=</span>country,</span>
<span id="cb42-8"><a href="technical-documentation-of-spi-indicators.html#cb42-8" aria-hidden="true"></a>    <span class="dt">date=</span>date,</span>
<span id="cb42-9"><a href="technical-documentation-of-spi-indicators.html#cb42-9" aria-hidden="true"></a>    <span class="dt">RAW.D4.2.3.BRTH90=</span>ind_value,</span>
<span id="cb42-10"><a href="technical-documentation-of-spi-indicators.html#cb42-10" aria-hidden="true"></a>    <span class="dt">SPI.D4.2.3.BRTH90=</span><span class="kw">if_else</span>(ind_value<span class="op">==</span><span class="dv">1</span>,<span class="fl">0.5</span>,<span class="dv">0</span>)</span>
<span id="cb42-11"><a href="technical-documentation-of-spi-indicators.html#cb42-11" aria-hidden="true"></a>  )</span>
<span id="cb42-12"><a href="technical-documentation-of-spi-indicators.html#cb42-12" aria-hidden="true"></a></span>
<span id="cb42-13"><a href="technical-documentation-of-spi-indicators.html#cb42-13" aria-hidden="true"></a>df_death &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file=</span><span class="kw">paste</span>(raw_dir, <span class="st">&#39;4.2_SOAD&#39;</span>, <span class="st">&#39;SG_REG_DETH75N.csv&#39;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Countries with death registration data that are at least 75 percent complete (1 = YES; 0 = NO)</span></span>
<span id="cb42-14"><a href="technical-documentation-of-spi-indicators.html#cb42-14" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(date<span class="op">&gt;=</span><span class="dv">2015</span><span class="op">&amp;</span><span class="st"> </span>date<span class="op">&lt;=</span><span class="dv">2019</span>) <span class="op">%&gt;%</span></span>
<span id="cb42-15"><a href="technical-documentation-of-spi-indicators.html#cb42-15" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(spi_df_empty) <span class="op">%&gt;%</span></span>
<span id="cb42-16"><a href="technical-documentation-of-spi-indicators.html#cb42-16" aria-hidden="true"></a><span class="st">    </span><span class="kw">transmute</span>(</span>
<span id="cb42-17"><a href="technical-documentation-of-spi-indicators.html#cb42-17" aria-hidden="true"></a>    <span class="dt">iso3c=</span>iso3c,</span>
<span id="cb42-18"><a href="technical-documentation-of-spi-indicators.html#cb42-18" aria-hidden="true"></a>    <span class="dt">country=</span>country,</span>
<span id="cb42-19"><a href="technical-documentation-of-spi-indicators.html#cb42-19" aria-hidden="true"></a>    <span class="dt">date=</span>date,</span>
<span id="cb42-20"><a href="technical-documentation-of-spi-indicators.html#cb42-20" aria-hidden="true"></a>    <span class="dt">RAW.D4.2.3.DETH75=</span>ind_value,</span>
<span id="cb42-21"><a href="technical-documentation-of-spi-indicators.html#cb42-21" aria-hidden="true"></a>    <span class="dt">SPI.D4.2.3.DETH75=</span><span class="kw">if_else</span>(ind_value<span class="op">==</span><span class="dv">1</span>,<span class="fl">0.5</span>,<span class="dv">0</span>)</span>
<span id="cb42-22"><a href="technical-documentation-of-spi-indicators.html#cb42-22" aria-hidden="true"></a>  )</span>
<span id="cb42-23"><a href="technical-documentation-of-spi-indicators.html#cb42-23" aria-hidden="true"></a></span>
<span id="cb42-24"><a href="technical-documentation-of-spi-indicators.html#cb42-24" aria-hidden="true"></a><span class="co">#supplement with wdi data</span></span>
<span id="cb42-25"><a href="technical-documentation-of-spi-indicators.html#cb42-25" aria-hidden="true"></a>crvs_wdi &lt;-<span class="st"> </span>WDI_metadata <span class="op">%&gt;%</span></span>
<span id="cb42-26"><a href="technical-documentation-of-spi-indicators.html#cb42-26" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(Country.Code, date, Vital.registration.complete) <span class="op">%&gt;%</span></span>
<span id="cb42-27"><a href="technical-documentation-of-spi-indicators.html#cb42-27" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">iso3c=</span>Country.Code,</span>
<span id="cb42-28"><a href="technical-documentation-of-spi-indicators.html#cb42-28" aria-hidden="true"></a>         <span class="dt">SPI.D4.2.3.WDI=</span><span class="kw">if_else</span>(<span class="kw">grepl</span>(<span class="st">&#39;Yes&#39;</span>, Vital.registration.complete),<span class="dv">1</span>,<span class="dv">0</span>),</span>
<span id="cb42-29"><a href="technical-documentation-of-spi-indicators.html#cb42-29" aria-hidden="true"></a>         <span class="dt">RAW.D4.2.3.CRVS.WDI=</span>Vital.registration.complete) <span class="op">%&gt;%</span></span>
<span id="cb42-30"><a href="technical-documentation-of-spi-indicators.html#cb42-30" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>Country.Code, <span class="op">-</span>Vital.registration.complete)</span>
<span id="cb42-31"><a href="technical-documentation-of-spi-indicators.html#cb42-31" aria-hidden="true"></a></span>
<span id="cb42-32"><a href="technical-documentation-of-spi-indicators.html#cb42-32" aria-hidden="true"></a>crvs_df &lt;-<span class="st"> </span>df_birth <span class="op">%&gt;%</span></span>
<span id="cb42-33"><a href="technical-documentation-of-spi-indicators.html#cb42-33" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(df_death) <span class="op">%&gt;%</span></span>
<span id="cb42-34"><a href="technical-documentation-of-spi-indicators.html#cb42-34" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(crvs_wdi) <span class="op">%&gt;%</span></span>
<span id="cb42-35"><a href="technical-documentation-of-spi-indicators.html#cb42-35" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb42-36"><a href="technical-documentation-of-spi-indicators.html#cb42-36" aria-hidden="true"></a>         <span class="dt">SPI.D4.2.3.CRVS=</span>SPI.D4.<span class="dv">2</span>.<span class="fl">3.</span>DETH75<span class="op">+</span>SPI.D4.<span class="dv">2</span>.<span class="fl">3.</span>BRTH90,</span>
<span id="cb42-37"><a href="technical-documentation-of-spi-indicators.html#cb42-37" aria-hidden="true"></a>         <span class="dt">SPI.D4.2.3.CRVS=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(SPI.D4.<span class="dv">2</span>.<span class="fl">3.</span>CRVS),SPI.D4.<span class="dv">2</span>.<span class="fl">3.</span>WDI,SPI.D4.<span class="dv">2</span>.<span class="fl">3.</span>CRVS)) <span class="op">%&gt;%</span></span>
<span id="cb42-38"><a href="technical-documentation-of-spi-indicators.html#cb42-38" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>SPI.D4.<span class="dv">2</span>.<span class="fl">3.</span>WDI) <span class="op">%&gt;%</span></span>
<span id="cb42-39"><a href="technical-documentation-of-spi-indicators.html#cb42-39" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span></span>
<span id="cb42-40"><a href="technical-documentation-of-spi-indicators.html#cb42-40" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(<span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>), na.locf, <span class="dt">na.rm=</span><span class="ot">FALSE</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#use carry forward to most recent value</span></span>
<span id="cb42-41"><a href="technical-documentation-of-spi-indicators.html#cb42-41" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(<span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>), <span class="op">~</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(.),<span class="dv">0</span>,.))) <span class="op">%&gt;%</span></span>
<span id="cb42-42"><a href="technical-documentation-of-spi-indicators.html#cb42-42" aria-hidden="true"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb42-43"><a href="technical-documentation-of-spi-indicators.html#cb42-43" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="kw">c</span>( <span class="st">&#39;country&#39;</span>, <span class="st">&#39;date&#39;</span>,<span class="st">&#39;RAW.D4.2.3.BRTH90&#39;</span>, <span class="st">&#39;RAW.D4.2.3.DETH75&#39;</span>, <span class="st">&#39;RAW.D4.2.3.CRVS.WDI&#39;</span>, <span class="st">&#39;SPI.D4.2.3.CRVS&#39;</span>)  ) </span>
<span id="cb42-44"><a href="technical-documentation-of-spi-indicators.html#cb42-44" aria-hidden="true"></a></span>
<span id="cb42-45"><a href="technical-documentation-of-spi-indicators.html#cb42-45" aria-hidden="true"></a></span>
<span id="cb42-46"><a href="technical-documentation-of-spi-indicators.html#cb42-46" aria-hidden="true"></a></span>
<span id="cb42-47"><a href="technical-documentation-of-spi-indicators.html#cb42-47" aria-hidden="true"></a></span>
<span id="cb42-48"><a href="technical-documentation-of-spi-indicators.html#cb42-48" aria-hidden="true"></a><span class="co">#add to spi databases</span></span>
<span id="cb42-49"><a href="technical-documentation-of-spi-indicators.html#cb42-49" aria-hidden="true"></a>spi_df &lt;-<span class="st"> </span>spi_df <span class="op">%&gt;%</span></span>
<span id="cb42-50"><a href="technical-documentation-of-spi-indicators.html#cb42-50" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(crvs_df)</span>
<span id="cb42-51"><a href="technical-documentation-of-spi-indicators.html#cb42-51" aria-hidden="true"></a></span>
<span id="cb42-52"><a href="technical-documentation-of-spi-indicators.html#cb42-52" aria-hidden="true"></a></span>
<span id="cb42-53"><a href="technical-documentation-of-spi-indicators.html#cb42-53" aria-hidden="true"></a>crvs_map &lt;-<span class="st"> </span>crvs_df </span>
<span id="cb42-54"><a href="technical-documentation-of-spi-indicators.html#cb42-54" aria-hidden="true"></a></span>
<span id="cb42-55"><a href="technical-documentation-of-spi-indicators.html#cb42-55" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;crvs_map&#39;</span>, <span class="st">&#39;SPI.D4.2.3.CRVS&#39;</span>, <span class="st">&#39;Complete Civil Registration &amp; Vital Statistics Data Available According to WDI&#39;</span> )</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/crvs-1.png" width="960" /><img src="SPI-book_files/figure-html/crvs-2.png" width="960" /><img src="SPI-book_files/figure-html/crvs-3.png" width="960" /><img src="SPI-book_files/figure-html/crvs-4.png" width="960" /></p>
<!-- ### Labor Admin Data -->
<!-- * ILO shared database containing all administrative data sources used to produce ILO statistics (ILOSTAT)    -->
<!--   * May not be comprehensive of all administrative datasets available in a country     -->
<!--   * But gives some indication of whether labor statistics produced using Admin data -->
<!-- * Database contains the following admin sources:     -->
<!--   * Insurance records    -->
<!--   * Labour inspectorate records    -->
<!--   * Records of employers' organizations    -->
<!--   * Employment office records -->
<!--   * Records of workers' organizations -->
<!--   * Other administrative records and related sources -->
<!-- * Database extends from 2010 to 2019 and covers 177 countries.  -->
<!-- To produce a score, we calculate the percentage of these six admin sources above that are available for a country in a given year.  In order to smooth out gaps in reporting, we take a moving 5 year average of the score. -->
</div>
</div>
<div id="indicator-4.3-geospatial-data" class="section level3" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Indicator 4.3: geospatial data</h3>
<p>New indicator based on references to geospatial data in metadata relating to content on NSO website. We recognize that this data source provides only limited coverage but consider that it does at least provide some indication of the ability of the national statistical system to produce geospatial data. A major research and data collection effort is needed via GGIM to fill in this information, so that a more comprehensive picture of geospatial data capability at the national level can be produced. Until this is done, it we cannot even assess the scale of the data gaps in a comparable way.</p>
<div id="source-1" class="section level4" number="2.4.3.1">
<h4><span class="header-section-number">2.4.3.1</span> Source</h4>
<p>Our source for this indicator is Open Data Watch. From Open Data watch:</p>
<blockquote>
<p>The Open Data Inventory (ODIN) assesses the coverage and openness of official statistics to help identify gaps, promote open data policies, improve access, and encourage dialogue
between national statistical offices (NSOs) and data users. ODIN 2018/19 includes 178 countries, including most all OECD countries. Two-year comparisons are for all countries with
two years of data between 2015-2017. Scores can be compared across topics and countries.</p>
</blockquote>
<p>We use their indicator on whether indicators are available at the first or second administrative level. To identify the first administrative levels, ODIN largely draws on the ISO 3166-2 standard. In many countries, first administrative levels refer to governorates, regions, or province. No official list exists for the second administrative level classifications. If geographical disaggregation exists that does not qualify as first administrative level, assume that the data are disaggregated to the second administrative level as long as the classification appears to be a further divisions of the first administrative level.</p>
<p>Scoring for the ODIN indicators for geospatial information is below:</p>
<ul>
<li>1 point if all published data in a data category are available at first/second administrative level.<br />
</li>
<li>0.5 points if some published data in a data category are available at first/second administrative level.<br />
</li>
<li>0 points if no data are available at this level</li>
</ul>
<p>There are 21 data categories.</p>
<p>Social Statistics<br />
1. Population and Vital Statistics<br />
2. Education Facilities<br />
3. Education Outcomes<br />
4. Health Facilities<br />
5. Health Outcomes<br />
6. Reproductive Health<br />
7. Gender Statistics<br />
8. Crime and Justice Statistics<br />
9. Poverty Statistics</p>
<p>Economic Statistics<br />
10. National Accounts<br />
11. Labor Statistics<br />
12. Price Indexes<br />
13. Government Finance<br />
14. Money and Banking<br />
15. International Trade<br />
16. Balance of Payments</p>
<p>Environmental Statistics<br />
17. Land Use<br />
18. Resource Use<br />
19. Energy Use<br />
20. Pollution<br />
21. Built Environment</p>
<p>For the first administrative unit: Money &amp; Banking, International Trade, and Balance of Payments are not scored for this element. For various indicators, lenient interpretations are used for first administrative divisions.</p>
<p>For the second administrative unit: Money &amp; Banking, International Trade, Balance of Payments, National Accounts, Government Finance ,Pollution, Energy Use, Price Indexes, and Resource Use are not scored for this element. For various indicators within categories, second administrative level data is not required as well.</p>
<p>In the scores we present below, we show a score between 0 and 1 with a maximum score of 1, which would mean the country has geo data in full for 100% of elements. A score of 0 indicates no data at all for any elements.</p>
<p>More details on the geographic disaggregation considerations can be found in their technical manual:</p>
<p><a href="https://docs.google.com/document/d/1ubPL1l_3im9bjlCVZ6W2ICAy6UAiXl1hGeA1aXImkxI/edit" class="uri">https://docs.google.com/document/d/1ubPL1l_3im9bjlCVZ6W2ICAy6UAiXl1hGeA1aXImkxI/edit</a></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="technical-documentation-of-spi-indicators.html#cb43-1" aria-hidden="true"></a>  <span class="co">#read in ODIN data</span></span>
<span id="cb43-2"><a href="technical-documentation-of-spi-indicators.html#cb43-2" aria-hidden="true"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2015</span><span class="op">:</span><span class="dv">2018</span>) {</span>
<span id="cb43-3"><a href="technical-documentation-of-spi-indicators.html#cb43-3" aria-hidden="true"></a>   temp &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">paste</span>(raw_dir, <span class="st">&#39;/2.2_DSOA/&#39;</span>,<span class="st">&#39;ODIN_&#39;</span>,i,<span class="st">&#39;.csv&#39;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>))  <span class="op">%&gt;%</span></span>
<span id="cb43-4"><a href="technical-documentation-of-spi-indicators.html#cb43-4" aria-hidden="true"></a><span class="st">        </span><span class="kw">as_tibble</span>(<span class="dt">.name_repair =</span> <span class="st">&#39;universal&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb43-5"><a href="technical-documentation-of-spi-indicators.html#cb43-5" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">date=</span>i) <span class="op">%&gt;%</span></span>
<span id="cb43-6"><a href="technical-documentation-of-spi-indicators.html#cb43-6" aria-hidden="true"></a><span class="st">        </span><span class="kw">filter</span>(Data.categories<span class="op">==</span><span class="st">&#39;All Categories&#39;</span>)</span>
<span id="cb43-7"><a href="technical-documentation-of-spi-indicators.html#cb43-7" aria-hidden="true"></a></span>
<span id="cb43-8"><a href="technical-documentation-of-spi-indicators.html#cb43-8" aria-hidden="true"></a>    <span class="kw">assign</span>(<span class="kw">paste</span>(<span class="st">&#39;geo_df&#39;</span>,i,<span class="dt">sep=</span><span class="st">&quot;_&quot;</span>), temp)</span>
<span id="cb43-9"><a href="technical-documentation-of-spi-indicators.html#cb43-9" aria-hidden="true"></a>  }</span>
<span id="cb43-10"><a href="technical-documentation-of-spi-indicators.html#cb43-10" aria-hidden="true"></a></span>
<span id="cb43-11"><a href="technical-documentation-of-spi-indicators.html#cb43-11" aria-hidden="true"></a><span class="co">#bind different years together</span></span>
<span id="cb43-12"><a href="technical-documentation-of-spi-indicators.html#cb43-12" aria-hidden="true"></a>geo_df &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(geo_df_<span class="dv">2015</span>, geo_df_<span class="dv">2016</span>, geo_df_<span class="dv">2017</span>, geo_df_<span class="dv">2018</span>)</span>
<span id="cb43-13"><a href="technical-documentation-of-spi-indicators.html#cb43-13" aria-hidden="true"></a></span>
<span id="cb43-14"><a href="technical-documentation-of-spi-indicators.html#cb43-14" aria-hidden="true"></a></span>
<span id="cb43-15"><a href="technical-documentation-of-spi-indicators.html#cb43-15" aria-hidden="true"></a><span class="co">#create geo scores</span></span>
<span id="cb43-16"><a href="technical-documentation-of-spi-indicators.html#cb43-16" aria-hidden="true"></a>geo_df &lt;-<span class="st"> </span>geo_df <span class="op">%&gt;%</span></span>
<span id="cb43-17"><a href="technical-documentation-of-spi-indicators.html#cb43-17" aria-hidden="true"></a><span class="st">    </span><span class="kw">select</span>(Country.Code, date, First.administrative.level, Second.administrative.level) <span class="op">%&gt;%</span></span>
<span id="cb43-18"><a href="technical-documentation-of-spi-indicators.html#cb43-18" aria-hidden="true"></a><span class="st">    </span><span class="kw">rename</span>(<span class="dt">iso3c=</span>Country.Code) <span class="op">%&gt;%</span></span>
<span id="cb43-19"><a href="technical-documentation-of-spi-indicators.html#cb43-19" aria-hidden="true"></a><span class="st">    </span><span class="kw">group_by</span>( iso3c) <span class="op">%&gt;%</span></span>
<span id="cb43-20"><a href="technical-documentation-of-spi-indicators.html#cb43-20" aria-hidden="true"></a><span class="st">    </span><span class="kw">right_join</span>(country_metadata) <span class="op">%&gt;%</span></span>
<span id="cb43-21"><a href="technical-documentation-of-spi-indicators.html#cb43-21" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">D4.3.GEO.first.admin.level=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(First.administrative.level), <span class="dv">0</span>, First.administrative.level),</span>
<span id="cb43-22"><a href="technical-documentation-of-spi-indicators.html#cb43-22" aria-hidden="true"></a>           <span class="dt">D4.3.GEO.second.admin.level=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(Second.administrative.level), <span class="dv">0</span>, Second.administrative.level))    </span>
<span id="cb43-23"><a href="technical-documentation-of-spi-indicators.html#cb43-23" aria-hidden="true"></a>  </span>
<span id="cb43-24"><a href="technical-documentation-of-spi-indicators.html#cb43-24" aria-hidden="true"></a></span>
<span id="cb43-25"><a href="technical-documentation-of-spi-indicators.html#cb43-25" aria-hidden="true"></a><span class="co">#do some quick renaming and formatting</span></span>
<span id="cb43-26"><a href="technical-documentation-of-spi-indicators.html#cb43-26" aria-hidden="true"></a>geo_df_temp1 &lt;-<span class="st"> </span>geo_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb43-27"><a href="technical-documentation-of-spi-indicators.html#cb43-27" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename_with</span>(<span class="op">~</span><span class="kw">paste</span>(<span class="st">&#39;RAW&#39;</span>,., <span class="dt">sep=</span><span class="st">&quot;.&quot;</span>), <span class="dt">.cols=</span><span class="kw">c</span>(<span class="st">&#39;D4.3.GEO.first.admin.level&#39;</span>, <span class="st">&#39;D4.3.GEO.second.admin.level&#39;</span>) ) </span>
<span id="cb43-28"><a href="technical-documentation-of-spi-indicators.html#cb43-28" aria-hidden="true"></a></span>
<span id="cb43-29"><a href="technical-documentation-of-spi-indicators.html#cb43-29" aria-hidden="true"></a></span>
<span id="cb43-30"><a href="technical-documentation-of-spi-indicators.html#cb43-30" aria-hidden="true"></a>geo_df_temp2 &lt;-<span class="st"> </span>geo_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb43-31"><a href="technical-documentation-of-spi-indicators.html#cb43-31" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(<span class="kw">c</span>(<span class="st">&#39;D4.3.GEO.first.admin.level&#39;</span>, <span class="st">&#39;D4.3.GEO.second.admin.level&#39;</span>), <span class="op">~</span>.<span class="op">/</span><span class="dv">100</span>)) <span class="op">%&gt;%</span></span>
<span id="cb43-32"><a href="technical-documentation-of-spi-indicators.html#cb43-32" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename_with</span>(<span class="op">~</span><span class="kw">paste</span>(<span class="st">&#39;SPI&#39;</span>,., <span class="dt">sep=</span><span class="st">&quot;.&quot;</span>), <span class="dt">.cols=</span><span class="kw">c</span>(<span class="st">&#39;D4.3.GEO.first.admin.level&#39;</span>, <span class="st">&#39;D4.3.GEO.second.admin.level&#39;</span>) ) </span>
<span id="cb43-33"><a href="technical-documentation-of-spi-indicators.html#cb43-33" aria-hidden="true"></a></span>
<span id="cb43-34"><a href="technical-documentation-of-spi-indicators.html#cb43-34" aria-hidden="true"></a>geo_df &lt;-<span class="st"> </span>geo_df_temp1 <span class="op">%&gt;%</span></span>
<span id="cb43-35"><a href="technical-documentation-of-spi-indicators.html#cb43-35" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(geo_df_temp2)</span>
<span id="cb43-36"><a href="technical-documentation-of-spi-indicators.html#cb43-36" aria-hidden="true"></a></span>
<span id="cb43-37"><a href="technical-documentation-of-spi-indicators.html#cb43-37" aria-hidden="true"></a><span class="co">#add to spi df</span></span>
<span id="cb43-38"><a href="technical-documentation-of-spi-indicators.html#cb43-38" aria-hidden="true"></a>spi_df &lt;-<span class="st"> </span>spi_df <span class="op">%&gt;%</span></span>
<span id="cb43-39"><a href="technical-documentation-of-spi-indicators.html#cb43-39" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(geo_df)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/geo_plots-1.png" width="960" /><img src="SPI-book_files/figure-html/geo_plots-2.png" width="960" /><img src="SPI-book_files/figure-html/geo_plots-3.png" width="960" /><img src="SPI-book_files/figure-html/geo_plots-4.png" width="960" /><img src="SPI-book_files/figure-html/geo_plots-5.png" width="960" /><img src="SPI-book_files/figure-html/geo_plots-6.png" width="960" /></p>
</div>
</div>
<div id="indicator-4.4-privatecitizen-generated-data" class="section level3" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> Indicator 4.4: private/citizen generated data</h3>
<p>New indicator based on references to private/citizen generated data in metadata relating to content on NSO website. Not included because of lack of established methodology. Currently no comprehensive source exists to measure the use of private and citizen generated data in national statistical systems, and this should be another area where more data collection is needed by the international community.</p>
<!-- ### Covid Mobility Data Availability  -->
<!-- We have seen an increased use of private/citizen generated data during the COVID-19 pandemic.  One way in which it has been used is for tracking mobility of citizens to understand the social distancing measures citizens are taking.  As a measure of private/citizen generated data we make use of Apple and Google Mobility tracking data made publicly available during the pandemic. -->
<!-- Source:  -->
<!-- Google LLC "Google COVID-19 Community Mobility Reports". -->
<!-- https://www.google.com/covid19/mobility/ Accessed: 2020-07-23. -->
<!-- Apple "Mobility Trends Reports". -->
<!-- https://www.apple.com/covid19/mobility/ Accessed: 2020-07-23. -->
</div>
</div>
<div id="data-infrastructure-1" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Data Infrastructure</h2>
<p>Data Infrastructure (5 Indicators):<br />
- 5.1_DILG - Indicator 5.1: legislation and governance<br />
- 5.2_DISM - Indicator 5.2: standards<br />
- 5.3_DISK - Indicator 5.3: skills<br />
- 5.4_DIPN - Indicator 5.4: partnerships<br />
- 5.5_DIFI - Indicator 5.5: finance</p>
<div id="indicator-5.1-legislation-and-governance" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Indicator 5.1: legislation and governance</h3>
<p>The legislation and governance indicator will be drawn from SDG indicator 17.18.2 (national statistical legislation compliance with UN Fundamental Principles of Official Statistics), existence of National Statistical Council, national statistical strategy generation, national statistical plan. Also include some other legislative aspects that foster good use of statistics eg freedom of information, privacy/transparency, good governance (eg free and fair elections).</p>
<p>This indicator measures whether the national statistical legislation complies with United Nations Fundamental Principles of Statistics (SDG 17.18.2)</p>
<p>Scores is 1 if the country has a national statistical legislation compliant with United Nations Fundamental Principles of Statistics. Scores of 0 or scores with missing values are treated the same (both given a score of zero).</p>
<p>The source is Paris 21 and UNSD. Data accessed using UNSD SDG API on 2021-01-12</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="technical-documentation-of-spi-indicators.html#cb44-1" aria-hidden="true"></a>D5<span class="fl">.1</span>_DILG &lt;-<span class="st"> </span><span class="kw">un_pull</span>(<span class="st">&#39;SG_STT_FPOS&#39;</span>, <span class="st">&#39;2004&#39;</span>, <span class="st">&#39;2019&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb44-2"><a href="technical-documentation-of-spi-indicators.html#cb44-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, date,value) <span class="op">%&gt;%</span></span>
<span id="cb44-3"><a href="technical-documentation-of-spi-indicators.html#cb44-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">right_join</span>(spi_df_empty) <span class="op">%&gt;%</span></span>
<span id="cb44-4"><a href="technical-documentation-of-spi-indicators.html#cb44-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RAW.D5.1.DILG=</span><span class="kw">if_else</span>((<span class="kw">is.na</span>(value) <span class="op">|</span><span class="st"> </span>value<span class="op">==</span><span class="st">&quot;NaN&quot;</span>),<span class="kw">as.numeric</span>(<span class="ot">NA</span>), <span class="kw">as.numeric</span>(value)),</span>
<span id="cb44-5"><a href="technical-documentation-of-spi-indicators.html#cb44-5" aria-hidden="true"></a>         <span class="dt">SPI.D5.1.DILG=</span><span class="kw">if_else</span>((<span class="kw">is.na</span>(value) <span class="op">|</span><span class="st"> </span>value<span class="op">==</span><span class="st">&quot;NaN&quot;</span>),<span class="dv">0</span>, <span class="kw">as.numeric</span>(value))) <span class="op">%&gt;%</span></span>
<span id="cb44-6"><a href="technical-documentation-of-spi-indicators.html#cb44-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>value)</span>
<span id="cb44-7"><a href="technical-documentation-of-spi-indicators.html#cb44-7" aria-hidden="true"></a><span class="co"># </span></span>
<span id="cb44-8"><a href="technical-documentation-of-spi-indicators.html#cb44-8" aria-hidden="true"></a><span class="co"># #read in csv file.</span></span>
<span id="cb44-9"><a href="technical-documentation-of-spi-indicators.html#cb44-9" aria-hidden="true"></a><span class="co"># D5.1_DILG2 &lt;- read_csv(file = paste(raw_dir, &quot;5.1_DILG&quot;,&quot;5.1_DILG.csv&quot;, sep=&quot;/&quot; )) %&gt;%</span></span>
<span id="cb44-10"><a href="technical-documentation-of-spi-indicators.html#cb44-10" aria-hidden="true"></a><span class="co">#   as_tibble(.name_repair = &#39;universal&#39;) %&gt;%</span></span>
<span id="cb44-11"><a href="technical-documentation-of-spi-indicators.html#cb44-11" aria-hidden="true"></a><span class="co">#   transmute(</span></span>
<span id="cb44-12"><a href="technical-documentation-of-spi-indicators.html#cb44-12" aria-hidden="true"></a><span class="co">#     country=Country,</span></span>
<span id="cb44-13"><a href="technical-documentation-of-spi-indicators.html#cb44-13" aria-hidden="true"></a><span class="co">#     date=Year,</span></span>
<span id="cb44-14"><a href="technical-documentation-of-spi-indicators.html#cb44-14" aria-hidden="true"></a><span class="co">#     SPI.5.1.DILG=Data.Value</span></span>
<span id="cb44-15"><a href="technical-documentation-of-spi-indicators.html#cb44-15" aria-hidden="true"></a><span class="co">#   ) %&gt;%</span></span>
<span id="cb44-16"><a href="technical-documentation-of-spi-indicators.html#cb44-16" aria-hidden="true"></a><span class="co">#     mutate(country=case_when(</span></span>
<span id="cb44-17"><a href="technical-documentation-of-spi-indicators.html#cb44-17" aria-hidden="true"></a><span class="co">#     country==&quot;Bahamas&quot; ~ &quot;Bahamas, The&quot;,                  </span></span>
<span id="cb44-18"><a href="technical-documentation-of-spi-indicators.html#cb44-18" aria-hidden="true"></a><span class="co">#     country==&quot;Bolivia (Plurinational State of)&quot;   ~  &quot;Bolivia&quot;   ,                  </span></span>
<span id="cb44-19"><a href="technical-documentation-of-spi-indicators.html#cb44-19" aria-hidden="true"></a><span class="co">#     country==&quot;Côte d&#39;Ivoire&quot;  ~  &quot;Cote d&#39;Ivoire&quot;                ,</span></span>
<span id="cb44-20"><a href="technical-documentation-of-spi-indicators.html#cb44-20" aria-hidden="true"></a><span class="co">#     country==&quot;Democratic Republic of the Congo&quot;  ~ &quot;Congo, Dem. Rep.&quot;  ,           </span></span>
<span id="cb44-21"><a href="technical-documentation-of-spi-indicators.html#cb44-21" aria-hidden="true"></a><span class="co">#     country==&quot;Congo&quot;  ~ &quot;Congo, Rep.&quot;        ,           </span></span>
<span id="cb44-22"><a href="technical-documentation-of-spi-indicators.html#cb44-22" aria-hidden="true"></a><span class="co">#     country==&quot;Curacao&quot;  ~  &quot;Curacao&quot;       ,                </span></span>
<span id="cb44-23"><a href="technical-documentation-of-spi-indicators.html#cb44-23" aria-hidden="true"></a><span class="co">#     country==&quot;Czechia&quot;   ~  &quot;Czech Republic&quot;     ,        </span></span>
<span id="cb44-24"><a href="technical-documentation-of-spi-indicators.html#cb44-24" aria-hidden="true"></a><span class="co">#     country==&quot;Egypt&quot;  ~ &quot;Egypt, Arab Rep.&quot;        ,      </span></span>
<span id="cb44-25"><a href="technical-documentation-of-spi-indicators.html#cb44-25" aria-hidden="true"></a><span class="co">#     country==&quot;Micronesia (Federated States of)&quot;  ~ &quot;Micronesia, Fed. Sts.&quot;  ,       </span></span>
<span id="cb44-26"><a href="technical-documentation-of-spi-indicators.html#cb44-26" aria-hidden="true"></a><span class="co">#     country==&quot;United Kingdom&quot;   ~  &quot;United Kingdom&quot;    ,         </span></span>
<span id="cb44-27"><a href="technical-documentation-of-spi-indicators.html#cb44-27" aria-hidden="true"></a><span class="co">#     country==&quot;Gambia&quot;    ~  &quot;Gambia, The&quot;     ,           </span></span>
<span id="cb44-28"><a href="technical-documentation-of-spi-indicators.html#cb44-28" aria-hidden="true"></a><span class="co">#     country==&quot;Iran (Islamic Republic of)&quot;  ~ &quot;Iran, Islamic Rep.&quot; ,           </span></span>
<span id="cb44-29"><a href="technical-documentation-of-spi-indicators.html#cb44-29" aria-hidden="true"></a><span class="co">#     country==&quot;Kyrgyzstan&quot;   ~  &quot;Kyrgyz Republic&quot;   ,          </span></span>
<span id="cb44-30"><a href="technical-documentation-of-spi-indicators.html#cb44-30" aria-hidden="true"></a><span class="co">#     country==&quot;Republic of Korea&quot;   ~ &quot;Korea, Rep.&quot;   ,               </span></span>
<span id="cb44-31"><a href="technical-documentation-of-spi-indicators.html#cb44-31" aria-hidden="true"></a><span class="co">#     country==&quot;Lao People&#39;s Democratic Republic&quot;    ~  &quot;Lao PDR&quot; ,                    </span></span>
<span id="cb44-32"><a href="technical-documentation-of-spi-indicators.html#cb44-32" aria-hidden="true"></a><span class="co">#     country==&quot;Saint Kitts and Nevis   &quot;   ~ &quot;St. Kitts and Nevis&quot;,</span></span>
<span id="cb44-33"><a href="technical-documentation-of-spi-indicators.html#cb44-33" aria-hidden="true"></a><span class="co">#     country==&quot;Saint Lucia&quot;   ~ &quot;St. Lucia&quot;,</span></span>
<span id="cb44-34"><a href="technical-documentation-of-spi-indicators.html#cb44-34" aria-hidden="true"></a><span class="co">#     country==&quot;Republic of Moldova&quot;   ~  &quot;Moldova&quot;   ,                  </span></span>
<span id="cb44-35"><a href="technical-documentation-of-spi-indicators.html#cb44-35" aria-hidden="true"></a><span class="co">#     country==&quot;Democratic People&#39;s Republic of Korea&quot;  ~  &quot;Korea, Dem. People’s Rep.&quot; ,  </span></span>
<span id="cb44-36"><a href="technical-documentation-of-spi-indicators.html#cb44-36" aria-hidden="true"></a><span class="co">#     country==&quot;Slovakia&quot;   ~  &quot;Slovak Republic&quot;             ,</span></span>
<span id="cb44-37"><a href="technical-documentation-of-spi-indicators.html#cb44-37" aria-hidden="true"></a><span class="co">#     country==&quot;United Republic of Tanzania&quot;   ~  &quot;Tanzania&quot; ,                    </span></span>
<span id="cb44-38"><a href="technical-documentation-of-spi-indicators.html#cb44-38" aria-hidden="true"></a><span class="co">#     country==&quot;United States of America&quot;  ~ &quot;United States&quot;  ,                </span></span>
<span id="cb44-39"><a href="technical-documentation-of-spi-indicators.html#cb44-39" aria-hidden="true"></a><span class="co">#     country==&quot;Saint Vincent and the Grenadines&quot; ~ &quot;St. Vincent and the Grenadines&quot; ,</span></span>
<span id="cb44-40"><a href="technical-documentation-of-spi-indicators.html#cb44-40" aria-hidden="true"></a><span class="co">#     country==&quot;Venezuela (Bolivarian Republic of)&quot;  ~  &quot;Venezuela, RB&quot;   ,              </span></span>
<span id="cb44-41"><a href="technical-documentation-of-spi-indicators.html#cb44-41" aria-hidden="true"></a><span class="co">#     country==&quot;British Virgin Islands&quot;  ~  &quot;British Virgin Islands&quot; ,       </span></span>
<span id="cb44-42"><a href="technical-documentation-of-spi-indicators.html#cb44-42" aria-hidden="true"></a><span class="co">#     country==&quot;Viet Nam&quot;  ~ &quot;Vietnam&quot;        ,              </span></span>
<span id="cb44-43"><a href="technical-documentation-of-spi-indicators.html#cb44-43" aria-hidden="true"></a><span class="co">#     country==&quot;Yemen&quot;  ~ &quot;Yemen, Rep.&quot;,</span></span>
<span id="cb44-44"><a href="technical-documentation-of-spi-indicators.html#cb44-44" aria-hidden="true"></a><span class="co">#     country==&quot;United Kingdom of Great Britain and Northern Ireland&quot; ~ &quot;United Kingdom&quot;,</span></span>
<span id="cb44-45"><a href="technical-documentation-of-spi-indicators.html#cb44-45" aria-hidden="true"></a><span class="co">#     TRUE ~ country</span></span>
<span id="cb44-46"><a href="technical-documentation-of-spi-indicators.html#cb44-46" aria-hidden="true"></a><span class="co">#   )) %&gt;%</span></span>
<span id="cb44-47"><a href="technical-documentation-of-spi-indicators.html#cb44-47" aria-hidden="true"></a><span class="co">#   mutate(RAW.5.1.DILG=if_else(SPI.5.1.DILG==&#39;no data&#39;,as.character(NA), SPI.5.1.DILG),</span></span>
<span id="cb44-48"><a href="technical-documentation-of-spi-indicators.html#cb44-48" aria-hidden="true"></a><span class="co">#          SPI.5.1.DILG=if_else(SPI.5.1.DILG==&#39;no data&#39;,as.numeric(NA), as.numeric(SPI.5.1.DILG))) %&gt;%</span></span>
<span id="cb44-49"><a href="technical-documentation-of-spi-indicators.html#cb44-49" aria-hidden="true"></a><span class="co">#   right_join(spi_df_empty)</span></span>
<span id="cb44-50"><a href="technical-documentation-of-spi-indicators.html#cb44-50" aria-hidden="true"></a></span>
<span id="cb44-51"><a href="technical-documentation-of-spi-indicators.html#cb44-51" aria-hidden="true"></a><span class="co">#add to spi databases</span></span>
<span id="cb44-52"><a href="technical-documentation-of-spi-indicators.html#cb44-52" aria-hidden="true"></a>spi_df &lt;-<span class="st"> </span>spi_df <span class="op">%&gt;%</span></span>
<span id="cb44-53"><a href="technical-documentation-of-spi-indicators.html#cb44-53" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(D5<span class="fl">.1</span>_DILG)</span>
<span id="cb44-54"><a href="technical-documentation-of-spi-indicators.html#cb44-54" aria-hidden="true"></a></span>
<span id="cb44-55"><a href="technical-documentation-of-spi-indicators.html#cb44-55" aria-hidden="true"></a></span>
<span id="cb44-56"><a href="technical-documentation-of-spi-indicators.html#cb44-56" aria-hidden="true"></a>D5<span class="fl">.1</span>_DILG_map &lt;-<span class="st"> </span>D5<span class="fl">.1</span>_DILG <span class="op">%&gt;%</span></span>
<span id="cb44-57"><a href="technical-documentation-of-spi-indicators.html#cb44-57" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(SPI.D5.<span class="fl">1.</span>DILG))</span>
<span id="cb44-58"><a href="technical-documentation-of-spi-indicators.html#cb44-58" aria-hidden="true"></a></span>
<span id="cb44-59"><a href="technical-documentation-of-spi-indicators.html#cb44-59" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;D5.1_DILG_map&#39;</span>, <span class="st">&#39;RAW.D5.1.DILG&#39;</span>, <span class="st">&#39;National statistical legislation complies with United Nations Fundamental Principles of Statistics. Source: Paris21&#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/legislation_governance-1.png" width="960" /><img src="SPI-book_files/figure-html/legislation_governance-2.png" width="960" /><img src="SPI-book_files/figure-html/legislation_governance-3.png" width="960" /><img src="SPI-book_files/figure-html/legislation_governance-4.png" width="960" /></p>
</div>
<div id="indicator-5.2-standards" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Indicator 5.2: standards</h3>
<p>Average score for Standards and Methods indicators. In this release of the SPI the data and methods used for this indicator are the same as for the previous SPI. Further work could improve the validity of this indicator and reduce the risk that countries may be incentivized to adopt only traditional standards and methods and neglect innovative solutions that may be more valid in the current context.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="technical-documentation-of-spi-indicators.html#cb45-1" aria-hidden="true"></a><span class="co">#pull data for several of the standards from WDI metadata</span></span>
<span id="cb45-2"><a href="technical-documentation-of-spi-indicators.html#cb45-2" aria-hidden="true"></a></span>
<span id="cb45-3"><a href="technical-documentation-of-spi-indicators.html#cb45-3" aria-hidden="true"></a>df &lt;-<span class="st"> </span>WDI_metadata</span>
<span id="cb45-4"><a href="technical-documentation-of-spi-indicators.html#cb45-4" aria-hidden="true"></a></span>
<span id="cb45-5"><a href="technical-documentation-of-spi-indicators.html#cb45-5" aria-hidden="true"></a><span class="co"># Manipulate and clean final data</span></span>
<span id="cb45-6"><a href="technical-documentation-of-spi-indicators.html#cb45-6" aria-hidden="true"></a>df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb45-7"><a href="technical-documentation-of-spi-indicators.html#cb45-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(Income.Group))  <span class="co">#keep just countries (drop aggregations)</span></span>
<span id="cb45-8"><a href="technical-documentation-of-spi-indicators.html#cb45-8" aria-hidden="true"></a></span>
<span id="cb45-9"><a href="technical-documentation-of-spi-indicators.html#cb45-9" aria-hidden="true"></a><span class="co">#pull IMF country codes for merging</span></span>
<span id="cb45-10"><a href="technical-documentation-of-spi-indicators.html#cb45-10" aria-hidden="true"></a>imf_codes &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file=</span><span class="kw">paste</span>(raw_dir, <span class="st">&quot;metadata&quot;</span>,<span class="st">&quot;IMF_country_codes.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> ))</span></code></pre></div>
<div id="system-of-national-accounts-in-use" class="section level4" number="2.5.2.1">
<h4><span class="header-section-number">2.5.2.1</span> 5.2.1 System of National Accounts in use</h4>
<p>The national accounts data are compiled using the concepts, definitions,
framework, and methodology of the System of National Account 2008 (SNA2008)
or European System of National and Regional Accounts (ESA 2010). The manual
has evolved to meet the changing economic structure, to follow systematic accounting
and ensure international compatibility.</p>
<p>Scoring: 1 point for using SNA2008 or ESA 2010, 0.5 points for using SNA 1993 or ESA 1995, 0 points otherwise</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="technical-documentation-of-spi-indicators.html#cb46-1" aria-hidden="true"></a><span class="co">#read in metadata file.</span></span>
<span id="cb46-2"><a href="technical-documentation-of-spi-indicators.html#cb46-2" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">1.</span>SNAU &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb46-3"><a href="technical-documentation-of-spi-indicators.html#cb46-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">iso3c=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(Country.Code), Code, Country.Code),</span>
<span id="cb46-4"><a href="technical-documentation-of-spi-indicators.html#cb46-4" aria-hidden="true"></a>         <span class="dt">country=</span>Table.Name) <span class="op">%&gt;%</span></span>
<span id="cb46-5"><a href="technical-documentation-of-spi-indicators.html#cb46-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="kw">c</span>(<span class="st">&#39;iso3c&#39;</span>, <span class="st">&#39;country&#39;</span>, <span class="st">&#39;date&#39;</span>,  <span class="st">&#39;System.of.National.Accounts&#39;</span>)  ) <span class="op">%&gt;%</span></span>
<span id="cb46-6"><a href="technical-documentation-of-spi-indicators.html#cb46-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SNAU=</span>System.of.National.Accounts) <span class="op">%&gt;%</span></span>
<span id="cb46-7"><a href="technical-documentation-of-spi-indicators.html#cb46-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SNAU=</span><span class="kw">str_extract</span>(SNAU, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d{4}&quot;</span>) ) <span class="op">%&gt;%</span></span>
<span id="cb46-8"><a href="technical-documentation-of-spi-indicators.html#cb46-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.1.SNAU=</span><span class="kw">case_when</span>(</span>
<span id="cb46-9"><a href="technical-documentation-of-spi-indicators.html#cb46-9" aria-hidden="true"></a>    SNAU<span class="op">==</span><span class="st">&quot;2008&quot;</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb46-10"><a href="technical-documentation-of-spi-indicators.html#cb46-10" aria-hidden="true"></a>    SNAU<span class="op">==</span><span class="st">&quot;1993&quot;</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>,</span>
<span id="cb46-11"><a href="technical-documentation-of-spi-indicators.html#cb46-11" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb46-12"><a href="technical-documentation-of-spi-indicators.html#cb46-12" aria-hidden="true"></a>  ),</span>
<span id="cb46-13"><a href="technical-documentation-of-spi-indicators.html#cb46-13" aria-hidden="true"></a>      <span class="dt">RAW.D5.2.1.SNAU=</span>System.of.National.Accounts) <span class="op">%&gt;%</span></span>
<span id="cb46-14"><a href="technical-documentation-of-spi-indicators.html#cb46-14" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, country) <span class="op">%&gt;%</span></span>
<span id="cb46-15"><a href="technical-documentation-of-spi-indicators.html#cb46-15" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c,  date,RAW.D5.<span class="dv">2</span>.<span class="fl">1.</span>SNAU, SPI.D5.<span class="dv">2</span>.<span class="fl">1.</span>SNAU  ) </span></code></pre></div>
</div>
<div id="national-accounts-base-year" class="section level4" number="2.5.2.2">
<h4><span class="header-section-number">2.5.2.2</span> 5.2.2 National Accounts base year</h4>
<p>National accounts base year is the year used as the base period for constant price
calculations in the country’s national accounts. It is recommended that the base year of
constant price estimates be changed periodically to reflect changes in economic structure and relative prices.</p>
<p>1 point for chained price, 0.5 for reference period within past 10 years, 0 points otherwise.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="technical-documentation-of-spi-indicators.html#cb47-1" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">2.</span>NABY &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb47-2"><a href="technical-documentation-of-spi-indicators.html#cb47-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">iso3c=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(Country.Code), Code, Country.Code),</span>
<span id="cb47-3"><a href="technical-documentation-of-spi-indicators.html#cb47-3" aria-hidden="true"></a>         <span class="dt">country=</span>Table.Name) <span class="op">%&gt;%</span></span>
<span id="cb47-4"><a href="technical-documentation-of-spi-indicators.html#cb47-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="kw">c</span>(<span class="st">&#39;iso3c&#39;</span>, <span class="st">&#39;country&#39;</span>, <span class="st">&#39;date&#39;</span>,  <span class="st">&#39;National.accounts.base.year&#39;</span>)  ) <span class="op">%&gt;%</span></span>
<span id="cb47-5"><a href="technical-documentation-of-spi-indicators.html#cb47-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">NABY=</span>National.accounts.base.year) <span class="op">%&gt;%</span></span>
<span id="cb47-6"><a href="technical-documentation-of-spi-indicators.html#cb47-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">NABY_dates=</span><span class="kw">gsub</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">d{2}/&quot;</span>,<span class="st">&quot;&quot;</span>,NABY) ) <span class="op">%&gt;%</span></span>
<span id="cb47-7"><a href="technical-documentation-of-spi-indicators.html#cb47-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">NABY_dates=</span><span class="kw">str_extract</span>(NABY_dates, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d{4}&quot;</span>) ) <span class="op">%&gt;%</span></span>
<span id="cb47-8"><a href="technical-documentation-of-spi-indicators.html#cb47-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">NABY_dates=</span><span class="kw">if_else</span>(NABY<span class="op">==</span><span class="st">&quot;20015/2016&quot;</span>,<span class="st">&quot;2016&quot;</span>,NABY_dates)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#fix an issue in WDI metadata</span></span>
<span id="cb47-9"><a href="technical-documentation-of-spi-indicators.html#cb47-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.2.NABY=</span><span class="kw">case_when</span>(</span>
<span id="cb47-10"><a href="technical-documentation-of-spi-indicators.html#cb47-10" aria-hidden="true"></a>    NABY<span class="op">==</span><span class="st">&quot;Original chained constant price data are rescaled.&quot;</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb47-11"><a href="technical-documentation-of-spi-indicators.html#cb47-11" aria-hidden="true"></a>    (date<span class="op">-</span><span class="kw">as.numeric</span>(NABY_dates))<span class="op">&lt;=</span><span class="dv">10</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>, <span class="co">#within 10 years of reference period</span></span>
<span id="cb47-12"><a href="technical-documentation-of-spi-indicators.html#cb47-12" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb47-13"><a href="technical-documentation-of-spi-indicators.html#cb47-13" aria-hidden="true"></a>  ),</span>
<span id="cb47-14"><a href="technical-documentation-of-spi-indicators.html#cb47-14" aria-hidden="true"></a>  <span class="dt">RAW.D5.2.2.NABY=</span>NABY)  <span class="op">%&gt;%</span></span>
<span id="cb47-15"><a href="technical-documentation-of-spi-indicators.html#cb47-15" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c,  date, RAW.D5.<span class="dv">2</span>.<span class="fl">2.</span>NABY, SPI.D5.<span class="dv">2</span>.<span class="fl">2.</span>NABY  ) <span class="op">%&gt;%</span></span>
<span id="cb47-16"><a href="technical-documentation-of-spi-indicators.html#cb47-16" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date)</span></code></pre></div>
</div>
<div id="classification-of-national-industry" class="section level4" number="2.5.2.3">
<h4><span class="header-section-number">2.5.2.3</span> 5.2.3 Classification of national industry</h4>
<p>The industrial production data are compiled using the International Standard Industrial
Classification of All Economic Activities (ISIC) Rev.4 and Statistical Classification of
Economic Activities in the European Community (NACE) Rev.2. ISIC Rev.4 is a standard classification
of economic activities arranged so that entities can be classified per the activity they carry out
using criteria such as input, output and use of the products produced, more emphasis has been given
to the character of the production process in defining and delineating ISIC classes for international
comparability. The manual and classification have changed to cover the complete scope of industrial
production, employment, and GDP and other statistical areas.</p>
<p>1 Point. Latest version is adopted (ISIC Rev 4, NACE Rev 2 or a compatible classification)</p>
<p>0.5 Points. Previous version is used (ISIC Rev 3, NACE Rev 1 or a compatible classification)</p>
<p>0 Points. Otherwise</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="technical-documentation-of-spi-indicators.html#cb48-1" aria-hidden="true"></a><span class="co">#read in csv file.</span></span>
<span id="cb48-2"><a href="technical-documentation-of-spi-indicators.html#cb48-2" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">3.</span>CNIN &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.2_DISM&quot;</span>,<span class="st">&quot;D5.2.3.CNIN.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> )) <span class="op">%&gt;%</span></span>
<span id="cb48-3"><a href="technical-documentation-of-spi-indicators.html#cb48-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.3.CNIN=</span><span class="kw">case_when</span>(</span>
<span id="cb48-4"><a href="technical-documentation-of-spi-indicators.html#cb48-4" aria-hidden="true"></a>    <span class="kw">str_to_lower</span>(CNIN)<span class="op">==</span><span class="st">&quot;nace rev2&quot;</span> <span class="op">|</span><span class="st"> </span><span class="kw">str_to_lower</span>(CNIN)<span class="op">==</span><span class="st">&quot;rev4&quot;</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb48-5"><a href="technical-documentation-of-spi-indicators.html#cb48-5" aria-hidden="true"></a>    <span class="kw">str_to_lower</span>(CNIN)<span class="op">==</span><span class="st">&quot;nace rev1&quot;</span> <span class="op">|</span><span class="st"> </span><span class="kw">str_to_lower</span>(CNIN)<span class="op">==</span><span class="st">&quot;rev3&quot;</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>, </span>
<span id="cb48-6"><a href="technical-documentation-of-spi-indicators.html#cb48-6" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb48-7"><a href="technical-documentation-of-spi-indicators.html#cb48-7" aria-hidden="true"></a>  ),</span>
<span id="cb48-8"><a href="technical-documentation-of-spi-indicators.html#cb48-8" aria-hidden="true"></a>  <span class="dt">RAW.D5.2.3.CNIN=</span>CNIN)  <span class="op">%&gt;%</span></span>
<span id="cb48-9"><a href="technical-documentation-of-spi-indicators.html#cb48-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, country, date, RAW.D5.<span class="dv">2</span>.<span class="fl">3.</span>CNIN, SPI.D5.<span class="dv">2</span>.<span class="fl">3.</span>CNIN  ) <span class="op">%&gt;%</span></span>
<span id="cb48-10"><a href="technical-documentation-of-spi-indicators.html#cb48-10" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, country)</span></code></pre></div>
</div>
<div id="cpi-base-year" class="section level4" number="2.5.2.4">
<h4><span class="header-section-number">2.5.2.4</span> 5.2.4 CPI base year</h4>
<p>Consumer Price Index serves as indicators of inflation and reflects changes in the
cost of acquiring a fixed basket of goods and services by the average consumer.<br />
Weights are usually derived from consumer expenditure surveys and the CPI base year
refers to the year the weights were derived. It is recommended that the base year be
changed periodically to reflect changes in expenditure structure.</p>
<p>1 Point. Annual chain linking. 0.5 Points. Base year in last 10 years. 0 points. Otherwise</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="technical-documentation-of-spi-indicators.html#cb49-1" aria-hidden="true"></a><span class="co">#read in csv file.</span></span>
<span id="cb49-2"><a href="technical-documentation-of-spi-indicators.html#cb49-2" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.2_DISM&quot;</span>,<span class="st">&quot;D5.2.4.CPIBY.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> )) <span class="op">%&gt;%</span></span>
<span id="cb49-3"><a href="technical-documentation-of-spi-indicators.html#cb49-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.4.CPIBY=</span><span class="kw">case_when</span>(</span>
<span id="cb49-4"><a href="technical-documentation-of-spi-indicators.html#cb49-4" aria-hidden="true"></a>    CPIBY<span class="op">==</span><span class="st">&quot;annual chained&quot;</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb49-5"><a href="technical-documentation-of-spi-indicators.html#cb49-5" aria-hidden="true"></a>    (date<span class="op">-</span><span class="kw">as.numeric</span>(CPIBY))<span class="op">&lt;=</span><span class="dv">10</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>, <span class="co">#within 10 years of reference period</span></span>
<span id="cb49-6"><a href="technical-documentation-of-spi-indicators.html#cb49-6" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb49-7"><a href="technical-documentation-of-spi-indicators.html#cb49-7" aria-hidden="true"></a>  ),</span>
<span id="cb49-8"><a href="technical-documentation-of-spi-indicators.html#cb49-8" aria-hidden="true"></a>  <span class="dt">RAW.D5.2.4.CPIBY=</span>CPIBY)  <span class="op">%&gt;%</span></span>
<span id="cb49-9"><a href="technical-documentation-of-spi-indicators.html#cb49-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, country, date, RAW.D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY, SPI.D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY  ) <span class="op">%&gt;%</span></span>
<span id="cb49-10"><a href="technical-documentation-of-spi-indicators.html#cb49-10" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, country)</span>
<span id="cb49-11"><a href="technical-documentation-of-spi-indicators.html#cb49-11" aria-hidden="true"></a></span>
<span id="cb49-12"><a href="technical-documentation-of-spi-indicators.html#cb49-12" aria-hidden="true"></a><span class="co">#####</span></span>
<span id="cb49-13"><a href="technical-documentation-of-spi-indicators.html#cb49-13" aria-hidden="true"></a><span class="co"># IMF Data</span></span>
<span id="cb49-14"><a href="technical-documentation-of-spi-indicators.html#cb49-14" aria-hidden="true"></a><span class="co">#####</span></span>
<span id="cb49-15"><a href="technical-documentation-of-spi-indicators.html#cb49-15" aria-hidden="true"></a></span>
<span id="cb49-16"><a href="technical-documentation-of-spi-indicators.html#cb49-16" aria-hidden="true"></a><span class="co">#use alternative data source provided by the IMF</span></span>
<span id="cb49-17"><a href="technical-documentation-of-spi-indicators.html#cb49-17" aria-hidden="true"></a></span>
<span id="cb49-18"><a href="technical-documentation-of-spi-indicators.html#cb49-18" aria-hidden="true"></a><span class="co">#read in data on when the weights were last updated to measure if annual chain linking is done</span></span>
<span id="cb49-19"><a href="technical-documentation-of-spi-indicators.html#cb49-19" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">4.</span>COICOP.WGT &lt;-<span class="st">   </span><span class="kw">read_excel</span>(<span class="dt">path=</span><span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.2_DISM&quot;</span>,<span class="st">&quot;2020.11.04_Compiled Data for World Bank.xlsx&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> ),</span>
<span id="cb49-20"><a href="technical-documentation-of-spi-indicators.html#cb49-20" aria-hidden="true"></a>                               <span class="dt">sheet =</span> <span class="st">&quot;COICOP Month_Last Change&quot;</span>,</span>
<span id="cb49-21"><a href="technical-documentation-of-spi-indicators.html#cb49-21" aria-hidden="true"></a>                               <span class="dt">skip=</span><span class="dv">2</span></span>
<span id="cb49-22"><a href="technical-documentation-of-spi-indicators.html#cb49-22" aria-hidden="true"></a>                               ) <span class="op">%&gt;%</span></span>
<span id="cb49-23"><a href="technical-documentation-of-spi-indicators.html#cb49-23" aria-hidden="true"></a><span class="st">  </span><span class="kw">as_tibble</span>(<span class="dt">.name_repair=</span><span class="st">&#39;universal&#39;</span>) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb49-24"><a href="technical-documentation-of-spi-indicators.html#cb49-24" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(</span>
<span id="cb49-25"><a href="technical-documentation-of-spi-indicators.html#cb49-25" aria-hidden="true"></a>    <span class="dt">IMF_code=</span>Code,</span>
<span id="cb49-26"><a href="technical-documentation-of-spi-indicators.html#cb49-26" aria-hidden="true"></a>    <span class="dt">IMF_country=</span>Country_revised</span>
<span id="cb49-27"><a href="technical-documentation-of-spi-indicators.html#cb49-27" aria-hidden="true"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb49-28"><a href="technical-documentation-of-spi-indicators.html#cb49-28" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">IMF_code=</span><span class="kw">as.numeric</span>(IMF_code)) <span class="op">%&gt;%</span></span>
<span id="cb49-29"><a href="technical-documentation-of-spi-indicators.html#cb49-29" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(imf_codes)</span>
<span id="cb49-30"><a href="technical-documentation-of-spi-indicators.html#cb49-30" aria-hidden="true"></a>  </span>
<span id="cb49-31"><a href="technical-documentation-of-spi-indicators.html#cb49-31" aria-hidden="true"></a>  </span>
<span id="cb49-32"><a href="technical-documentation-of-spi-indicators.html#cb49-32" aria-hidden="true"></a><span class="co">#read in last time the CPI reference period is updated to fill in rest of info  </span></span>
<span id="cb49-33"><a href="technical-documentation-of-spi-indicators.html#cb49-33" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">4.</span>CPI.REF &lt;-<span class="st">  </span><span class="kw">read_excel</span>(<span class="dt">path=</span><span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.2_DISM&quot;</span>,<span class="st">&quot;2020.11.04_Compiled Data for World Bank.xlsx&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> ),</span>
<span id="cb49-34"><a href="technical-documentation-of-spi-indicators.html#cb49-34" aria-hidden="true"></a>                               <span class="dt">sheet =</span> <span class="st">&quot;CPI Reference Period Review&quot;</span></span>
<span id="cb49-35"><a href="technical-documentation-of-spi-indicators.html#cb49-35" aria-hidden="true"></a>                               ) <span class="op">%&gt;%</span></span>
<span id="cb49-36"><a href="technical-documentation-of-spi-indicators.html#cb49-36" aria-hidden="true"></a><span class="st">  </span><span class="kw">as_tibble</span>(<span class="dt">.name_repair=</span><span class="st">&#39;universal&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb49-37"><a href="technical-documentation-of-spi-indicators.html#cb49-37" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">IMF_country=</span>country) <span class="op">%&gt;%</span></span>
<span id="cb49-38"><a href="technical-documentation-of-spi-indicators.html#cb49-38" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(D5.<span class="dv">2</span>.<span class="fl">4.</span>COICOP.WGT) <span class="co">#merge CPI weights</span></span>
<span id="cb49-39"><a href="technical-documentation-of-spi-indicators.html#cb49-39" aria-hidden="true"></a>  </span>
<span id="cb49-40"><a href="technical-documentation-of-spi-indicators.html#cb49-40" aria-hidden="true"></a><span class="co">#now calculate whether annual chain linking is used and CPI base year from scratch using this info</span></span>
<span id="cb49-41"><a href="technical-documentation-of-spi-indicators.html#cb49-41" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF.RAW &lt;-<span class="st"> </span>D5.<span class="dv">2</span>.<span class="fl">4.</span>CPI.REF <span class="op">%&gt;%</span></span>
<span id="cb49-42"><a href="technical-documentation-of-spi-indicators.html#cb49-42" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(iso3c)) <span class="op">%&gt;%</span></span>
<span id="cb49-43"><a href="technical-documentation-of-spi-indicators.html#cb49-43" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">CPI_ref_period=</span><span class="kw">str_sub</span>(CPI.reference.period.review,<span class="dv">1</span>,<span class="dv">4</span>),</span>
<span id="cb49-44"><a href="technical-documentation-of-spi-indicators.html#cb49-44" aria-hidden="true"></a>         <span class="dt">CPI_ref_period=</span><span class="kw">as.numeric</span>(CPI_ref_period),</span>
<span id="cb49-45"><a href="technical-documentation-of-spi-indicators.html#cb49-45" aria-hidden="true"></a>         <span class="dt">CPI_weight_change=</span><span class="kw">str_sub</span>(last_change,<span class="dv">1</span>,<span class="dv">4</span>),</span>
<span id="cb49-46"><a href="technical-documentation-of-spi-indicators.html#cb49-46" aria-hidden="true"></a>         <span class="dt">CPI_weight_change=</span><span class="kw">as.numeric</span>(CPI_weight_change)) <span class="op">%&gt;%</span></span>
<span id="cb49-47"><a href="technical-documentation-of-spi-indicators.html#cb49-47" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RAW.D5.2.4.CPIBY.IMF=</span><span class="kw">if_else</span>((CPI_weight_change<span class="op">&gt;=</span><span class="dv">2019</span> <span class="op">&amp;</span><span class="st"> </span>CPI_ref_period<span class="op">&lt;</span><span class="dv">2020</span>), <span class="st">&quot;annual chained&quot;</span>,<span class="kw">as.character</span>(CPI_ref_period))) <span class="op">%&gt;%</span></span>
<span id="cb49-48"><a href="technical-documentation-of-spi-indicators.html#cb49-48" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RAW.D5.2.4.CPIBY.IMF=</span><span class="kw">if_else</span>((iso3c<span class="op">==</span><span class="st">&#39;AUS&#39;</span> <span class="op">|</span><span class="st"> </span>iso3c<span class="op">==</span><span class="st">&#39;NZL&#39;</span>),<span class="st">&quot;annual chained&quot;</span>,<span class="kw">as.character</span>(RAW.D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF))) <span class="co">#replace Australia and New Zealand as annual chain linking.  They use quarterly cpi releases and do not show up in this dataset</span></span>
<span id="cb49-49"><a href="technical-documentation-of-spi-indicators.html#cb49-49" aria-hidden="true"></a>  </span>
<span id="cb49-50"><a href="technical-documentation-of-spi-indicators.html#cb49-50" aria-hidden="true"></a><span class="co">#score from 2010 to 2019  </span></span>
<span id="cb49-51"><a href="technical-documentation-of-spi-indicators.html#cb49-51" aria-hidden="true"></a><span class="cf">if</span> (<span class="kw">exists</span>(<span class="st">&#39;D5.2.4.CPIBY.IMF&#39;</span>)) {</span>
<span id="cb49-52"><a href="technical-documentation-of-spi-indicators.html#cb49-52" aria-hidden="true"></a>    <span class="kw">rm</span>(D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF)</span>
<span id="cb49-53"><a href="technical-documentation-of-spi-indicators.html#cb49-53" aria-hidden="true"></a>} </span>
<span id="cb49-54"><a href="technical-documentation-of-spi-indicators.html#cb49-54" aria-hidden="true"></a></span>
<span id="cb49-55"><a href="technical-documentation-of-spi-indicators.html#cb49-55" aria-hidden="true"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">c</span>(<span class="dv">2015</span><span class="op">:</span><span class="dv">2019</span>)) {</span>
<span id="cb49-56"><a href="technical-documentation-of-spi-indicators.html#cb49-56" aria-hidden="true"></a>  temp &lt;-<span class="st"> </span>D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF.RAW <span class="op">%&gt;%</span></span>
<span id="cb49-57"><a href="technical-documentation-of-spi-indicators.html#cb49-57" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">date=</span>i) <span class="op">%&gt;%</span></span>
<span id="cb49-58"><a href="technical-documentation-of-spi-indicators.html#cb49-58" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.4.CPIBY.IMF=</span><span class="kw">case_when</span>(</span>
<span id="cb49-59"><a href="technical-documentation-of-spi-indicators.html#cb49-59" aria-hidden="true"></a>      RAW.D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF<span class="op">==</span><span class="st">&quot;annual chained&quot;</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb49-60"><a href="technical-documentation-of-spi-indicators.html#cb49-60" aria-hidden="true"></a>      (date<span class="op">-</span><span class="kw">as.numeric</span>(RAW.D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF))<span class="op">&lt;=</span><span class="dv">10</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>, <span class="co">#within 10 years of reference period</span></span>
<span id="cb49-61"><a href="technical-documentation-of-spi-indicators.html#cb49-61" aria-hidden="true"></a>      <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb49-62"><a href="technical-documentation-of-spi-indicators.html#cb49-62" aria-hidden="true"></a>    )) <span class="op">%&gt;%</span></span>
<span id="cb49-63"><a href="technical-documentation-of-spi-indicators.html#cb49-63" aria-hidden="true"></a><span class="st">    </span><span class="kw">select</span>(iso3c, date, RAW.D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF, SPI.D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF  ) <span class="op">%&gt;%</span></span>
<span id="cb49-64"><a href="technical-documentation-of-spi-indicators.html#cb49-64" aria-hidden="true"></a><span class="st">    </span><span class="kw">arrange</span>(date, iso3c)</span>
<span id="cb49-65"><a href="technical-documentation-of-spi-indicators.html#cb49-65" aria-hidden="true"></a>  </span>
<span id="cb49-66"><a href="technical-documentation-of-spi-indicators.html#cb49-66" aria-hidden="true"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="kw">exists</span>(<span class="st">&#39;D5.2.4.CPIBY.IMF&#39;</span>)) {</span>
<span id="cb49-67"><a href="technical-documentation-of-spi-indicators.html#cb49-67" aria-hidden="true"></a>    D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF &lt;-<span class="st"> </span>temp</span>
<span id="cb49-68"><a href="technical-documentation-of-spi-indicators.html#cb49-68" aria-hidden="true"></a>  } <span class="cf">else</span> {</span>
<span id="cb49-69"><a href="technical-documentation-of-spi-indicators.html#cb49-69" aria-hidden="true"></a>    D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF &lt;-<span class="st"> </span>D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF <span class="op">%&gt;%</span></span>
<span id="cb49-70"><a href="technical-documentation-of-spi-indicators.html#cb49-70" aria-hidden="true"></a><span class="st">      </span><span class="kw">bind_rows</span>(temp)</span>
<span id="cb49-71"><a href="technical-documentation-of-spi-indicators.html#cb49-71" aria-hidden="true"></a>  }</span>
<span id="cb49-72"><a href="technical-documentation-of-spi-indicators.html#cb49-72" aria-hidden="true"></a>  </span>
<span id="cb49-73"><a href="technical-documentation-of-spi-indicators.html#cb49-73" aria-hidden="true"></a>}</span>
<span id="cb49-74"><a href="technical-documentation-of-spi-indicators.html#cb49-74" aria-hidden="true"></a></span>
<span id="cb49-75"><a href="technical-documentation-of-spi-indicators.html#cb49-75" aria-hidden="true"></a></span>
<span id="cb49-76"><a href="technical-documentation-of-spi-indicators.html#cb49-76" aria-hidden="true"></a></span>
<span id="cb49-77"><a href="technical-documentation-of-spi-indicators.html#cb49-77" aria-hidden="true"></a><span class="co">#update based on IMF data.  Use manually collected value when other value not available</span></span>
<span id="cb49-78"><a href="technical-documentation-of-spi-indicators.html#cb49-78" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY &lt;-<span class="st"> </span>D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY <span class="op">%&gt;%</span></span>
<span id="cb49-79"><a href="technical-documentation-of-spi-indicators.html#cb49-79" aria-hidden="true"></a><span class="st">  </span><span class="kw">full_join</span>(D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF) <span class="op">%&gt;%</span></span>
<span id="cb49-80"><a href="technical-documentation-of-spi-indicators.html#cb49-80" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.4.CPIBY=</span><span class="kw">if_else</span>(<span class="op">!</span><span class="kw">is.na</span>(SPI.D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF),SPI.D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF,SPI.D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY)) <span class="op">%&gt;%</span></span>
<span id="cb49-81"><a href="technical-documentation-of-spi-indicators.html#cb49-81" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>country,<span class="op">-</span>SPI.D5.<span class="dv">2</span>.<span class="fl">4.</span>CPIBY.IMF) </span></code></pre></div>
</div>
<div id="classification-of-household-consumption" class="section level4" number="2.5.2.5">
<h4><span class="header-section-number">2.5.2.5</span> 5.2.5 Classification of household consumption</h4>
<p>Classification of Individual Consumption According to Purpose (COICOP)
is used in household budget surveys, consumer price indices and international
comparisons of gross domestic product (GDP) and its component expenditures.<br />
Although COICOP is not strictly linked to any particular model of consumer
behavior, the classification is designed to broadly reflect differences in
income elasticities. It is an integral part of the SNA1993 and more detailed
subdivision of the classes provide comparability between countries and between
statistics in these different areas.</p>
<p>1 Point. Follow Classification of Individual Consumption by Purpose (COICOP) 0 Points. Otherwise</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="technical-documentation-of-spi-indicators.html#cb50-1" aria-hidden="true"></a><span class="co">#read in csv file.</span></span>
<span id="cb50-2"><a href="technical-documentation-of-spi-indicators.html#cb50-2" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">5.</span>HOUS &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.2_DISM&quot;</span>,<span class="st">&quot;D5.2.5.HOUS.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> )) <span class="op">%&gt;%</span></span>
<span id="cb50-3"><a href="technical-documentation-of-spi-indicators.html#cb50-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.5.HOUS=</span><span class="kw">case_when</span>(</span>
<span id="cb50-4"><a href="technical-documentation-of-spi-indicators.html#cb50-4" aria-hidden="true"></a>    HOUS<span class="op">==</span><span class="st">&quot;COICOP&quot;</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb50-5"><a href="technical-documentation-of-spi-indicators.html#cb50-5" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb50-6"><a href="technical-documentation-of-spi-indicators.html#cb50-6" aria-hidden="true"></a>  ),</span>
<span id="cb50-7"><a href="technical-documentation-of-spi-indicators.html#cb50-7" aria-hidden="true"></a>  <span class="dt">RAW.D5.2.5.HOUS=</span>HOUS)  <span class="op">%&gt;%</span></span>
<span id="cb50-8"><a href="technical-documentation-of-spi-indicators.html#cb50-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, country, date, RAW.D5.<span class="dv">2</span>.<span class="fl">5.</span>HOUS, SPI.D5.<span class="dv">2</span>.<span class="fl">5.</span>HOUS  ) <span class="op">%&gt;%</span></span>
<span id="cb50-9"><a href="technical-documentation-of-spi-indicators.html#cb50-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, country)</span>
<span id="cb50-10"><a href="technical-documentation-of-spi-indicators.html#cb50-10" aria-hidden="true"></a></span>
<span id="cb50-11"><a href="technical-documentation-of-spi-indicators.html#cb50-11" aria-hidden="true"></a><span class="co">#####</span></span>
<span id="cb50-12"><a href="technical-documentation-of-spi-indicators.html#cb50-12" aria-hidden="true"></a><span class="co"># IMF Data</span></span>
<span id="cb50-13"><a href="technical-documentation-of-spi-indicators.html#cb50-13" aria-hidden="true"></a><span class="co">#####</span></span>
<span id="cb50-14"><a href="technical-documentation-of-spi-indicators.html#cb50-14" aria-hidden="true"></a></span>
<span id="cb50-15"><a href="technical-documentation-of-spi-indicators.html#cb50-15" aria-hidden="true"></a><span class="co">#use alternative data source provided by the IMF</span></span>
<span id="cb50-16"><a href="technical-documentation-of-spi-indicators.html#cb50-16" aria-hidden="true"></a></span>
<span id="cb50-17"><a href="technical-documentation-of-spi-indicators.html#cb50-17" aria-hidden="true"></a><span class="co">#read in data on COICOP from IMF</span></span>
<span id="cb50-18"><a href="technical-documentation-of-spi-indicators.html#cb50-18" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">5.</span>HOUS.IMF &lt;-<span class="st">   </span><span class="kw">read_excel</span>(<span class="dt">path=</span><span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.2_DISM&quot;</span>,<span class="st">&quot;2020.11.04_Compiled Data for World Bank.xlsx&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> ),</span>
<span id="cb50-19"><a href="technical-documentation-of-spi-indicators.html#cb50-19" aria-hidden="true"></a>                               <span class="dt">sheet =</span> <span class="st">&quot;3. Household Consump Class&quot;</span>,</span>
<span id="cb50-20"><a href="technical-documentation-of-spi-indicators.html#cb50-20" aria-hidden="true"></a>                               <span class="dt">skip=</span><span class="dv">0</span></span>
<span id="cb50-21"><a href="technical-documentation-of-spi-indicators.html#cb50-21" aria-hidden="true"></a>                               ) <span class="op">%&gt;%</span></span>
<span id="cb50-22"><a href="technical-documentation-of-spi-indicators.html#cb50-22" aria-hidden="true"></a><span class="st">  </span><span class="kw">as_tibble</span>(<span class="dt">.name_repair=</span><span class="st">&#39;universal&#39;</span>) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb50-23"><a href="technical-documentation-of-spi-indicators.html#cb50-23" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(</span>
<span id="cb50-24"><a href="technical-documentation-of-spi-indicators.html#cb50-24" aria-hidden="true"></a>    <span class="dt">IMF_code=</span>Code,</span>
<span id="cb50-25"><a href="technical-documentation-of-spi-indicators.html#cb50-25" aria-hidden="true"></a>    <span class="dt">IMF_country=</span>Country,</span>
<span id="cb50-26"><a href="technical-documentation-of-spi-indicators.html#cb50-26" aria-hidden="true"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb50-27"><a href="technical-documentation-of-spi-indicators.html#cb50-27" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.5.HOUS.IMF=</span><span class="kw">case_when</span>(</span>
<span id="cb50-28"><a href="technical-documentation-of-spi-indicators.html#cb50-28" aria-hidden="true"></a>    Status<span class="op">==</span><span class="st">&quot;CIOCOP&quot;</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb50-29"><a href="technical-documentation-of-spi-indicators.html#cb50-29" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb50-30"><a href="technical-documentation-of-spi-indicators.html#cb50-30" aria-hidden="true"></a>  ),</span>
<span id="cb50-31"><a href="technical-documentation-of-spi-indicators.html#cb50-31" aria-hidden="true"></a>  <span class="dt">RAW.D5.2.5.HOUS.IMF=</span>Status) <span class="op">%&gt;%</span></span>
<span id="cb50-32"><a href="technical-documentation-of-spi-indicators.html#cb50-32" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">IMF_code=</span><span class="kw">as.numeric</span>(IMF_code)) <span class="op">%&gt;%</span></span>
<span id="cb50-33"><a href="technical-documentation-of-spi-indicators.html#cb50-33" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(imf_codes) <span class="op">%&gt;%</span></span>
<span id="cb50-34"><a href="technical-documentation-of-spi-indicators.html#cb50-34" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, RAW.D5.<span class="dv">2</span>.<span class="fl">5.</span>HOUS.IMF,SPI.D5.<span class="dv">2</span>.<span class="fl">5.</span>HOUS.IMF ) <span class="op">%&gt;%</span></span>
<span id="cb50-35"><a href="technical-documentation-of-spi-indicators.html#cb50-35" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date=</span><span class="dv">2019</span>)</span>
<span id="cb50-36"><a href="technical-documentation-of-spi-indicators.html#cb50-36" aria-hidden="true"></a>  </span>
<span id="cb50-37"><a href="technical-documentation-of-spi-indicators.html#cb50-37" aria-hidden="true"></a>  </span>
<span id="cb50-38"><a href="technical-documentation-of-spi-indicators.html#cb50-38" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">5.</span>HOUS &lt;-<span class="st">  </span>D5.<span class="dv">2</span>.<span class="fl">5.</span>HOUS <span class="op">%&gt;%</span></span>
<span id="cb50-39"><a href="technical-documentation-of-spi-indicators.html#cb50-39" aria-hidden="true"></a><span class="st">  </span><span class="kw">full_join</span>(D5.<span class="dv">2</span>.<span class="fl">5.</span>HOUS.IMF) <span class="op">%&gt;%</span></span>
<span id="cb50-40"><a href="technical-documentation-of-spi-indicators.html#cb50-40" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.5.HOUS=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(SPI.D5.<span class="dv">2</span>.<span class="fl">5.</span>HOUS),SPI.D5.<span class="dv">2</span>.<span class="fl">5.</span>HOUS.IMF,SPI.D5.<span class="dv">2</span>.<span class="fl">5.</span>HOUS)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#fill in with IMF data if missing.  This applies mostly to high income countries</span></span>
<span id="cb50-41"><a href="technical-documentation-of-spi-indicators.html#cb50-41" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>country,<span class="op">-</span>SPI.D5.<span class="dv">2</span>.<span class="fl">5.</span>HOUS.IMF) <span class="op">%&gt;%</span></span>
<span id="cb50-42"><a href="technical-documentation-of-spi-indicators.html#cb50-42" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, iso3c) </span></code></pre></div>
</div>
<div id="classification-of-status-of-employment" class="section level4" number="2.5.2.6">
<h4><span class="header-section-number">2.5.2.6</span> 5.2.6 Classification of status of employment</h4>
<p>Classification of status of employment refers to employment data that are
compiled using the current international standard International Classification
of Status in Employment (ISCE-93). It classifies jobs with respect to the type
of explicit or implicit contract of employment between the job holder and the
economic unit in which he or she is employed. Therefore, it aims to provide the
basis for production of internationally comparable statistics on the employment
relationship, including the distinction between salaried employment and self-employment.</p>
<p>1 Point. Follow International Labour Organization, International Classification of Status in Employment (ICSE-93) or 2012 North American Industry Classification System (NAICS). 0 Points Otherwise.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="technical-documentation-of-spi-indicators.html#cb51-1" aria-hidden="true"></a><span class="co">#read in csv file.</span></span>
<span id="cb51-2"><a href="technical-documentation-of-spi-indicators.html#cb51-2" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">6.</span>EMPL &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.2_DISM&quot;</span>,<span class="st">&quot;D5.2.6.EMPL.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> )) <span class="op">%&gt;%</span></span>
<span id="cb51-3"><a href="technical-documentation-of-spi-indicators.html#cb51-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.6.EMPL=</span><span class="kw">case_when</span>(</span>
<span id="cb51-4"><a href="technical-documentation-of-spi-indicators.html#cb51-4" aria-hidden="true"></a>    EMPL<span class="op">==</span><span class="st">&quot;ICSE-93&quot;</span> <span class="op">|</span><span class="st"> </span>EMPL<span class="op">==</span><span class="st">&quot;NAICS&quot;</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb51-5"><a href="technical-documentation-of-spi-indicators.html#cb51-5" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb51-6"><a href="technical-documentation-of-spi-indicators.html#cb51-6" aria-hidden="true"></a>  ),</span>
<span id="cb51-7"><a href="technical-documentation-of-spi-indicators.html#cb51-7" aria-hidden="true"></a>  <span class="dt">RAW.D5.2.6.EMPL=</span>EMPL)  <span class="op">%&gt;%</span></span>
<span id="cb51-8"><a href="technical-documentation-of-spi-indicators.html#cb51-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, country, date, RAW.D5.<span class="dv">2</span>.<span class="fl">6.</span>EMPL, SPI.D5.<span class="dv">2</span>.<span class="fl">6.</span>EMPL  ) <span class="op">%&gt;%</span></span>
<span id="cb51-9"><a href="technical-documentation-of-spi-indicators.html#cb51-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, country)</span></code></pre></div>
</div>
<div id="central-government-accounting-status" class="section level4" number="2.5.2.7">
<h4><span class="header-section-number">2.5.2.7</span> 5.2.7 Central government accounting status</h4>
<p>Government finance accounting status refers to the accounting basis for
reporting central government financial data. For many countries’ government
finance data, have been consolidated into one set of accounts capturing all
the central government’s fiscal activities and following noncash recording basis.<br />
Budgetary central government accounts do not necessarily include all central government
units, the picture they provide of central government activities is usually incomplete.</p>
<p>1 Point. Consolidated central government accounting follows noncash recording basis<br />
0.5 Points. Consolidated central government accounting follows cash recording basis<br />
0 Points. Otherwise</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="technical-documentation-of-spi-indicators.html#cb52-1" aria-hidden="true"></a><span class="co">#read in csv file.</span></span>
<span id="cb52-2"><a href="technical-documentation-of-spi-indicators.html#cb52-2" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">7.</span>CGOV &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.2_DISM&quot;</span>,<span class="st">&quot;D5.2.7.CGOV.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> )) <span class="op">%&gt;%</span></span>
<span id="cb52-3"><a href="technical-documentation-of-spi-indicators.html#cb52-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.7.CGOV=</span><span class="kw">case_when</span>(</span>
<span id="cb52-4"><a href="technical-documentation-of-spi-indicators.html#cb52-4" aria-hidden="true"></a>    CGOV<span class="op">==</span><span class="st">&quot;AC&quot;</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb52-5"><a href="technical-documentation-of-spi-indicators.html#cb52-5" aria-hidden="true"></a>    CGOV<span class="op">==</span><span class="st">&quot;CA&quot;</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>,</span>
<span id="cb52-6"><a href="technical-documentation-of-spi-indicators.html#cb52-6" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb52-7"><a href="technical-documentation-of-spi-indicators.html#cb52-7" aria-hidden="true"></a>  ),</span>
<span id="cb52-8"><a href="technical-documentation-of-spi-indicators.html#cb52-8" aria-hidden="true"></a>  <span class="dt">RAW.D5.2.7.CGOV=</span>CGOV)  <span class="op">%&gt;%</span></span>
<span id="cb52-9"><a href="technical-documentation-of-spi-indicators.html#cb52-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, country, date, RAW.D5.<span class="dv">2</span>.<span class="fl">7.</span>CGOV, SPI.D5.<span class="dv">2</span>.<span class="fl">7.</span>CGOV  ) <span class="op">%&gt;%</span></span>
<span id="cb52-10"><a href="technical-documentation-of-spi-indicators.html#cb52-10" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, country)</span>
<span id="cb52-11"><a href="technical-documentation-of-spi-indicators.html#cb52-11" aria-hidden="true"></a></span>
<span id="cb52-12"><a href="technical-documentation-of-spi-indicators.html#cb52-12" aria-hidden="true"></a><span class="co">#####</span></span>
<span id="cb52-13"><a href="technical-documentation-of-spi-indicators.html#cb52-13" aria-hidden="true"></a><span class="co"># IMF Data</span></span>
<span id="cb52-14"><a href="technical-documentation-of-spi-indicators.html#cb52-14" aria-hidden="true"></a><span class="co">#####</span></span>
<span id="cb52-15"><a href="technical-documentation-of-spi-indicators.html#cb52-15" aria-hidden="true"></a></span>
<span id="cb52-16"><a href="technical-documentation-of-spi-indicators.html#cb52-16" aria-hidden="true"></a><span class="co">#use alternative data source provided by the IMF</span></span>
<span id="cb52-17"><a href="technical-documentation-of-spi-indicators.html#cb52-17" aria-hidden="true"></a></span>
<span id="cb52-18"><a href="technical-documentation-of-spi-indicators.html#cb52-18" aria-hidden="true"></a><span class="co">#read in data from IMF</span></span>
<span id="cb52-19"><a href="technical-documentation-of-spi-indicators.html#cb52-19" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">7.</span>CGOV.IMF &lt;-<span class="st">   </span><span class="kw">read_excel</span>(<span class="dt">path=</span><span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.2_DISM&quot;</span>,<span class="st">&quot;2020.11.04_Compiled Data for World Bank.xlsx&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> ),</span>
<span id="cb52-20"><a href="technical-documentation-of-spi-indicators.html#cb52-20" aria-hidden="true"></a>                               <span class="dt">sheet =</span> <span class="st">&quot;5. Cntrl Gct Acct Status&quot;</span>,</span>
<span id="cb52-21"><a href="technical-documentation-of-spi-indicators.html#cb52-21" aria-hidden="true"></a>                               <span class="dt">skip=</span><span class="dv">6</span></span>
<span id="cb52-22"><a href="technical-documentation-of-spi-indicators.html#cb52-22" aria-hidden="true"></a>                               ) <span class="op">%&gt;%</span></span>
<span id="cb52-23"><a href="technical-documentation-of-spi-indicators.html#cb52-23" aria-hidden="true"></a><span class="st">  </span><span class="kw">as_tibble</span>(<span class="dt">.name_repair=</span><span class="st">&#39;universal&#39;</span>) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb52-24"><a href="technical-documentation-of-spi-indicators.html#cb52-24" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(</span>
<span id="cb52-25"><a href="technical-documentation-of-spi-indicators.html#cb52-25" aria-hidden="true"></a>    <span class="dt">IMF_code=</span>Code,</span>
<span id="cb52-26"><a href="technical-documentation-of-spi-indicators.html#cb52-26" aria-hidden="true"></a>    <span class="dt">IMF_country=</span>Country,</span>
<span id="cb52-27"><a href="technical-documentation-of-spi-indicators.html#cb52-27" aria-hidden="true"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb52-28"><a href="technical-documentation-of-spi-indicators.html#cb52-28" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.7.CGOV.IMF=</span><span class="kw">case_when</span>(</span>
<span id="cb52-29"><a href="technical-documentation-of-spi-indicators.html#cb52-29" aria-hidden="true"></a>    General.Government..consolidated.<span class="op">==</span><span class="st">&quot;AC&quot;</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb52-30"><a href="technical-documentation-of-spi-indicators.html#cb52-30" aria-hidden="true"></a>    General.Government..consolidated.<span class="op">==</span><span class="st">&quot;CA&quot;</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>,</span>
<span id="cb52-31"><a href="technical-documentation-of-spi-indicators.html#cb52-31" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb52-32"><a href="technical-documentation-of-spi-indicators.html#cb52-32" aria-hidden="true"></a>  ),</span>
<span id="cb52-33"><a href="technical-documentation-of-spi-indicators.html#cb52-33" aria-hidden="true"></a>  <span class="dt">RAW.D5.2.7.CGOV.IMF=</span>General.Government..consolidated.) <span class="op">%&gt;%</span></span>
<span id="cb52-34"><a href="technical-documentation-of-spi-indicators.html#cb52-34" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">IMF_code=</span><span class="kw">as.numeric</span>(IMF_code)) <span class="op">%&gt;%</span></span>
<span id="cb52-35"><a href="technical-documentation-of-spi-indicators.html#cb52-35" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(imf_codes) <span class="op">%&gt;%</span></span>
<span id="cb52-36"><a href="technical-documentation-of-spi-indicators.html#cb52-36" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, RAW.D5.<span class="dv">2</span>.<span class="fl">7.</span>CGOV.IMF,SPI.D5.<span class="dv">2</span>.<span class="fl">7.</span>CGOV.IMF ) <span class="op">%&gt;%</span></span>
<span id="cb52-37"><a href="technical-documentation-of-spi-indicators.html#cb52-37" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date=</span><span class="dv">2019</span>)</span>
<span id="cb52-38"><a href="technical-documentation-of-spi-indicators.html#cb52-38" aria-hidden="true"></a>  </span>
<span id="cb52-39"><a href="technical-documentation-of-spi-indicators.html#cb52-39" aria-hidden="true"></a>  </span>
<span id="cb52-40"><a href="technical-documentation-of-spi-indicators.html#cb52-40" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">7.</span>CGOV &lt;-<span class="st">  </span>D5.<span class="dv">2</span>.<span class="fl">7.</span>CGOV <span class="op">%&gt;%</span></span>
<span id="cb52-41"><a href="technical-documentation-of-spi-indicators.html#cb52-41" aria-hidden="true"></a><span class="st">  </span><span class="kw">full_join</span>(D5.<span class="dv">2</span>.<span class="fl">7.</span>CGOV.IMF) <span class="op">%&gt;%</span></span>
<span id="cb52-42"><a href="technical-documentation-of-spi-indicators.html#cb52-42" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.7.CGOV=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(SPI.D5.<span class="dv">2</span>.<span class="fl">7.</span>CGOV),SPI.D5.<span class="dv">2</span>.<span class="fl">7.</span>CGOV.IMF,SPI.D5.<span class="dv">2</span>.<span class="fl">7.</span>CGOV)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#fill in with IMF data if missing.  This applies mostly to high income countries</span></span>
<span id="cb52-43"><a href="technical-documentation-of-spi-indicators.html#cb52-43" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>country,<span class="op">-</span>SPI.D5.<span class="dv">2</span>.<span class="fl">7.</span>CGOV.IMF) <span class="op">%&gt;%</span></span>
<span id="cb52-44"><a href="technical-documentation-of-spi-indicators.html#cb52-44" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, iso3c)</span></code></pre></div>
</div>
<div id="compilation-of-government-finance-statistics" class="section level4" number="2.5.2.8">
<h4><span class="header-section-number">2.5.2.8</span> 5.2.8 Compilation of government finance statistics</h4>
<p>(GFSM) in use for compiling the data. It provides guidelines on the institutional
structure of governments and the presentation of fiscal data in a format similar to
business accounting with a balance sheet and income statement plus guidelines on the
treatment of exchange rate and other valuation adjustments. The latest manual GFSM2014
is harmonized with the SNA2008.</p>
<p>1 Point. Follow the latest Government Finance Statistical Manual (2014)/ ESA2010<br />
0.5 Points. Previous version is used (GFSM 2001)<br />
0 Points. Otherwise</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="technical-documentation-of-spi-indicators.html#cb53-1" aria-hidden="true"></a><span class="co">#read in csv file.</span></span>
<span id="cb53-2"><a href="technical-documentation-of-spi-indicators.html#cb53-2" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">8.</span>FINA &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.2_DISM&quot;</span>,<span class="st">&quot;D5.2.8.FINA.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> )) <span class="op">%&gt;%</span></span>
<span id="cb53-3"><a href="technical-documentation-of-spi-indicators.html#cb53-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.8.FINA=</span><span class="kw">case_when</span>(</span>
<span id="cb53-4"><a href="technical-documentation-of-spi-indicators.html#cb53-4" aria-hidden="true"></a>    FINA<span class="op">==</span><span class="st">&quot;2014&quot;</span> <span class="op">|</span><span class="st"> </span>FINA<span class="op">==</span><span class="st">&quot;ESA 2010&quot;</span><span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb53-5"><a href="technical-documentation-of-spi-indicators.html#cb53-5" aria-hidden="true"></a>    FINA<span class="op">==</span><span class="st">&quot;2001&quot;</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.5</span>,</span>
<span id="cb53-6"><a href="technical-documentation-of-spi-indicators.html#cb53-6" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb53-7"><a href="technical-documentation-of-spi-indicators.html#cb53-7" aria-hidden="true"></a>  ),</span>
<span id="cb53-8"><a href="technical-documentation-of-spi-indicators.html#cb53-8" aria-hidden="true"></a>  <span class="dt">RAW.D5.2.8.FINA=</span>FINA)  <span class="op">%&gt;%</span></span>
<span id="cb53-9"><a href="technical-documentation-of-spi-indicators.html#cb53-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, country, date, RAW.D5.<span class="dv">2</span>.<span class="fl">8.</span>FINA, SPI.D5.<span class="dv">2</span>.<span class="fl">8.</span>FINA  ) <span class="op">%&gt;%</span></span>
<span id="cb53-10"><a href="technical-documentation-of-spi-indicators.html#cb53-10" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, country)</span></code></pre></div>
</div>
<div id="compilation-of-monetary-and-financial-statistics" class="section level4" number="2.5.2.9">
<h4><span class="header-section-number">2.5.2.9</span> 5.2.9 Compilation of monetary and financial statistics</h4>
<p>Compilation of monetary and financial statistics refers to the Monetary and Financial Statistics Manual
(MFSM) in use. It covers concepts, definitions, classifications of financial instruments and sectors, and
accounting rules, and provides a comprehensive analytic framework for monetary and financial planning and policy
determination. The Monetary and Finance Statistics: Compilation Guide (2008) provides detailed guidelines for
the compilation of monetary and financial statistics in addition to MFSM.</p>
<p>1 Point. Follow the latest Monetary and Finance Statistics Manual (2000) or Monetary and Finance Statistics: Compilation Guide (2008/2016)
0 Points. Otherwise</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="technical-documentation-of-spi-indicators.html#cb54-1" aria-hidden="true"></a><span class="co">#read in csv file.</span></span>
<span id="cb54-2"><a href="technical-documentation-of-spi-indicators.html#cb54-2" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">9.</span>MONY &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.2_DISM&quot;</span>,<span class="st">&quot;D5.2.9.MONY.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> )) <span class="op">%&gt;%</span></span>
<span id="cb54-3"><a href="technical-documentation-of-spi-indicators.html#cb54-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.9.MONY=</span><span class="kw">case_when</span>(</span>
<span id="cb54-4"><a href="technical-documentation-of-spi-indicators.html#cb54-4" aria-hidden="true"></a>    MONY<span class="op">==</span><span class="st">&quot;MFSM 2000&quot;</span> <span class="op">|</span><span class="st"> </span>MONY<span class="op">==</span><span class="st">&quot;MFSMCG 2016&quot;</span><span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb54-5"><a href="technical-documentation-of-spi-indicators.html#cb54-5" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb54-6"><a href="technical-documentation-of-spi-indicators.html#cb54-6" aria-hidden="true"></a>  ),</span>
<span id="cb54-7"><a href="technical-documentation-of-spi-indicators.html#cb54-7" aria-hidden="true"></a>  <span class="dt">RAW.D5.2.9.MONY=</span>MONY)  <span class="op">%&gt;%</span></span>
<span id="cb54-8"><a href="technical-documentation-of-spi-indicators.html#cb54-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, country, date, RAW.D5.<span class="dv">2</span>.<span class="fl">9.</span>MONY, SPI.D5.<span class="dv">2</span>.<span class="fl">9.</span>MONY  ) <span class="op">%&gt;%</span></span>
<span id="cb54-9"><a href="technical-documentation-of-spi-indicators.html#cb54-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, country)</span>
<span id="cb54-10"><a href="technical-documentation-of-spi-indicators.html#cb54-10" aria-hidden="true"></a></span>
<span id="cb54-11"><a href="technical-documentation-of-spi-indicators.html#cb54-11" aria-hidden="true"></a><span class="co">#####</span></span>
<span id="cb54-12"><a href="technical-documentation-of-spi-indicators.html#cb54-12" aria-hidden="true"></a><span class="co"># IMF Data</span></span>
<span id="cb54-13"><a href="technical-documentation-of-spi-indicators.html#cb54-13" aria-hidden="true"></a><span class="co">#####</span></span>
<span id="cb54-14"><a href="technical-documentation-of-spi-indicators.html#cb54-14" aria-hidden="true"></a></span>
<span id="cb54-15"><a href="technical-documentation-of-spi-indicators.html#cb54-15" aria-hidden="true"></a><span class="co">#use alternative data source provided by the IMF</span></span>
<span id="cb54-16"><a href="technical-documentation-of-spi-indicators.html#cb54-16" aria-hidden="true"></a></span>
<span id="cb54-17"><a href="technical-documentation-of-spi-indicators.html#cb54-17" aria-hidden="true"></a><span class="co">#read in data from IMF</span></span>
<span id="cb54-18"><a href="technical-documentation-of-spi-indicators.html#cb54-18" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">9.</span>MONY.IMF &lt;-<span class="st">   </span><span class="kw">read_excel</span>(<span class="dt">path=</span><span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.2_DISM&quot;</span>,<span class="st">&quot;2020.11.04_Compiled Data for World Bank.xlsx&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> ),</span>
<span id="cb54-19"><a href="technical-documentation-of-spi-indicators.html#cb54-19" aria-hidden="true"></a>                               <span class="dt">sheet =</span><span class="st">&quot;7. MFS Compilation status&quot;</span>,</span>
<span id="cb54-20"><a href="technical-documentation-of-spi-indicators.html#cb54-20" aria-hidden="true"></a>                               <span class="dt">skip=</span><span class="dv">0</span></span>
<span id="cb54-21"><a href="technical-documentation-of-spi-indicators.html#cb54-21" aria-hidden="true"></a>                               ) <span class="op">%&gt;%</span></span>
<span id="cb54-22"><a href="technical-documentation-of-spi-indicators.html#cb54-22" aria-hidden="true"></a><span class="st">  </span><span class="kw">as_tibble</span>(<span class="dt">.name_repair=</span><span class="st">&#39;universal&#39;</span>) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb54-23"><a href="technical-documentation-of-spi-indicators.html#cb54-23" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(</span>
<span id="cb54-24"><a href="technical-documentation-of-spi-indicators.html#cb54-24" aria-hidden="true"></a>    <span class="dt">IMF_code=</span>Code,</span>
<span id="cb54-25"><a href="technical-documentation-of-spi-indicators.html#cb54-25" aria-hidden="true"></a>    <span class="dt">IMF_country=</span>Country,</span>
<span id="cb54-26"><a href="technical-documentation-of-spi-indicators.html#cb54-26" aria-hidden="true"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb54-27"><a href="technical-documentation-of-spi-indicators.html#cb54-27" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.9.MONY.IMF=</span><span class="kw">case_when</span>(</span>
<span id="cb54-28"><a href="technical-documentation-of-spi-indicators.html#cb54-28" aria-hidden="true"></a>    <span class="kw">grepl</span>(<span class="st">&#39;MFSM 2000&#39;</span>,Monetary.and.Financial.Statistics..MFS..Reporting.Status) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb54-29"><a href="technical-documentation-of-spi-indicators.html#cb54-29" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb54-30"><a href="technical-documentation-of-spi-indicators.html#cb54-30" aria-hidden="true"></a>  ),</span>
<span id="cb54-31"><a href="technical-documentation-of-spi-indicators.html#cb54-31" aria-hidden="true"></a>  <span class="dt">RAW.D5.2.9.MONY.IMF=</span>Monetary.and.Financial.Statistics..MFS..Reporting.Status) <span class="op">%&gt;%</span></span>
<span id="cb54-32"><a href="technical-documentation-of-spi-indicators.html#cb54-32" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">IMF_code=</span><span class="kw">as.numeric</span>(IMF_code)) <span class="op">%&gt;%</span></span>
<span id="cb54-33"><a href="technical-documentation-of-spi-indicators.html#cb54-33" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(imf_codes) <span class="op">%&gt;%</span></span>
<span id="cb54-34"><a href="technical-documentation-of-spi-indicators.html#cb54-34" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, RAW.D5.<span class="dv">2</span>.<span class="fl">9.</span>MONY.IMF,SPI.D5.<span class="dv">2</span>.<span class="fl">9.</span>MONY.IMF ) <span class="op">%&gt;%</span></span>
<span id="cb54-35"><a href="technical-documentation-of-spi-indicators.html#cb54-35" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date=</span><span class="dv">2019</span>)</span>
<span id="cb54-36"><a href="technical-documentation-of-spi-indicators.html#cb54-36" aria-hidden="true"></a>  </span>
<span id="cb54-37"><a href="technical-documentation-of-spi-indicators.html#cb54-37" aria-hidden="true"></a>  </span>
<span id="cb54-38"><a href="technical-documentation-of-spi-indicators.html#cb54-38" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">9.</span>MONY &lt;-<span class="st">  </span>D5.<span class="dv">2</span>.<span class="fl">9.</span>MONY <span class="op">%&gt;%</span></span>
<span id="cb54-39"><a href="technical-documentation-of-spi-indicators.html#cb54-39" aria-hidden="true"></a><span class="st">  </span><span class="kw">full_join</span>(D5.<span class="dv">2</span>.<span class="fl">9.</span>MONY.IMF) <span class="op">%&gt;%</span></span>
<span id="cb54-40"><a href="technical-documentation-of-spi-indicators.html#cb54-40" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.9.MONY=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(SPI.D5.<span class="dv">2</span>.<span class="fl">9.</span>MONY),SPI.D5.<span class="dv">2</span>.<span class="fl">9.</span>MONY.IMF,SPI.D5.<span class="dv">2</span>.<span class="fl">9.</span>MONY)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#fill in with IMF data if missing.  This applies mostly to high income countries</span></span>
<span id="cb54-41"><a href="technical-documentation-of-spi-indicators.html#cb54-41" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>country,<span class="op">-</span>SPI.D5.<span class="dv">2</span>.<span class="fl">9.</span>MONY.IMF) <span class="op">%&gt;%</span></span>
<span id="cb54-42"><a href="technical-documentation-of-spi-indicators.html#cb54-42" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, iso3c)</span></code></pre></div>
</div>
<div id="business-process" class="section level4" number="2.5.2.10">
<h4><span class="header-section-number">2.5.2.10</span> 5.2.10 Business process</h4>
<p>The Generic Statistical Business Process Model (GSBPM) aims to describe
statistics production in a general and process-oriented way. It is used
both within and between statistical offices as a common basis for work with
statistics production in different ways, such as quality, efficiency, standardization,
and process-orientation. It is used for all types of surveys, and “business” is not
related to “business statistics” but refers to the statistical office, simply expressed.</p>
<p>1 Point. GSBPM is in use
0 Points. Otherwise</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="technical-documentation-of-spi-indicators.html#cb55-1" aria-hidden="true"></a><span class="co">#read in csv file.</span></span>
<span id="cb55-2"><a href="technical-documentation-of-spi-indicators.html#cb55-2" aria-hidden="true"></a>D5.<span class="dv">2</span>.<span class="fl">10.</span>GSBP &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.2_DISM&quot;</span>,<span class="st">&quot;D5.2.10.GSBP.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> )) <span class="op">%&gt;%</span></span>
<span id="cb55-3"><a href="technical-documentation-of-spi-indicators.html#cb55-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SPI.D5.2.10.GSBP=</span><span class="kw">case_when</span>(</span>
<span id="cb55-4"><a href="technical-documentation-of-spi-indicators.html#cb55-4" aria-hidden="true"></a>    <span class="kw">str_to_lower</span>(GSBP)<span class="op">==</span><span class="st">&quot;yes&quot;</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb55-5"><a href="technical-documentation-of-spi-indicators.html#cb55-5" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span> </span>
<span id="cb55-6"><a href="technical-documentation-of-spi-indicators.html#cb55-6" aria-hidden="true"></a>  ),</span>
<span id="cb55-7"><a href="technical-documentation-of-spi-indicators.html#cb55-7" aria-hidden="true"></a>  <span class="dt">RAW.D5.2.10.GSBP=</span>GSBP)  <span class="op">%&gt;%</span></span>
<span id="cb55-8"><a href="technical-documentation-of-spi-indicators.html#cb55-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, country, date, RAW.D5.<span class="dv">2</span>.<span class="fl">10.</span>GSBP, SPI.D5.<span class="dv">2</span>.<span class="fl">10.</span>GSBP  ) <span class="op">%&gt;%</span></span>
<span id="cb55-9"><a href="technical-documentation-of-spi-indicators.html#cb55-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(date, country)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/msc-1.png" width="960" /><img src="SPI-book_files/figure-html/msc-2.png" width="960" /><img src="SPI-book_files/figure-html/msc-3.png" width="960" /><img src="SPI-book_files/figure-html/msc-4.png" width="960" /><img src="SPI-book_files/figure-html/msc-5.png" width="960" /><img src="SPI-book_files/figure-html/msc-6.png" width="960" /><img src="SPI-book_files/figure-html/msc-7.png" width="960" /><img src="SPI-book_files/figure-html/msc-8.png" width="960" /><img src="SPI-book_files/figure-html/msc-9.png" width="960" /><img src="SPI-book_files/figure-html/msc-10.png" width="960" /><img src="SPI-book_files/figure-html/msc-11.png" width="960" /><img src="SPI-book_files/figure-html/msc-12.png" width="960" /><img src="SPI-book_files/figure-html/msc-13.png" width="960" /><img src="SPI-book_files/figure-html/msc-14.png" width="960" /><img src="SPI-book_files/figure-html/msc-15.png" width="960" /><img src="SPI-book_files/figure-html/msc-16.png" width="960" /><img src="SPI-book_files/figure-html/msc-17.png" width="960" /><img src="SPI-book_files/figure-html/msc-18.png" width="960" /><img src="SPI-book_files/figure-html/msc-19.png" width="960" /><img src="SPI-book_files/figure-html/msc-20.png" width="960" /><img src="SPI-book_files/figure-html/msc-21.png" width="960" /><img src="SPI-book_files/figure-html/msc-22.png" width="960" /><img src="SPI-book_files/figure-html/msc-23.png" width="960" /><img src="SPI-book_files/figure-html/msc-24.png" width="960" /><img src="SPI-book_files/figure-html/msc-25.png" width="960" /><img src="SPI-book_files/figure-html/msc-26.png" width="960" /><img src="SPI-book_files/figure-html/msc-27.png" width="960" /><img src="SPI-book_files/figure-html/msc-28.png" width="960" /><img src="SPI-book_files/figure-html/msc-29.png" width="960" /><img src="SPI-book_files/figure-html/msc-30.png" width="960" /><img src="SPI-book_files/figure-html/msc-31.png" width="960" /><img src="SPI-book_files/figure-html/msc-32.png" width="960" /><img src="SPI-book_files/figure-html/msc-33.png" width="960" /><img src="SPI-book_files/figure-html/msc-34.png" width="960" /><img src="SPI-book_files/figure-html/msc-35.png" width="960" /><img src="SPI-book_files/figure-html/msc-36.png" width="960" /><img src="SPI-book_files/figure-html/msc-37.png" width="960" /><img src="SPI-book_files/figure-html/msc-38.png" width="960" /><img src="SPI-book_files/figure-html/msc-39.png" width="960" /><img src="SPI-book_files/figure-html/msc-40.png" width="960" /></p>
</div>
</div>
<div id="indicator-5.3-skills" class="section level3" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> Indicator 5.3: skills</h3>
<p>This indicator assesses the systematic use of statistical knowledge with statistical terms and indicators in national policy documents. It is a composite indicator consisting of 4 sub-indices that aim to reflect the relevance of statistical evidence. It comprises four main dimensions: i) Basic consideration; ii) Diagnosis and quantification; iii) Statistical Analysis; iv) Disaggregation.</p>
<p>Score ranges from 0 to 100. The score is the weighted sum of each of the four components’ scores, whose relative weight is reported in brackets: i) Basic Consideration (25%); ii) Diagnosis and quantification (24%); iii) Statistical Analysis (22%); iv) Disaggregation (29%).</p>
<p>The source is Paris 21. Data accessed on August 6, 2020 from <a href="https://statisticalcapacitymonitor.org/indicator/127" class="uri">https://statisticalcapacitymonitor.org/indicator/127</a></p>
<p>Not included because of lack of established methodology or suitable data sources.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="technical-documentation-of-spi-indicators.html#cb56-1" aria-hidden="true"></a><span class="co">#read in csv file.</span></span>
<span id="cb56-2"><a href="technical-documentation-of-spi-indicators.html#cb56-2" aria-hidden="true"></a>D5<span class="fl">.3</span>_DISK &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="kw">paste</span>(raw_dir, <span class="st">&quot;5.3_DISK&quot;</span>,<span class="st">&quot;5.3_DISK.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span> )) <span class="op">%&gt;%</span></span>
<span id="cb56-3"><a href="technical-documentation-of-spi-indicators.html#cb56-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">as_tibble</span>(<span class="dt">.name_repair =</span> <span class="st">&#39;universal&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb56-4"><a href="technical-documentation-of-spi-indicators.html#cb56-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">transmute</span>(</span>
<span id="cb56-5"><a href="technical-documentation-of-spi-indicators.html#cb56-5" aria-hidden="true"></a>    <span class="dt">country=</span>Country,</span>
<span id="cb56-6"><a href="technical-documentation-of-spi-indicators.html#cb56-6" aria-hidden="true"></a>    <span class="dt">date=</span>Year,</span>
<span id="cb56-7"><a href="technical-documentation-of-spi-indicators.html#cb56-7" aria-hidden="true"></a>    <span class="dt">SPI.D5.3.DISK=</span>Data.Value</span>
<span id="cb56-8"><a href="technical-documentation-of-spi-indicators.html#cb56-8" aria-hidden="true"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb56-9"><a href="technical-documentation-of-spi-indicators.html#cb56-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">country=</span><span class="kw">case_when</span>(</span>
<span id="cb56-10"><a href="technical-documentation-of-spi-indicators.html#cb56-10" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Bahamas&quot;</span> <span class="op">~</span><span class="st"> &quot;Bahamas, The&quot;</span>,                  </span>
<span id="cb56-11"><a href="technical-documentation-of-spi-indicators.html#cb56-11" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Bolivia (Plurinational State of)&quot;</span>   <span class="op">~</span><span class="st">  &quot;Bolivia&quot;</span>   ,                  </span>
<span id="cb56-12"><a href="technical-documentation-of-spi-indicators.html#cb56-12" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Côte d&#39;Ivoire&quot;</span>  <span class="op">~</span><span class="st">  &quot;Cote d&#39;Ivoire&quot;</span>                ,</span>
<span id="cb56-13"><a href="technical-documentation-of-spi-indicators.html#cb56-13" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Democratic Republic of the Congo&quot;</span>  <span class="op">~</span><span class="st"> &quot;Congo, Dem. Rep.&quot;</span>  ,           </span>
<span id="cb56-14"><a href="technical-documentation-of-spi-indicators.html#cb56-14" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Congo&quot;</span>  <span class="op">~</span><span class="st"> &quot;Congo, Rep.&quot;</span>        ,           </span>
<span id="cb56-15"><a href="technical-documentation-of-spi-indicators.html#cb56-15" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Curacao&quot;</span>  <span class="op">~</span><span class="st">  &quot;Curacao&quot;</span>       ,                </span>
<span id="cb56-16"><a href="technical-documentation-of-spi-indicators.html#cb56-16" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Czechia&quot;</span>   <span class="op">~</span><span class="st">  &quot;Czech Republic&quot;</span>     ,        </span>
<span id="cb56-17"><a href="technical-documentation-of-spi-indicators.html#cb56-17" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Egypt&quot;</span>  <span class="op">~</span><span class="st"> &quot;Egypt, Arab Rep.&quot;</span>        ,      </span>
<span id="cb56-18"><a href="technical-documentation-of-spi-indicators.html#cb56-18" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Micronesia (Federated States of)&quot;</span>  <span class="op">~</span><span class="st"> &quot;Micronesia, Fed. Sts.&quot;</span>  ,       </span>
<span id="cb56-19"><a href="technical-documentation-of-spi-indicators.html#cb56-19" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;United Kingdom&quot;</span>   <span class="op">~</span><span class="st">  &quot;United Kingdom&quot;</span>    ,         </span>
<span id="cb56-20"><a href="technical-documentation-of-spi-indicators.html#cb56-20" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Gambia&quot;</span>    <span class="op">~</span><span class="st">  &quot;Gambia, The&quot;</span>     ,           </span>
<span id="cb56-21"><a href="technical-documentation-of-spi-indicators.html#cb56-21" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Iran (Islamic Republic of)&quot;</span>  <span class="op">~</span><span class="st"> &quot;Iran, Islamic Rep.&quot;</span> ,           </span>
<span id="cb56-22"><a href="technical-documentation-of-spi-indicators.html#cb56-22" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Kyrgyzstan&quot;</span>   <span class="op">~</span><span class="st">  &quot;Kyrgyz Republic&quot;</span>   ,          </span>
<span id="cb56-23"><a href="technical-documentation-of-spi-indicators.html#cb56-23" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Republic of Korea&quot;</span>   <span class="op">~</span><span class="st"> &quot;Korea, Rep.&quot;</span>   ,               </span>
<span id="cb56-24"><a href="technical-documentation-of-spi-indicators.html#cb56-24" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Lao People&#39;s Democratic Republic&quot;</span>    <span class="op">~</span><span class="st">  &quot;Lao PDR&quot;</span> ,                    </span>
<span id="cb56-25"><a href="technical-documentation-of-spi-indicators.html#cb56-25" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Saint Kitts and Nevis &quot;</span>   <span class="op">~</span><span class="st"> &quot;St. Kitts and Nevis&quot;</span>,</span>
<span id="cb56-26"><a href="technical-documentation-of-spi-indicators.html#cb56-26" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Saint Lucia&quot;</span>   <span class="op">~</span><span class="st"> &quot;St. Lucia&quot;</span>,</span>
<span id="cb56-27"><a href="technical-documentation-of-spi-indicators.html#cb56-27" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Republic of Moldova&quot;</span>   <span class="op">~</span><span class="st">  &quot;Moldova&quot;</span>   ,                  </span>
<span id="cb56-28"><a href="technical-documentation-of-spi-indicators.html#cb56-28" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Democratic People&#39;s Republic of Korea&quot;</span>  <span class="op">~</span><span class="st">  &quot;Korea, Dem. People’s Rep.&quot;</span> ,  </span>
<span id="cb56-29"><a href="technical-documentation-of-spi-indicators.html#cb56-29" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Slovakia&quot;</span>   <span class="op">~</span><span class="st">  &quot;Slovak Republic&quot;</span>             ,</span>
<span id="cb56-30"><a href="technical-documentation-of-spi-indicators.html#cb56-30" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;United Republic of Tanzania&quot;</span>   <span class="op">~</span><span class="st">  &quot;Tanzania&quot;</span> ,                    </span>
<span id="cb56-31"><a href="technical-documentation-of-spi-indicators.html#cb56-31" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;United States of America&quot;</span>  <span class="op">~</span><span class="st"> &quot;United States&quot;</span>  ,                </span>
<span id="cb56-32"><a href="technical-documentation-of-spi-indicators.html#cb56-32" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Saint Vincent and the Grenadines&quot;</span> <span class="op">~</span><span class="st"> &quot;St. Vincent and the Grenadines&quot;</span> ,</span>
<span id="cb56-33"><a href="technical-documentation-of-spi-indicators.html#cb56-33" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Venezuela (Bolivarian Republic of)&quot;</span>  <span class="op">~</span><span class="st">  &quot;Venezuela, RB&quot;</span>   ,              </span>
<span id="cb56-34"><a href="technical-documentation-of-spi-indicators.html#cb56-34" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;British Virgin Islands&quot;</span>  <span class="op">~</span><span class="st">  &quot;British Virgin Islands&quot;</span> ,       </span>
<span id="cb56-35"><a href="technical-documentation-of-spi-indicators.html#cb56-35" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Viet Nam&quot;</span>  <span class="op">~</span><span class="st"> &quot;Vietnam&quot;</span>        ,              </span>
<span id="cb56-36"><a href="technical-documentation-of-spi-indicators.html#cb56-36" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;Yemen&quot;</span>  <span class="op">~</span><span class="st"> &quot;Yemen, Rep.&quot;</span>,</span>
<span id="cb56-37"><a href="technical-documentation-of-spi-indicators.html#cb56-37" aria-hidden="true"></a>    country<span class="op">==</span><span class="st">&quot;United Kingdom of Great Britain and Northern Ireland&quot;</span> <span class="op">~</span><span class="st"> &quot;United Kingdom&quot;</span>,</span>
<span id="cb56-38"><a href="technical-documentation-of-spi-indicators.html#cb56-38" aria-hidden="true"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>country</span>
<span id="cb56-39"><a href="technical-documentation-of-spi-indicators.html#cb56-39" aria-hidden="true"></a>  )) <span class="op">%&gt;%</span></span>
<span id="cb56-40"><a href="technical-documentation-of-spi-indicators.html#cb56-40" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RAW.D5.3.DISK=</span><span class="kw">if_else</span>(SPI.D5.<span class="fl">3.</span>DISK<span class="op">==</span><span class="st">&#39;no data&#39;</span>,<span class="kw">as.character</span>(<span class="ot">NA</span>), SPI.D5.<span class="fl">3.</span>DISK),</span>
<span id="cb56-41"><a href="technical-documentation-of-spi-indicators.html#cb56-41" aria-hidden="true"></a>         <span class="dt">SPI.D5.3.DISK=</span><span class="kw">if_else</span>(SPI.D5.<span class="fl">3.</span>DISK<span class="op">==</span><span class="st">&#39;no data&#39;</span>,<span class="kw">as.numeric</span>(<span class="ot">NA</span>), <span class="kw">as.numeric</span>(SPI.D5.<span class="fl">3.</span>DISK))<span class="op">/</span><span class="dv">100</span>) <span class="op">%&gt;%</span></span>
<span id="cb56-42"><a href="technical-documentation-of-spi-indicators.html#cb56-42" aria-hidden="true"></a><span class="st">  </span><span class="kw">right_join</span>(spi_df_empty)</span>
<span id="cb56-43"><a href="technical-documentation-of-spi-indicators.html#cb56-43" aria-hidden="true"></a></span>
<span id="cb56-44"><a href="technical-documentation-of-spi-indicators.html#cb56-44" aria-hidden="true"></a><span class="co">#add to spi databases</span></span>
<span id="cb56-45"><a href="technical-documentation-of-spi-indicators.html#cb56-45" aria-hidden="true"></a>spi_df &lt;-<span class="st"> </span>spi_df <span class="op">%&gt;%</span></span>
<span id="cb56-46"><a href="technical-documentation-of-spi-indicators.html#cb56-46" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(D5<span class="fl">.3</span>_DISK)</span>
<span id="cb56-47"><a href="technical-documentation-of-spi-indicators.html#cb56-47" aria-hidden="true"></a></span>
<span id="cb56-48"><a href="technical-documentation-of-spi-indicators.html#cb56-48" aria-hidden="true"></a></span>
<span id="cb56-49"><a href="technical-documentation-of-spi-indicators.html#cb56-49" aria-hidden="true"></a>D5<span class="fl">.3</span>_DISK_map &lt;-<span class="st"> </span>D5<span class="fl">.3</span>_DISK <span class="op">%&gt;%</span></span>
<span id="cb56-50"><a href="technical-documentation-of-spi-indicators.html#cb56-50" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(SPI.D5.<span class="fl">3.</span>DISK))</span>
<span id="cb56-51"><a href="technical-documentation-of-spi-indicators.html#cb56-51" aria-hidden="true"></a></span>
<span id="cb56-52"><a href="technical-documentation-of-spi-indicators.html#cb56-52" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;D5.3_DISK_map&#39;</span>, <span class="st">&#39;SPI.D5.3.DISK&#39;</span>, <span class="st">&#39;Systematic use of statistical knowledge with statistical terms and indicators in national policy documents. Source: Paris21&#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/skill-1.png" width="960" /><img src="SPI-book_files/figure-html/skill-2.png" width="960" /><img src="SPI-book_files/figure-html/skill-3.png" width="960" /><img src="SPI-book_files/figure-html/skill-4.png" width="960" /></p>
</div>
<div id="indicator-5.4-partnerships" class="section level3" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> Indicator 5.4: partnerships</h3>
<p>Not included because of lack of established methodology or suitable data sources.</p>
</div>
<div id="indicator-5.5-finance" class="section level3" number="2.5.5">
<h3><span class="header-section-number">2.5.5</span> Indicator 5.5: finance</h3>
<p>Indicator based on SDG indicators (SDG 17.18.3 (national statistical plan that is fully funded and under implementation). This indicator measures whether the national statistical plan under implementation is fully funded. It relates to SDG 17.18.3 and is based on the annual Status Report on National Strategies for the Development of Statistics (NSDS).</p>
<p>Scores is 1 if the country has a national statistical plan that is fully funded and under implementation. Scores of 0 or scores with missing values are treated the same (both given a score of zero).</p>
<p>The source is Paris 21 and UNSD. Data accessed using UNSD SDG API on 2021-01-12</p>
<p>Source of this data is UNSD and Paris21.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="technical-documentation-of-spi-indicators.html#cb57-1" aria-hidden="true"></a><span class="co">#pull from unsd api</span></span>
<span id="cb57-2"><a href="technical-documentation-of-spi-indicators.html#cb57-2" aria-hidden="true"></a>D5<span class="fl">.5</span>_DIFI &lt;-<span class="st"> </span><span class="kw">un_pull</span>(<span class="st">&#39;SG_STT_NSDSFND&#39;</span>, <span class="st">&#39;2004&#39;</span>, <span class="st">&#39;2019&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb57-3"><a href="technical-documentation-of-spi-indicators.html#cb57-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(iso3c, date,value) <span class="op">%&gt;%</span></span>
<span id="cb57-4"><a href="technical-documentation-of-spi-indicators.html#cb57-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">right_join</span>(spi_df_empty) <span class="op">%&gt;%</span></span>
<span id="cb57-5"><a href="technical-documentation-of-spi-indicators.html#cb57-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RAW.D5.5.DIFI=</span><span class="kw">if_else</span>((<span class="kw">is.na</span>(value) <span class="op">|</span><span class="st"> </span>value<span class="op">==</span><span class="st">&quot;NaN&quot;</span>),<span class="kw">as.numeric</span>(<span class="ot">NA</span>), <span class="kw">as.numeric</span>(value)),</span>
<span id="cb57-6"><a href="technical-documentation-of-spi-indicators.html#cb57-6" aria-hidden="true"></a>         <span class="dt">SPI.D5.5.DIFI=</span><span class="kw">if_else</span>((<span class="kw">is.na</span>(value) <span class="op">|</span><span class="st"> </span>value<span class="op">==</span><span class="st">&quot;NaN&quot;</span>),<span class="dv">0</span>, <span class="kw">as.numeric</span>(value))) <span class="op">%&gt;%</span></span>
<span id="cb57-7"><a href="technical-documentation-of-spi-indicators.html#cb57-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>value)</span>
<span id="cb57-8"><a href="technical-documentation-of-spi-indicators.html#cb57-8" aria-hidden="true"></a></span>
<span id="cb57-9"><a href="technical-documentation-of-spi-indicators.html#cb57-9" aria-hidden="true"></a><span class="co"># #read in csv file.</span></span>
<span id="cb57-10"><a href="technical-documentation-of-spi-indicators.html#cb57-10" aria-hidden="true"></a><span class="co"># D5.5_DIFI &lt;- read_csv(file = paste(raw_dir, &quot;5.5_DIFI&quot;,&quot;D5.5_DIFI.csv&quot;, sep=&quot;/&quot; )) %&gt;%</span></span>
<span id="cb57-11"><a href="technical-documentation-of-spi-indicators.html#cb57-11" aria-hidden="true"></a><span class="co">#   as_tibble(.name_repair = &#39;universal&#39;) %&gt;%</span></span>
<span id="cb57-12"><a href="technical-documentation-of-spi-indicators.html#cb57-12" aria-hidden="true"></a><span class="co">#   transmute(</span></span>
<span id="cb57-13"><a href="technical-documentation-of-spi-indicators.html#cb57-13" aria-hidden="true"></a><span class="co">#     country=Country,</span></span>
<span id="cb57-14"><a href="technical-documentation-of-spi-indicators.html#cb57-14" aria-hidden="true"></a><span class="co">#     date=Year,</span></span>
<span id="cb57-15"><a href="technical-documentation-of-spi-indicators.html#cb57-15" aria-hidden="true"></a><span class="co">#     SPI.5.5.DIFI=Data.Value</span></span>
<span id="cb57-16"><a href="technical-documentation-of-spi-indicators.html#cb57-16" aria-hidden="true"></a><span class="co">#   ) %&gt;%</span></span>
<span id="cb57-17"><a href="technical-documentation-of-spi-indicators.html#cb57-17" aria-hidden="true"></a><span class="co">#     mutate(country=case_when(</span></span>
<span id="cb57-18"><a href="technical-documentation-of-spi-indicators.html#cb57-18" aria-hidden="true"></a><span class="co">#     country==&quot;Bahamas&quot; ~ &quot;Bahamas, The&quot;,                  </span></span>
<span id="cb57-19"><a href="technical-documentation-of-spi-indicators.html#cb57-19" aria-hidden="true"></a><span class="co">#     country==&quot;Bolivia (Plurinational State of)&quot;   ~  &quot;Bolivia&quot;   ,                  </span></span>
<span id="cb57-20"><a href="technical-documentation-of-spi-indicators.html#cb57-20" aria-hidden="true"></a><span class="co">#     country==&quot;Côte d&#39;Ivoire&quot;  ~  &quot;Cote d&#39;Ivoire&quot;                ,</span></span>
<span id="cb57-21"><a href="technical-documentation-of-spi-indicators.html#cb57-21" aria-hidden="true"></a><span class="co">#     country==&quot;Democratic Republic of the Congo&quot;  ~ &quot;Congo, Dem. Rep.&quot;  ,           </span></span>
<span id="cb57-22"><a href="technical-documentation-of-spi-indicators.html#cb57-22" aria-hidden="true"></a><span class="co">#     country==&quot;Congo&quot;  ~ &quot;Congo, Rep.&quot;        ,           </span></span>
<span id="cb57-23"><a href="technical-documentation-of-spi-indicators.html#cb57-23" aria-hidden="true"></a><span class="co">#     country==&quot;Curacao&quot;  ~  &quot;Curacao&quot;       ,                </span></span>
<span id="cb57-24"><a href="technical-documentation-of-spi-indicators.html#cb57-24" aria-hidden="true"></a><span class="co">#     country==&quot;Czechia&quot;   ~  &quot;Czech Republic&quot;     ,        </span></span>
<span id="cb57-25"><a href="technical-documentation-of-spi-indicators.html#cb57-25" aria-hidden="true"></a><span class="co">#     country==&quot;Egypt&quot;  ~ &quot;Egypt, Arab Rep.&quot;        ,      </span></span>
<span id="cb57-26"><a href="technical-documentation-of-spi-indicators.html#cb57-26" aria-hidden="true"></a><span class="co">#     country==&quot;Micronesia (Federated States of)&quot;  ~ &quot;Micronesia, Fed. Sts.&quot;  ,       </span></span>
<span id="cb57-27"><a href="technical-documentation-of-spi-indicators.html#cb57-27" aria-hidden="true"></a><span class="co">#     country==&quot;United Kingdom&quot;   ~  &quot;United Kingdom&quot;    ,         </span></span>
<span id="cb57-28"><a href="technical-documentation-of-spi-indicators.html#cb57-28" aria-hidden="true"></a><span class="co">#     country==&quot;Gambia&quot;    ~  &quot;Gambia, The&quot;     ,           </span></span>
<span id="cb57-29"><a href="technical-documentation-of-spi-indicators.html#cb57-29" aria-hidden="true"></a><span class="co">#     country==&quot;Iran (Islamic Republic of)&quot;  ~ &quot;Iran, Islamic Rep.&quot; ,           </span></span>
<span id="cb57-30"><a href="technical-documentation-of-spi-indicators.html#cb57-30" aria-hidden="true"></a><span class="co">#     country==&quot;Kyrgyzstan&quot;   ~  &quot;Kyrgyz Republic&quot;   ,          </span></span>
<span id="cb57-31"><a href="technical-documentation-of-spi-indicators.html#cb57-31" aria-hidden="true"></a><span class="co">#     country==&quot;Republic of Korea&quot;   ~ &quot;Korea, Rep.&quot;   ,               </span></span>
<span id="cb57-32"><a href="technical-documentation-of-spi-indicators.html#cb57-32" aria-hidden="true"></a><span class="co">#     country==&quot;Lao People&#39;s Democratic Republic&quot;    ~  &quot;Lao PDR&quot; ,                    </span></span>
<span id="cb57-33"><a href="technical-documentation-of-spi-indicators.html#cb57-33" aria-hidden="true"></a><span class="co">#     country==&quot;Saint Kitts and Nevis   &quot;   ~ &quot;St. Kitts and Nevis&quot;,</span></span>
<span id="cb57-34"><a href="technical-documentation-of-spi-indicators.html#cb57-34" aria-hidden="true"></a><span class="co">#     country==&quot;Saint Lucia&quot;   ~ &quot;St. Lucia&quot;,</span></span>
<span id="cb57-35"><a href="technical-documentation-of-spi-indicators.html#cb57-35" aria-hidden="true"></a><span class="co">#     country==&quot;Republic of Moldova&quot;   ~  &quot;Moldova&quot;   ,                  </span></span>
<span id="cb57-36"><a href="technical-documentation-of-spi-indicators.html#cb57-36" aria-hidden="true"></a><span class="co">#     country==&quot;Democratic People&#39;s Republic of Korea&quot;  ~  &quot;Korea, Dem. People’s Rep.&quot; ,  </span></span>
<span id="cb57-37"><a href="technical-documentation-of-spi-indicators.html#cb57-37" aria-hidden="true"></a><span class="co">#     country==&quot;Slovakia&quot;   ~  &quot;Slovak Republic&quot;             ,</span></span>
<span id="cb57-38"><a href="technical-documentation-of-spi-indicators.html#cb57-38" aria-hidden="true"></a><span class="co">#     country==&quot;United Republic of Tanzania&quot;   ~  &quot;Tanzania&quot; ,                    </span></span>
<span id="cb57-39"><a href="technical-documentation-of-spi-indicators.html#cb57-39" aria-hidden="true"></a><span class="co">#     country==&quot;United States of America&quot;  ~ &quot;United States&quot;  ,                </span></span>
<span id="cb57-40"><a href="technical-documentation-of-spi-indicators.html#cb57-40" aria-hidden="true"></a><span class="co">#     country==&quot;Saint Vincent and the Grenadines&quot; ~ &quot;St. Vincent and the Grenadines&quot; ,</span></span>
<span id="cb57-41"><a href="technical-documentation-of-spi-indicators.html#cb57-41" aria-hidden="true"></a><span class="co">#     country==&quot;Venezuela (Bolivarian Republic of)&quot;  ~  &quot;Venezuela, RB&quot;   ,              </span></span>
<span id="cb57-42"><a href="technical-documentation-of-spi-indicators.html#cb57-42" aria-hidden="true"></a><span class="co">#     country==&quot;British Virgin Islands&quot;  ~  &quot;British Virgin Islands&quot; ,       </span></span>
<span id="cb57-43"><a href="technical-documentation-of-spi-indicators.html#cb57-43" aria-hidden="true"></a><span class="co">#     country==&quot;Viet Nam&quot;  ~ &quot;Vietnam&quot;        ,              </span></span>
<span id="cb57-44"><a href="technical-documentation-of-spi-indicators.html#cb57-44" aria-hidden="true"></a><span class="co">#     country==&quot;Yemen&quot;  ~ &quot;Yemen, Rep.&quot;,</span></span>
<span id="cb57-45"><a href="technical-documentation-of-spi-indicators.html#cb57-45" aria-hidden="true"></a><span class="co">#     country==&quot;United Kingdom of Great Britain and Northern Ireland&quot; ~ &quot;United Kingdom&quot;,</span></span>
<span id="cb57-46"><a href="technical-documentation-of-spi-indicators.html#cb57-46" aria-hidden="true"></a><span class="co">#     TRUE ~ country</span></span>
<span id="cb57-47"><a href="technical-documentation-of-spi-indicators.html#cb57-47" aria-hidden="true"></a><span class="co">#   )) %&gt;%</span></span>
<span id="cb57-48"><a href="technical-documentation-of-spi-indicators.html#cb57-48" aria-hidden="true"></a><span class="co">#   mutate(RAW.5.5.DIFI=if_else(SPI.5.5.DIFI==&#39;no data&#39;,as.character(NA), SPI.5.5.DIFI),</span></span>
<span id="cb57-49"><a href="technical-documentation-of-spi-indicators.html#cb57-49" aria-hidden="true"></a><span class="co">#          SPI.5.5.DIFI=if_else(SPI.5.5.DIFI==&#39;no data&#39;,as.numeric(NA), as.numeric(SPI.5.5.DIFI))) %&gt;%</span></span>
<span id="cb57-50"><a href="technical-documentation-of-spi-indicators.html#cb57-50" aria-hidden="true"></a><span class="co">#   right_join(spi_df_empty)</span></span>
<span id="cb57-51"><a href="technical-documentation-of-spi-indicators.html#cb57-51" aria-hidden="true"></a></span>
<span id="cb57-52"><a href="technical-documentation-of-spi-indicators.html#cb57-52" aria-hidden="true"></a><span class="co">#add to spi databases</span></span>
<span id="cb57-53"><a href="technical-documentation-of-spi-indicators.html#cb57-53" aria-hidden="true"></a>spi_df &lt;-<span class="st"> </span>spi_df <span class="op">%&gt;%</span></span>
<span id="cb57-54"><a href="technical-documentation-of-spi-indicators.html#cb57-54" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(D5<span class="fl">.5</span>_DIFI)</span>
<span id="cb57-55"><a href="technical-documentation-of-spi-indicators.html#cb57-55" aria-hidden="true"></a></span>
<span id="cb57-56"><a href="technical-documentation-of-spi-indicators.html#cb57-56" aria-hidden="true"></a></span>
<span id="cb57-57"><a href="technical-documentation-of-spi-indicators.html#cb57-57" aria-hidden="true"></a></span>
<span id="cb57-58"><a href="technical-documentation-of-spi-indicators.html#cb57-58" aria-hidden="true"></a></span>
<span id="cb57-59"><a href="technical-documentation-of-spi-indicators.html#cb57-59" aria-hidden="true"></a></span>
<span id="cb57-60"><a href="technical-documentation-of-spi-indicators.html#cb57-60" aria-hidden="true"></a>D5<span class="fl">.5</span>_DIFI_map &lt;-<span class="st"> </span>D5<span class="fl">.5</span>_DIFI <span class="op">%&gt;%</span></span>
<span id="cb57-61"><a href="technical-documentation-of-spi-indicators.html#cb57-61" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(SPI.D5.<span class="fl">5.</span>DIFI))</span>
<span id="cb57-62"><a href="technical-documentation-of-spi-indicators.html#cb57-62" aria-hidden="true"></a></span>
<span id="cb57-63"><a href="technical-documentation-of-spi-indicators.html#cb57-63" aria-hidden="true"></a><span class="kw">spi_mapper</span>(<span class="st">&#39;D5.5_DIFI_map&#39;</span>, <span class="st">&#39;RAW.D5.5.DIFI&#39;</span>, <span class="st">&#39;Statistical plan fully funded. Source: Paris21&#39;</span>)</span></code></pre></div>
<p><img src="SPI-book_files/figure-html/finance-1.png" width="960" /><img src="SPI-book_files/figure-html/finance-2.png" width="960" /><img src="SPI-book_files/figure-html/finance-3.png" width="960" /><img src="SPI-book_files/figure-html/finance-4.png" width="960" /></p>
</div>
</div>
<div id="final-dataset" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Final Dataset</h2>
<p>Below we will append the data together and save the final files together.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="technical-documentation-of-spi-indicators.html#cb58-1" aria-hidden="true"></a><span class="co">#add in population</span></span>
<span id="cb58-2"><a href="technical-documentation-of-spi-indicators.html#cb58-2" aria-hidden="true"></a>pop_df &lt;-<span class="st"> </span>wbstats<span class="op">::</span><span class="kw">wb</span>(<span class="dt">country=</span><span class="st">&quot;all&quot;</span>,</span>
<span id="cb58-3"><a href="technical-documentation-of-spi-indicators.html#cb58-3" aria-hidden="true"></a>             <span class="dt">indicator=</span><span class="st">&#39;SP.POP.TOTL&#39;</span>,</span>
<span id="cb58-4"><a href="technical-documentation-of-spi-indicators.html#cb58-4" aria-hidden="true"></a>             <span class="dt">startdate=</span><span class="dv">2004</span>,</span>
<span id="cb58-5"><a href="technical-documentation-of-spi-indicators.html#cb58-5" aria-hidden="true"></a>             <span class="dt">enddate=</span><span class="dv">2019</span>) <span class="op">%&gt;%</span></span>
<span id="cb58-6"><a href="technical-documentation-of-spi-indicators.html#cb58-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date=</span><span class="kw">as.numeric</span>(date)) <span class="op">%&gt;%</span></span>
<span id="cb58-7"><a href="technical-documentation-of-spi-indicators.html#cb58-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">population=</span>value) <span class="op">%&gt;%</span></span>
<span id="cb58-8"><a href="technical-documentation-of-spi-indicators.html#cb58-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(country, date, population)</span>
<span id="cb58-9"><a href="technical-documentation-of-spi-indicators.html#cb58-9" aria-hidden="true"></a></span>
<span id="cb58-10"><a href="technical-documentation-of-spi-indicators.html#cb58-10" aria-hidden="true"></a><span class="co"># create final dataset</span></span>
<span id="cb58-11"><a href="technical-documentation-of-spi-indicators.html#cb58-11" aria-hidden="true"></a>spi_df_final &lt;-<span class="st"> </span>spi_df <span class="op">%&gt;%</span></span>
<span id="cb58-12"><a href="technical-documentation-of-spi-indicators.html#cb58-12" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(country, iso3c, date, <span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;RAW&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb58-13"><a href="technical-documentation-of-spi-indicators.html#cb58-13" aria-hidden="true"></a><span class="st">  </span><span class="kw">right_join</span>(spi_df_empty) <span class="op">%&gt;%</span></span>
<span id="cb58-14"><a href="technical-documentation-of-spi-indicators.html#cb58-14" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(pop_df) <span class="op">%&gt;%</span></span>
<span id="cb58-15"><a href="technical-documentation-of-spi-indicators.html#cb58-15" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>date,country)</span>
<span id="cb58-16"><a href="technical-documentation-of-spi-indicators.html#cb58-16" aria-hidden="true"></a></span>
<span id="cb58-17"><a href="technical-documentation-of-spi-indicators.html#cb58-17" aria-hidden="true"></a></span>
<span id="cb58-18"><a href="technical-documentation-of-spi-indicators.html#cb58-18" aria-hidden="true"></a><span class="co">####</span></span>
<span id="cb58-19"><a href="technical-documentation-of-spi-indicators.html#cb58-19" aria-hidden="true"></a><span class="co">#lining up data to 2019 and filling in some values for OECD countries.  </span></span>
<span id="cb58-20"><a href="technical-documentation-of-spi-indicators.html#cb58-20" aria-hidden="true"></a><span class="co">####</span></span>
<span id="cb58-21"><a href="technical-documentation-of-spi-indicators.html#cb58-21" aria-hidden="true"></a><span class="co">#get a list of oecd countries</span></span>
<span id="cb58-22"><a href="technical-documentation-of-spi-indicators.html#cb58-22" aria-hidden="true"></a>oecd_country_query &lt;-<span class="st">  </span><span class="kw">GET</span>(<span class="dt">url =</span> <span class="st">&quot;https://api.worldbank.org/v2/country?region=OED&amp;format=json&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb58-23"><a href="technical-documentation-of-spi-indicators.html#cb58-23" aria-hidden="true"></a><span class="st">  </span><span class="kw">content</span>( <span class="dt">as =</span> <span class="st">&quot;text&quot;</span>, <span class="dt">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb58-24"><a href="technical-documentation-of-spi-indicators.html#cb58-24" aria-hidden="true"></a><span class="st">  </span>jsonlite<span class="op">::</span><span class="kw">fromJSON</span>( <span class="dt">flatten =</span> <span class="ot">TRUE</span>) </span>
<span id="cb58-25"><a href="technical-documentation-of-spi-indicators.html#cb58-25" aria-hidden="true"></a></span>
<span id="cb58-26"><a href="technical-documentation-of-spi-indicators.html#cb58-26" aria-hidden="true"></a><span class="co">#do some conversion to produce a dataframe</span></span>
<span id="cb58-27"><a href="technical-documentation-of-spi-indicators.html#cb58-27" aria-hidden="true"></a>oecd_country_df &lt;-<span class="st"> </span>oecd_country_query[[<span class="dv">2</span>]] <span class="op">%&gt;%</span></span>
<span id="cb58-28"><a href="technical-documentation-of-spi-indicators.html#cb58-28" aria-hidden="true"></a><span class="st">  </span><span class="kw">as_tibble</span>() </span>
<span id="cb58-29"><a href="technical-documentation-of-spi-indicators.html#cb58-29" aria-hidden="true"></a>  </span>
<span id="cb58-30"><a href="technical-documentation-of-spi-indicators.html#cb58-30" aria-hidden="true"></a>country_mod_list &lt;-<span class="st"> </span>oecd_country_df<span class="op">$</span>name  <span class="co">#fill in the missing values for OECDs with 1s because by participating in OECD these countries have this</span></span>
<span id="cb58-31"><a href="technical-documentation-of-spi-indicators.html#cb58-31" aria-hidden="true"></a>country_mod_list &lt;-<span class="st"> </span><span class="kw">c</span>(country_mod_list, <span class="st">&#39;Singapore&#39;</span>)</span>
<span id="cb58-32"><a href="technical-documentation-of-spi-indicators.html#cb58-32" aria-hidden="true"></a>spi_df_final &lt;-<span class="st"> </span>spi_df_final <span class="op">%&gt;%</span></span>
<span id="cb58-33"><a href="technical-documentation-of-spi-indicators.html#cb58-33" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(country, date) <span class="op">%&gt;%</span></span>
<span id="cb58-34"><a href="technical-documentation-of-spi-indicators.html#cb58-34" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span></span>
<span id="cb58-35"><a href="technical-documentation-of-spi-indicators.html#cb58-35" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(<span class="kw">starts_with</span>(<span class="st">&quot;SPI&quot;</span>), na.locf, <span class="dt">na.rm=</span><span class="ot">FALSE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb58-36"><a href="technical-documentation-of-spi-indicators.html#cb58-36" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(<span class="kw">c</span>(<span class="st">&quot;SPI.D1.5.POV&quot;</span>,</span>
<span id="cb58-37"><a href="technical-documentation-of-spi-indicators.html#cb58-37" aria-hidden="true"></a>                  <span class="st">&quot;SPI.D2.1.GDDS&quot;</span>,</span>
<span id="cb58-38"><a href="technical-documentation-of-spi-indicators.html#cb58-38" aria-hidden="true"></a>                  <span class="st">&quot;SPI.D5.1.DILG&quot;</span>,</span>
<span id="cb58-39"><a href="technical-documentation-of-spi-indicators.html#cb58-39" aria-hidden="true"></a>                  <span class="st">&quot;SPI.D5.2.3.CNIN&quot;</span>, <span class="st">&quot;SPI.D5.2.5.HOUS&quot;</span>, <span class="st">&quot;SPI.D5.2.6.EMPL&quot;</span>, <span class="st">&quot;SPI.D5.2.8.FINA&quot;</span>,</span>
<span id="cb58-40"><a href="technical-documentation-of-spi-indicators.html#cb58-40" aria-hidden="true"></a>                  <span class="st">&quot;SPI.D5.2.10.GSBP&quot;</span>,</span>
<span id="cb58-41"><a href="technical-documentation-of-spi-indicators.html#cb58-41" aria-hidden="true"></a>                  <span class="st">&quot;SPI.D5.5.DIFI&quot;</span>),</span>
<span id="cb58-42"><a href="technical-documentation-of-spi-indicators.html#cb58-42" aria-hidden="true"></a>                <span class="op">~</span><span class="kw">if_else</span>(( (income<span class="op">==</span><span class="st">&#39;High income&#39;</span>)  <span class="op">&amp;</span><span class="st"> </span>(country <span class="op">%in%</span><span class="st"> </span>country_mod_list)),<span class="dv">1</span>,.)                )) </span></code></pre></div>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="technical-documentation-of-spi-indicators.html#cb59-1" aria-hidden="true"></a><span class="co">#write to csv</span></span>
<span id="cb59-2"><a href="technical-documentation-of-spi-indicators.html#cb59-2" aria-hidden="true"></a>spi_df_final <span class="op">%&gt;%</span></span>
<span id="cb59-3"><a href="technical-documentation-of-spi-indicators.html#cb59-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(is.list, as.character)) <span class="op">%&gt;%</span></span>
<span id="cb59-4"><a href="technical-documentation-of-spi-indicators.html#cb59-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">write_excel_csv</span>( <span class="dt">path =</span> <span class="kw">paste</span>(output_dir, <span class="st">&#39;SPI_data.csv&#39;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span>))</span>
<span id="cb59-5"><a href="technical-documentation-of-spi-indicators.html#cb59-5" aria-hidden="true"></a></span>
<span id="cb59-6"><a href="technical-documentation-of-spi-indicators.html#cb59-6" aria-hidden="true"></a><span class="co">#label data</span></span>
<span id="cb59-7"><a href="technical-documentation-of-spi-indicators.html#cb59-7" aria-hidden="true"></a><span class="co">#read in metadata</span></span>
<span id="cb59-8"><a href="technical-documentation-of-spi-indicators.html#cb59-8" aria-hidden="true"></a>names_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="st">&#39;source_id&#39;</span>=<span class="kw">colnames</span>(spi_df_final))</span>
<span id="cb59-9"><a href="technical-documentation-of-spi-indicators.html#cb59-9" aria-hidden="true"></a></span>
<span id="cb59-10"><a href="technical-documentation-of-spi-indicators.html#cb59-10" aria-hidden="true"></a>spi_meta &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">paste</span>(raw_dir, <span class="st">&#39;/metadata/SPI_dimensions_sources.csv&#39;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb59-11"><a href="technical-documentation-of-spi-indicators.html#cb59-11" aria-hidden="true"></a><span class="st">  </span><span class="kw">right_join</span>(names_df) <span class="op">%&gt;%</span></span>
<span id="cb59-12"><a href="technical-documentation-of-spi-indicators.html#cb59-12" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">source_name=</span><span class="kw">if_else</span>(<span class="kw">is.na</span>(source_name), <span class="kw">paste</span>(source_id), source_name)) <span class="op">%&gt;%</span></span>
<span id="cb59-13"><a href="technical-documentation-of-spi-indicators.html#cb59-13" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">factor</span>(source_id, <span class="dt">levels=</span><span class="kw">colnames</span>(spi_df_final)))</span>
<span id="cb59-14"><a href="technical-documentation-of-spi-indicators.html#cb59-14" aria-hidden="true"></a></span>
<span id="cb59-15"><a href="technical-documentation-of-spi-indicators.html#cb59-15" aria-hidden="true"></a><span class="co">#label data</span></span>
<span id="cb59-16"><a href="technical-documentation-of-spi-indicators.html#cb59-16" aria-hidden="true"></a></span>
<span id="cb59-17"><a href="technical-documentation-of-spi-indicators.html#cb59-17" aria-hidden="true"></a><span class="kw">label</span>(spi_df_final) =<span class="st"> </span><span class="kw">as.list</span>(spi_meta<span class="op">$</span>source_name)</span>
<span id="cb59-18"><a href="technical-documentation-of-spi-indicators.html#cb59-18" aria-hidden="true"></a></span>
<span id="cb59-19"><a href="technical-documentation-of-spi-indicators.html#cb59-19" aria-hidden="true"></a></span>
<span id="cb59-20"><a href="technical-documentation-of-spi-indicators.html#cb59-20" aria-hidden="true"></a><span class="co">#write to stata</span></span>
<span id="cb59-21"><a href="technical-documentation-of-spi-indicators.html#cb59-21" aria-hidden="true"></a>spi_df_final <span class="op">%&gt;%</span></span>
<span id="cb59-22"><a href="technical-documentation-of-spi-indicators.html#cb59-22" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(is.list, as.character)) <span class="op">%&gt;%</span></span>
<span id="cb59-23"><a href="technical-documentation-of-spi-indicators.html#cb59-23" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename_with</span>(<span class="op">~</span><span class="kw">gsub</span>(<span class="st">&quot;.&quot;</span>,<span class="st">&quot;_&quot;</span>,.x, <span class="dt">fixed=</span><span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb59-24"><a href="technical-documentation-of-spi-indicators.html#cb59-24" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>lat,<span class="op">-</span>long) <span class="op">%&gt;%</span></span>
<span id="cb59-25"><a href="technical-documentation-of-spi-indicators.html#cb59-25" aria-hidden="true"></a><span class="st">  </span><span class="kw">write_dta</span>( <span class="dt">path =</span> <span class="kw">paste</span>(output_dir, <span class="st">&#39;SPI_data.dta&#39;</span>, <span class="dt">sep=</span><span class="st">&quot;/&quot;</span>))</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="measuring-the-statistical-performance-of-countries-an-overview-of-the-statistical-performance-indicators-and-index.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
